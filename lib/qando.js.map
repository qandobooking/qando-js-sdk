{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///qando.js","webpack:///webpack/bootstrap 9c2e1127fbd64f34e8c9","webpack:///./src/index.js","webpack:///./~/iframe-resizer/index.js","webpack:///./~/iframe-resizer/js/iframeResizer.contentWindow.js","webpack:///./~/iframe-resizer/js/iframeResizer.js","webpack:///./~/iframe-resizer/js/index.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","booking","selector","options","arguments","length","undefined","el","document","querySelector","shop","service","url","makeIframeUrl","iframe","createElement","src","style","border","width","frameborder","scrolling","appendChild","iframeResizer","checkOrigin","log","QANDO_FRONT_URL","header","footer","css","_require","qando","window","addEventListener","evt","func","attachEvent","removeEventListener","detachEvent","capitalizeFirstLetter","string","charAt","toUpperCase","slice","throttle","context","args","result","timeout","previous","later","getNow","apply","now","remaining","throttledTimer","clearTimeout","setTimeout","formatLogMsg","msg","msgID","myID","logging","console","warn","init","readDataFromParent","location","href","readDataFromPage","setMargin","setBodyStyle","bodyBackground","bodyPadding","injectClearFixIntoBodyElement","checkHeightMode","checkWidthMode","stopInfiniteResizingOfIFrame","setupPublicMethods","startEventListeners","inPageLinks","setupInPageLinks","sendSize","readyCallback","strBool","str","data","initMsg","substr","msgIdLen","split","bodyMargin","Number","calculateWidth","interval","autoResize","bodyMarginStr","heightCalcMode","tolerance","enable","resizeFrom","widthCalcMode","readData","iFrameResizer","JSON","stringify","messageCallback","targetOriginDefault","targetOrigin","heightCalculationMethod","widthCalculationMethod","setupCustomCalcMethods","calcMode","calcFunc","customCalcMethods","Object","constructor","chkCSS","attr","value","indexOf","body","documentElement","height","manageTriggerEvent","handleEvent","eventName","eventType","listener","add","remove","eventNames","Array","prototype","map","method","manageEventListeners","checkCalcMode","calcModeDefault","modes","type","heightCalcModeDefault","getHeight","widthCalcModeDefault","getWidth","setupMutationObserver","stopMsgsToParent","sendPermit","removeMsgListener","receiver","disconnectMutationObserver","bodyObserver","disconnect","stopEventListeners","clearInterval","intervalTimer","teardown","clearFix","clear","display","getPagePosition","x","pageXOffset","scrollLeft","y","pageYOffset","scrollTop","getElementPosition","elPosition","getBoundingClientRect","pagePosition","parseInt","left","top","findTarget","jumpToTarget","target","jumpPosition","hash","sendMsg","hashData","decodeURIComponent","getElementById","getElementsByName","checkLocationHash","bindAnchors","setupLink","linkClicked","e","preventDefault","getAttribute","forEach","querySelectorAll","bindLocationHash","initCheck","eventCancelTimer","enableInPageLinks","win","parentIFrame","resize","close","getId","getPageInfo","callback","pageInfoCallback","moveToAnchor","reset","resetIFrame","scrollTo","scrollToOffset","sendMessage","setHeightCalculationMethod","setWidthCalculationMethod","setTargetOrigin","size","customHeight","customWidth","valString","initInterval","setInterval","Math","abs","setupBodyMutationObserver","addImageLoadListners","mutation","addImageLoadListener","element","complete","imageLoaded","imageError","elements","push","attributeName","removeFromArray","splice","removeImageLoadListener","imageEventTriggered","event","typeDesc","mutationObserved","mutations","createMutationObserver","config","attributes","attributeOldValue","characterData","characterDataOldValue","childList","subtree","observer","MutationObserver","observe","WebKitMutationObserver","forceIntervalTimer","getComputedStyle","prop","convertUnitsToPxForIE8","PIXEL","test","base","runtimeStyle","currentStyle","pixelLeft","retVal","defaultView","chkEventThottle","timer","getMaxElement","side","elementsLength","elVal","maxVal","Side","i","getAllMeasurements","dimention","bodyOffset","bodyScroll","documentElementOffset","documentElementScroll","getTaggedElements","tag","noTaggedElementsFound","getAllElements","sizeIFrame","triggerEvent","triggerEventDesc","resizeIFrame","currentHeight","currentWidth","isSizeChangeDetected","checkTolarance","a","b","isForceResizableEvent","isForceResizableCalcMode","resetRequiredMethods","logIgnored","checkDownSizing","lockTrigger","recordTrigger","resetPage","isDoubleFiredEvent","triggerLocked","doubleEventList","sizeIFrameThrottled","triggerLockedTimer","triggerReset","hcm","sendToParent","message","postMessage","isMessageForUs","initFromParent","fireInit","source","firstRun","initLock","resetFromParent","resizeFromParent","anchor","getData","getMessageType","isMiddleTier","messageFromParent","msgBody","parse","pageInfoFromParent","isInitMsg","true","false","callFromParent","processMessage","chkLateLoaded","readyState","parent","click","max","min","offsetHeight","scrollWidth","Date","getTime","offset","scrollHeight","custom","grow","lowestElement","taggedElement","offsetWidth","scroll","rightMostElement","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","obj","setupRequestAnimationFrame","vendors","requestAnimationFrame","getMyID","iframeId","retStr","self","formatLogHeader","msgId","isLogEnabled","settings","logEnabled","output","info","enabled","iFrameListener","setSize","messageData","setPagePosition","ensureInRange","syncResize","processMsg","Dimension","dimension","toLowerCase","isMessageFromIFrame","checkAllowedOrigin","checkList","retCode","origin","checkSingle","remoteHost","Error","isMessageFromMetaParent","getMsgBody","msgHeaderLen","forwardMsgFromIFrame","bodyPosition","iFramePosition","iframeHeight","iframeWidth","clientHeight","innerHeight","clientWidth","innerWidth","offsetTop","offsetLeft","sendPageInfoToIframe","debouncedTrigger","trigger","debouce","startPageInfoMonitor","setListener","sendPageInfo","stop","start","stopPageInfo","stopPageInfoMonitor","checkIFrameExists","retBool","floor","scrollRequestFromChild","addOffset","reposition","newPosition","calcOffset","scrollParent","unsetPagePosition","jumpToParent","funcName","val","chkCallback","actionMsg","closeIFrame","hasSettings","iFrameReadyMsgReceived","createOutgoingMsg","logId","TypeError","parentNode","removeChild","setDimension","chkZero","hiddenCheckEnabled","fixHiddenIFrames","processDimension","sizeHeight","sizeWidth","doNotSync","calleeMsg","postMessageToIFrame","contentWindow","iFrameNotFound","chkAndSend","bodyMarginV1","enablePublicMethods","setupIFrame","setLimits","addStyle","Infinity","chkMinMax","newId","defaults","count","ensureHasId","setScrolling","overflow","setupBodyMarginValues","checkReset","resetRequertMethod","setupIFrameObject","Function","bind","iFrameLoaded","checkOptions","copyOptions","option","hasOwnProperty","getTargetOrigin","processOptions","join","beenHere","fn","time","checkIFrames","checkIFrame","settingId","chkDimension","isVisible","offsetParent","resizeIFrames","sendTriggerMsg","tabVisible","visibilityState","isIFrameResizeEnabled","setupEventListeners","chkType","tagName","iFrames","createJQueryPublicMethod","$","iFrameResize","index","filter","each","end","msgHeader","maxHeight","maxWidth","minHeight","minWidth","closedCallback","initCallback","resizedCallback","scrollCallback","jQuery","iframeResizerContentWindow"],"mappings":"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","file":"qando.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"qando\"] = factory();\n\telse\n\t\troot[\"qando\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"qando\"] = factory();\n\telse\n\t\troot[\"qando\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _require = __webpack_require__(1);\n\t\n\tvar iframeResizer = _require.iframeResizer;\n\t\n\tvar QANDO_FRONT_URL =  true ? 'http://booking.qando.it' : 'http://localhost:3000';\n\t\n\t/**\n\t * Make an DOM element integrate with Qando booking!\n\t *\n\t * el: DOM element where render iframe\n\t * options: {\n\t *  shop: Qando shop id\n\t *  servi: Qando service id\n\t * }\n\t */\n\tfunction booking(selector) {\n\t  var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t  var el = document.querySelector(selector);\n\t  var shop = options.shop;\n\t  var service = options.service;\n\t\n\t  var url = makeIframeUrl(shop, service, options);\n\t\n\t  var iframe = document.createElement('iframe');\n\t  iframe.src = url;\n\t  iframe.style.border = '0px';\n\t  iframe.style.width = '100%';\n\t  iframe.frameborder = '0';\n\t  iframe.scrolling = 'no';\n\t\n\t  // Set iframe content\n\t  el.appendChild(iframe);\n\t  iframeResizer({\n\t    checkOrigin: false,\n\t    log: (\"production\") !== 'production'\n\t  });\n\t};\n\t\n\tfunction makeIframeUrl(shop, service, options) {\n\t  var url = QANDO_FRONT_URL + '/' + shop;\n\t  if (service) {\n\t    url += '/booking/' + service;\n\t  }\n\t  url += '?iframe=' + shop + '&iframeWithHeader=' + ~~options.header + '&iframeWithFooter=' + ~~options.footer + '&iframeCustomCss=' + ~~options.css;\n\t  return url;\n\t}\n\t\n\t// exports qando\n\tvar qando = {\n\t  booking: booking\n\t};\n\t\n\tmodule.exports = qando;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\n\t'use strict';\n\t\n\tmodule.exports = __webpack_require__(4);\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t/*\n\t * File: iframeResizer.contentWindow.js\n\t * Desc: Include this file in any page being loaded into an iframe\n\t *       to force the iframe to resize to the content size.\n\t * Requires: iframeResizer.js on host page.\n\t * Doc: https://github.com/davidjbradshaw/iframe-resizer\n\t * Author: David J. Bradshaw - dave@bradshaw.net\n\t * Contributor: Jure Mav - jure.mav@gmail.com\n\t * Contributor: Ian Caunce - ian@hallnet.co.uk\n\t */\n\t\n\t\n\t;(function(window, undefined) {\n\t\t'use strict';\n\t\n\t\tvar\n\t\t\tautoResize            = true,\n\t\t\tbase                  = 10,\n\t\t\tbodyBackground        = '',\n\t\t\tbodyMargin            = 0,\n\t\t\tbodyMarginStr         = '',\n\t\t\tbodyObserver          = null,\n\t\t\tbodyPadding           = '',\n\t\t\tcalculateWidth        = false,\n\t\t\tdoubleEventList       = {'resize':1,'click':1},\n\t\t\teventCancelTimer      = 128,\n\t\t\tfirstRun              = true,\n\t\t\theight                = 1,\n\t\t\theightCalcModeDefault = 'bodyOffset',\n\t\t\theightCalcMode        = heightCalcModeDefault,\n\t\t\tinitLock              = true,\n\t\t\tinitMsg               = '',\n\t\t\tinPageLinks           = {},\n\t\t\tinterval              = 32,\n\t\t\tintervalTimer         = null,\n\t\t\tlogging               = false,\n\t\t\tmsgID                 = '[iFrameSizer]',  //Must match host page msg ID\n\t\t\tmsgIdLen              = msgID.length,\n\t\t\tmyID                  = '',\n\t\t\tobserver              = null,\n\t\t\tresetRequiredMethods  = {max:1,min:1,bodyScroll:1,documentElementScroll:1},\n\t\t\tresizeFrom            = 'child',\n\t\t\tsendPermit            = true,\n\t\t\ttarget                = window.parent,\n\t\t\ttargetOriginDefault   = '*',\n\t\t\ttolerance             = 0,\n\t\t\ttriggerLocked         = false,\n\t\t\ttriggerLockedTimer    = null,\n\t\t\tthrottledTimer        = 16,\n\t\t\twidth                 = 1,\n\t\t\twidthCalcModeDefault  = 'scroll',\n\t\t\twidthCalcMode         = widthCalcModeDefault,\n\t\t\twin                   = window,\n\t\t\tmessageCallback       = function(){ warn('MessageCallback function not defined'); },\n\t\t\treadyCallback         = function(){},\n\t\t\tpageInfoCallback      = function(){},\n\t\t\tcustomCalcMethods     = {\n\t\t\t\theight: function(){\n\t\t\t\t\twarn('Custom height calculation function not defined');\n\t\t\t\t\treturn document.documentElement.offsetHeight;\n\t\t\t\t}, \n\t\t\t\twidth: function(){\n\t\t\t\t\twarn('Custom width calculation function not defined');\n\t\t\t\t\treturn document.body.scrollWidth;\n\t\t\t\t}\n\t\t\t};\n\t\n\t\n\t\tfunction addEventListener(el,evt,func){\n\t\t\t/* istanbul ignore else */ // Not testable in phantonJS\n\t\t\tif ('addEventListener' in window){\n\t\t\t\tel.addEventListener(evt,func, false);\n\t\t\t} else if ('attachEvent' in window){ //IE\n\t\t\t\tel.attachEvent('on'+evt,func);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction removeEventListener(el,evt,func){\n\t\t\t/* istanbul ignore else */ // Not testable in phantonJS\n\t\t\tif ('removeEventListener' in window){\n\t\t\t\tel.removeEventListener(evt,func, false);\n\t\t\t} else if ('detachEvent' in window){ //IE\n\t\t\t\tel.detachEvent('on'+evt,func);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction capitalizeFirstLetter(string) {\n\t\t\treturn string.charAt(0).toUpperCase() + string.slice(1);\n\t\t}\n\t\n\t\t//Based on underscore.js\n\t\tfunction throttle(func) {\n\t\t\tvar\n\t\t\t\tcontext, args, result,\n\t\t\t\ttimeout = null,\n\t\t\t\tprevious = 0,\n\t\t\t\tlater = function() {\n\t\t\t\t\tprevious = getNow();\n\t\t\t\t\ttimeout = null;\n\t\t\t\t\tresult = func.apply(context, args);\n\t\t\t\t\tif (!timeout) {\n\t\t\t\t\t\tcontext = args = null;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\n\t\t\treturn function() {\n\t\t\t\tvar now = getNow();\n\t\n\t\t\t\tif (!previous) {\n\t\t\t\t\tprevious = now;\n\t\t\t\t}\n\t\n\t\t\t\tvar remaining = throttledTimer - (now - previous);\n\t\n\t\t\t\tcontext = this;\n\t\t\t\targs = arguments;\n\t\n\t\t\t\tif (remaining <= 0 || remaining > throttledTimer) {\n\t\t\t\t\tif (timeout) {\n\t\t\t\t\t\tclearTimeout(timeout);\n\t\t\t\t\t\ttimeout = null;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tprevious = now;\n\t\t\t\t\tresult = func.apply(context, args);\n\t\n\t\t\t\t\tif (!timeout) {\n\t\t\t\t\t\tcontext = args = null;\n\t\t\t\t\t}\n\t\n\t\t\t\t} else if (!timeout) {\n\t\t\t\t\ttimeout = setTimeout(later, remaining);\n\t\t\t\t}\n\t\n\t\t\t\treturn result;\n\t\t\t};\n\t\t}\n\t\n\t\tvar getNow = Date.now || function() {\n\t\t\t/* istanbul ignore next */ // Not testable in PhantonJS\n\t\t\treturn new Date().getTime();\n\t\t};\n\t\n\t\tfunction formatLogMsg(msg){\n\t\t\treturn msgID + '[' + myID + ']' + ' ' + msg;\n\t\t}\n\t\n\t\tfunction log(msg){\n\t\t\tif (logging && ('object' === typeof window.console)){\n\t\t\t\tconsole.log(formatLogMsg(msg));\n\t\t\t}\n\t\t}\n\t\n\t\tfunction warn(msg){\n\t\t\tif ('object' === typeof window.console){\n\t\t\t\tconsole.warn(formatLogMsg(msg));\n\t\t\t}\n\t\t}\n\t\n\t\n\t\tfunction init(){\n\t\t\treadDataFromParent();\n\t\t\tlog('Initialising iFrame ('+location.href+')');\n\t\t\treadDataFromPage();\n\t\t\tsetMargin();\n\t\t\tsetBodyStyle('background',bodyBackground);\n\t\t\tsetBodyStyle('padding',bodyPadding);\n\t\t\tinjectClearFixIntoBodyElement();\n\t\t\tcheckHeightMode();\n\t\t\tcheckWidthMode();\n\t\t\tstopInfiniteResizingOfIFrame();\n\t\t\tsetupPublicMethods();\n\t\t\tstartEventListeners();\n\t\t\tinPageLinks = setupInPageLinks();\n\t\t\tsendSize('init','Init message from host page');\n\t\t\treadyCallback();\n\t\t}\n\t\n\t\tfunction readDataFromParent(){\n\t\n\t\t\tfunction strBool(str){\n\t\t\t\treturn 'true' === str ? true : false;\n\t\t\t}\n\t\n\t\t\tvar data = initMsg.substr(msgIdLen).split(':');\n\t\n\t\t\tmyID               = data[0];\n\t\t\tbodyMargin         = (undefined !== data[1]) ? Number(data[1])   : bodyMargin; //For V1 compatibility\n\t\t\tcalculateWidth     = (undefined !== data[2]) ? strBool(data[2])  : calculateWidth;\n\t\t\tlogging            = (undefined !== data[3]) ? strBool(data[3])  : logging;\n\t\t\tinterval           = (undefined !== data[4]) ? Number(data[4])   : interval;\n\t\t\tautoResize         = (undefined !== data[6]) ? strBool(data[6])  : autoResize;\n\t\t\tbodyMarginStr      = data[7];\n\t\t\theightCalcMode     = (undefined !== data[8]) ? data[8]           : heightCalcMode;\n\t\t\tbodyBackground     = data[9];\n\t\t\tbodyPadding        = data[10];\n\t\t\ttolerance          = (undefined !== data[11]) ? Number(data[11]) : tolerance;\n\t\t\tinPageLinks.enable = (undefined !== data[12]) ? strBool(data[12]): false;\n\t\t\tresizeFrom         = (undefined !== data[13]) ? data[13]         : resizeFrom;\n\t\t\twidthCalcMode      = (undefined !== data[14]) ? data[14]         : widthCalcMode;\n\t\t}\n\t\n\t\tfunction readDataFromPage(){\n\t\t\tfunction readData(){\n\t\t\t\tvar data = window.iFrameResizer;\n\t\n\t\t\t\tlog('Reading data from page: ' + JSON.stringify(data));\n\t\n\t\t\t\tmessageCallback     = ('messageCallback'         in data) ? data.messageCallback         : messageCallback;\n\t\t\t\treadyCallback       = ('readyCallback'           in data) ? data.readyCallback           : readyCallback;\n\t\t\t\ttargetOriginDefault = ('targetOrigin'            in data) ? data.targetOrigin            : targetOriginDefault;\n\t\t\t\theightCalcMode      = ('heightCalculationMethod' in data) ? data.heightCalculationMethod : heightCalcMode;\n\t\t\t\twidthCalcMode       = ('widthCalculationMethod'  in data) ? data.widthCalculationMethod  : widthCalcMode;\n\t\t\t}\n\t\n\t\t\tfunction setupCustomCalcMethods(calcMode, calcFunc){\n\t\t\t\tif ('function' === typeof calcMode) {\n\t\t\t\t\tlog('Setup custom ' + calcFunc + 'CalcMethod');\n\t\t\t\t\tcustomCalcMethods[calcFunc] = calcMode;\n\t\t\t\t\tcalcMode = 'custom';\n\t\t\t\t}\n\t\n\t\t\t\treturn calcMode;\n\t\t\t}\n\t\n\t\t\tif(('iFrameResizer' in window) && (Object === window.iFrameResizer.constructor)) {\n\t\t\t\treadData();\n\t\t\t\theightCalcMode = setupCustomCalcMethods(heightCalcMode, 'height');\n\t\t\t\twidthCalcMode  = setupCustomCalcMethods(widthCalcMode,  'width');\n\t\t\t}\n\t\n\t\t\tlog('TargetOrigin for parent set to: ' + targetOriginDefault);\n\t\t}\n\t\n\t\n\t\tfunction chkCSS(attr,value){\n\t\t\tif (-1 !== value.indexOf('-')){\n\t\t\t\twarn('Negative CSS value ignored for '+attr);\n\t\t\t\tvalue='';\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t\n\t\tfunction setBodyStyle(attr,value){\n\t\t\tif ((undefined !== value) && ('' !== value) && ('null' !== value)){\n\t\t\t\tdocument.body.style[attr] = value;\n\t\t\t\tlog('Body '+attr+' set to \"'+value+'\"');\n\t\t\t}\n\t\t}\n\t\n\t\tfunction setMargin(){\n\t\t\t//If called via V1 script, convert bodyMargin from int to str\n\t\t\tif (undefined === bodyMarginStr){\n\t\t\t\tbodyMarginStr = bodyMargin+'px';\n\t\t\t}\n\t\n\t\t\tsetBodyStyle('margin',chkCSS('margin',bodyMarginStr));\n\t\t}\n\t\n\t\tfunction stopInfiniteResizingOfIFrame(){\n\t\t\tdocument.documentElement.style.height = '';\n\t\t\tdocument.body.style.height = '';\n\t\t\tlog('HTML & body height set to \"auto\"');\n\t\t}\n\t\n\t\n\t\tfunction manageTriggerEvent(options){\n\t\t\tfunction handleEvent(){\n\t\t\t\tsendSize(options.eventName,options.eventType);\n\t\t\t}\n\t\n\t\t\tvar listener = {\n\t\t\t\tadd:    function(eventName){\n\t\t\t\t\taddEventListener(window,eventName,handleEvent);\n\t\t\t\t},\n\t\t\t\tremove: function(eventName){\n\t\t\t\t\tremoveEventListener(window,eventName,handleEvent);\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tif(options.eventNames && Array.prototype.map){\n\t\t\t\toptions.eventName = options.eventNames[0];\n\t\t\t\toptions.eventNames.map(listener[options.method]);\n\t\t\t} else {\n\t\t\t\tlistener[options.method](options.eventName);\n\t\t\t}\n\t\n\t\t\tlog(capitalizeFirstLetter(options.method) + ' event listener: ' + options.eventType);\n\t\t}\n\t\n\t\tfunction manageEventListeners(method){\n\t\t\tmanageTriggerEvent({method:method, eventType: 'Animation Start',           eventNames: ['animationstart','webkitAnimationStart'] });\n\t\t\tmanageTriggerEvent({method:method, eventType: 'Animation Iteration',       eventNames: ['animationiteration','webkitAnimationIteration'] });\n\t\t\tmanageTriggerEvent({method:method, eventType: 'Animation End',             eventNames: ['animationend','webkitAnimationEnd'] });\n\t\t\tmanageTriggerEvent({method:method, eventType: 'Input',                     eventName:  'input' });\n\t\t\tmanageTriggerEvent({method:method, eventType: 'Mouse Up',                  eventName:  'mouseup' });\n\t\t\tmanageTriggerEvent({method:method, eventType: 'Mouse Down',                eventName:  'mousedown' });\n\t\t\tmanageTriggerEvent({method:method, eventType: 'Orientation Change',        eventName:  'orientationchange' });\n\t\t\tmanageTriggerEvent({method:method, eventType: 'Print',                     eventName:  ['afterprint', 'beforeprint'] });\n\t\t\tmanageTriggerEvent({method:method, eventType: 'Ready State Change',        eventName:  'readystatechange' });\n\t\t\tmanageTriggerEvent({method:method, eventType: 'Touch Start',               eventName:  'touchstart' });\n\t\t\tmanageTriggerEvent({method:method, eventType: 'Touch End',                 eventName:  'touchend' });\n\t\t\tmanageTriggerEvent({method:method, eventType: 'Touch Cancel',              eventName:  'touchcancel' });\n\t\t\tmanageTriggerEvent({method:method, eventType: 'Transition Start',          eventNames: ['transitionstart','webkitTransitionStart','MSTransitionStart','oTransitionStart','otransitionstart'] });\n\t\t\tmanageTriggerEvent({method:method, eventType: 'Transition Iteration',      eventNames: ['transitioniteration','webkitTransitionIteration','MSTransitionIteration','oTransitionIteration','otransitioniteration'] });\n\t\t\tmanageTriggerEvent({method:method, eventType: 'Transition End',            eventNames: ['transitionend','webkitTransitionEnd','MSTransitionEnd','oTransitionEnd','otransitionend'] });\n\t\t\tif('child' === resizeFrom){\n\t\t\t\tmanageTriggerEvent({method:method, eventType: 'IFrame Resized',        eventName:  'resize' });\n\t\t\t}\n\t\t}\n\t\n\t\tfunction checkCalcMode(calcMode,calcModeDefault,modes,type){\n\t\t\tif (calcModeDefault !== calcMode){\n\t\t\t\tif (!(calcMode in modes)){\n\t\t\t\t\twarn(calcMode + ' is not a valid option for '+type+'CalculationMethod.');\n\t\t\t\t\tcalcMode=calcModeDefault;\n\t\t\t\t}\n\t\t\t\tlog(type+' calculation method set to \"'+calcMode+'\"');\n\t\t\t}\n\t\n\t\t\treturn calcMode;\n\t\t}\n\t\n\t\tfunction checkHeightMode(){\n\t\t\theightCalcMode = checkCalcMode(heightCalcMode,heightCalcModeDefault,getHeight,'height');\n\t\t}\n\t\n\t\tfunction checkWidthMode(){\n\t\t\twidthCalcMode = checkCalcMode(widthCalcMode,widthCalcModeDefault,getWidth,'width');\n\t\t}\n\t\n\t\tfunction startEventListeners(){\n\t\t\tif ( true === autoResize ) {\n\t\t\t\tmanageEventListeners('add');\n\t\t\t\tsetupMutationObserver();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlog('Auto Resize disabled');\n\t\t\t}\n\t\t}\n\t\n\t\tfunction stopMsgsToParent(){\n\t\t\tlog('Disable outgoing messages');\n\t\t\tsendPermit = false;\n\t\t}\n\t\n\t\tfunction removeMsgListener(){\n\t\t\tlog('Remove event listener: Message');\n\t\t\tremoveEventListener(window, 'message', receiver);\n\t\t}\n\t\n\t\tfunction disconnectMutationObserver(){\n\t\t\tif (null !== bodyObserver){\n\t\t\t\t/* istanbul ignore next */ // Not testable in PhantonJS\n\t\t\t\tbodyObserver.disconnect();\n\t\t\t}\n\t\t}\n\t\n\t\tfunction stopEventListeners(){\n\t\t\tmanageEventListeners('remove');\n\t\t\tdisconnectMutationObserver();\n\t\t\tclearInterval(intervalTimer);\n\t\t}\n\t\n\t\tfunction teardown(){\n\t\t\tstopMsgsToParent();\n\t\t\tremoveMsgListener();\n\t\t\tif (true === autoResize) stopEventListeners();\n\t\t}\n\t\n\t\tfunction injectClearFixIntoBodyElement(){\n\t\t\tvar clearFix = document.createElement('div');\n\t\t\tclearFix.style.clear   = 'both';\n\t\t\tclearFix.style.display = 'block'; //Guard against this having been globally redefined in CSS.\n\t\t\tdocument.body.appendChild(clearFix);\n\t\t}\n\t\n\t\tfunction setupInPageLinks(){\n\t\n\t\t\tfunction getPagePosition (){\n\t\t\t\treturn {\n\t\t\t\t\tx: (window.pageXOffset !== undefined) ? window.pageXOffset : document.documentElement.scrollLeft,\n\t\t\t\t\ty: (window.pageYOffset !== undefined) ? window.pageYOffset : document.documentElement.scrollTop\n\t\t\t\t};\n\t\t\t}\n\t\n\t\t\tfunction getElementPosition(el){\n\t\t\t\tvar\n\t\t\t\t\telPosition   = el.getBoundingClientRect(),\n\t\t\t\t\tpagePosition = getPagePosition();\n\t\n\t\t\t\treturn {\n\t\t\t\t\tx: parseInt(elPosition.left,10) + parseInt(pagePosition.x,10),\n\t\t\t\t\ty: parseInt(elPosition.top,10)  + parseInt(pagePosition.y,10)\n\t\t\t\t};\n\t\t\t}\n\t\n\t\t\tfunction findTarget(location){\n\t\t\t\tfunction jumpToTarget(target){\n\t\t\t\t\tvar jumpPosition = getElementPosition(target);\n\t\n\t\t\t\t\tlog('Moving to in page link (#'+hash+') at x: '+jumpPosition.x+' y: '+jumpPosition.y);\n\t\t\t\t\tsendMsg(jumpPosition.y, jumpPosition.x, 'scrollToOffset'); // X&Y reversed at sendMsg uses height/width\n\t\t\t\t}\n\t\n\t\t\t\tvar\n\t\t\t\t\thash     = location.split('#')[1] || location, //Remove # if present\n\t\t\t\t\thashData = decodeURIComponent(hash),\n\t\t\t\t\ttarget   = document.getElementById(hashData) || document.getElementsByName(hashData)[0];\n\t\n\t\t\t\tif (undefined !== target){\n\t\t\t\t\tjumpToTarget(target);\n\t\t\t\t} else {\n\t\t\t\t\tlog('In page link (#' + hash + ') not found in iFrame, so sending to parent');\n\t\t\t\t\tsendMsg(0,0,'inPageLink','#'+hash);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction checkLocationHash(){\n\t\t\t\tif ('' !== location.hash && '#' !== location.hash){\n\t\t\t\t\tfindTarget(location.href);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction bindAnchors(){\n\t\t\t\tfunction setupLink(el){\n\t\t\t\t\tfunction linkClicked(e){\n\t\t\t\t\t\te.preventDefault();\n\t\n\t\t\t\t\t\t/*jshint validthis:true */\n\t\t\t\t\t\tfindTarget(this.getAttribute('href'));\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif ('#' !== el.getAttribute('href')){\n\t\t\t\t\t\taddEventListener(el,'click',linkClicked);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tArray.prototype.forEach.call( document.querySelectorAll( 'a[href^=\"#\"]' ), setupLink );\n\t\t\t}\n\t\n\t\t\tfunction bindLocationHash(){\n\t\t\t\taddEventListener(window,'hashchange',checkLocationHash);\n\t\t\t}\n\t\n\t\t\tfunction initCheck(){ //check if page loaded with location hash after init resize\n\t\t\t\tsetTimeout(checkLocationHash,eventCancelTimer);\n\t\t\t}\n\t\n\t\t\tfunction enableInPageLinks(){\n\t\t\t\t/* istanbul ignore else */ // Not testable in phantonJS\n\t\t\t\tif(Array.prototype.forEach && document.querySelectorAll){\n\t\t\t\t\tlog('Setting up location.hash handlers');\n\t\t\t\t\tbindAnchors();\n\t\t\t\t\tbindLocationHash();\n\t\t\t\t\tinitCheck();\n\t\t\t\t} else {\n\t\t\t\t\twarn('In page linking not fully supported in this browser! (See README.md for IE8 workaround)');\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif(inPageLinks.enable){\n\t\t\t\tenableInPageLinks();\n\t\t\t} else {\n\t\t\t\tlog('In page linking not enabled');\n\t\t\t}\n\t\n\t\t\treturn {\n\t\t\t\tfindTarget:findTarget\n\t\t\t};\n\t\t}\n\t\n\t\tfunction setupPublicMethods(){\n\t\t\tlog('Enable public methods');\n\t\n\t\t\twin.parentIFrame = {\n\t\n\t\t\t\tautoResize: function autoResizeF(resize){\n\t\t\t\t\tif (true === resize && false === autoResize) {\n\t\t\t\t\t\tautoResize=true;\n\t\t\t\t\t\tstartEventListeners();\n\t\t\t\t\t\t//sendSize('autoResize','Auto Resize enabled');\n\t\t\t\t\t} else if (false === resize && true === autoResize) {\n\t\t\t\t\t\tautoResize=false;\n\t\t\t\t\t\tstopEventListeners();\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn autoResize;\n\t\t\t\t},\n\t\n\t\t\t\tclose: function closeF(){\n\t\t\t\t\tsendMsg(0,0,'close');\n\t\t\t\t\tteardown();\n\t\t\t\t},\n\t\n\t\t\t\tgetId: function getIdF(){\n\t\t\t\t\treturn myID;\n\t\t\t\t},\n\t\n\t\t\t\tgetPageInfo: function getPageInfoF(callback){\n\t\t\t\t\tif ('function' === typeof callback){\n\t\t\t\t\t\tpageInfoCallback = callback;\n\t\t\t\t\t\tsendMsg(0,0,'pageInfo');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpageInfoCallback = function(){};\n\t\t\t\t\t\tsendMsg(0,0,'pageInfoStop');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\n\t\t\t\tmoveToAnchor: function moveToAnchorF(hash){\n\t\t\t\t\tinPageLinks.findTarget(hash);\n\t\t\t\t},\n\t\n\t\t\t\treset: function resetF(){\n\t\t\t\t\tresetIFrame('parentIFrame.reset');\n\t\t\t\t},\n\t\n\t\t\t\tscrollTo: function scrollToF(x,y){\n\t\t\t\t\tsendMsg(y,x,'scrollTo'); // X&Y reversed at sendMsg uses height/width\n\t\t\t\t},\n\t\n\t\t\t\tscrollToOffset: function scrollToF(x,y){\n\t\t\t\t\tsendMsg(y,x,'scrollToOffset'); // X&Y reversed at sendMsg uses height/width\n\t\t\t\t},\n\t\n\t\t\t\tsendMessage: function sendMessageF(msg,targetOrigin){\n\t\t\t\t\tsendMsg(0,0,'message',JSON.stringify(msg),targetOrigin);\n\t\t\t\t},\n\t\n\t\t\t\tsetHeightCalculationMethod: function setHeightCalculationMethodF(heightCalculationMethod){\n\t\t\t\t\theightCalcMode = heightCalculationMethod;\n\t\t\t\t\tcheckHeightMode();\n\t\t\t\t},\n\t\n\t\t\t\tsetWidthCalculationMethod: function setWidthCalculationMethodF(widthCalculationMethod){\n\t\t\t\t\twidthCalcMode = widthCalculationMethod;\n\t\t\t\t\tcheckWidthMode();\n\t\t\t\t},\n\t\n\t\t\t\tsetTargetOrigin: function setTargetOriginF(targetOrigin){\n\t\t\t\t\tlog('Set targetOrigin: '+targetOrigin);\n\t\t\t\t\ttargetOriginDefault = targetOrigin;\n\t\t\t\t},\n\t\n\t\t\t\tsize: function sizeF(customHeight, customWidth){\n\t\t\t\t\tvar valString = ''+(customHeight?customHeight:'')+(customWidth?','+customWidth:'');\n\t\t\t\t\t//lockTrigger();\n\t\t\t\t\tsendSize('size','parentIFrame.size('+valString+')', customHeight, customWidth);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\n\t\tfunction initInterval(){\n\t\t\tif ( 0 !== interval ){\n\t\t\t\tlog('setInterval: '+interval+'ms');\n\t\t\t\tintervalTimer = setInterval(function(){\n\t\t\t\t\tsendSize('interval','setInterval: '+interval);\n\t\t\t\t},Math.abs(interval));\n\t\t\t}\n\t\t}\n\t\n\t\t/* istanbul ignore next */  //Not testable in PhantomJS\n\t\tfunction setupBodyMutationObserver(){\n\t\t\tfunction addImageLoadListners(mutation) {\n\t\t\t\tfunction addImageLoadListener(element){\n\t\t\t\t\tif (false === element.complete) {\n\t\t\t\t\t\tlog('Attach listeners to ' + element.src);\n\t\t\t\t\t\telement.addEventListener('load', imageLoaded, false);\n\t\t\t\t\t\telement.addEventListener('error', imageError, false);\n\t\t\t\t\t\telements.push(element);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tif (mutation.type === 'attributes' && mutation.attributeName === 'src'){\n\t\t\t\t\taddImageLoadListener(mutation.target);\n\t\t\t\t} else if (mutation.type === 'childList'){\n\t\t\t\t\tArray.prototype.forEach.call(\n\t\t\t\t\t\tmutation.target.querySelectorAll('img'),\n\t\t\t\t\t\taddImageLoadListener\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction removeFromArray(element){\n\t\t\t\telements.splice(elements.indexOf(element),1);\n\t\t\t}\n\t\n\t\t\tfunction removeImageLoadListener(element){\n\t\t\t\tlog('Remove listeners from ' + element.src);\n\t\t\t\telement.removeEventListener('load', imageLoaded, false);\n\t\t\t\telement.removeEventListener('error', imageError, false);\n\t\t\t\tremoveFromArray(element);\n\t\t\t}\n\t\n\t\t\tfunction imageEventTriggered(event,type,typeDesc){\n\t\t\t\tremoveImageLoadListener(event.target);\n\t\t\t\tsendSize(type, typeDesc + ': ' + event.target.src, undefined, undefined);\n\t\t\t}\n\t\n\t\t\tfunction imageLoaded(event) {\n\t\t\t\timageEventTriggered(event,'imageLoad','Image loaded');\n\t\t\t}\n\t\n\t\t\tfunction imageError(event) {\n\t\t\t\timageEventTriggered(event,'imageLoadFailed','Image load failed');\n\t\t\t}\n\t\n\t\t\tfunction mutationObserved(mutations) {\n\t\t\t\tsendSize('mutationObserver','mutationObserver: ' + mutations[0].target + ' ' + mutations[0].type);\n\t\n\t\t\t\t//Deal with WebKit asyncing image loading when tags are injected into the page\n\t\t\t\tmutations.forEach(addImageLoadListners);\n\t\t\t}\n\t\n\t\t\tfunction createMutationObserver(){\n\t\t\t\tvar\n\t\t\t\t\ttarget = document.querySelector('body'),\n\t\n\t\t\t\t\tconfig = {\n\t\t\t\t\t\tattributes            : true,\n\t\t\t\t\t\tattributeOldValue     : false,\n\t\t\t\t\t\tcharacterData         : true,\n\t\t\t\t\t\tcharacterDataOldValue : false,\n\t\t\t\t\t\tchildList             : true,\n\t\t\t\t\t\tsubtree               : true\n\t\t\t\t\t};\n\t\n\t\t\t\tobserver = new MutationObserver(mutationObserved);\n\t\n\t\t\t\tlog('Create body MutationObserver');\n\t\t\t\tobserver.observe(target, config);\n\t\n\t\t\t\treturn observer;\n\t\t\t}\n\t\n\t\t\tvar\n\t\t\t\telements         = [],\n\t\t\t\tMutationObserver = window.MutationObserver || window.WebKitMutationObserver,\n\t\t\t\tobserver         = createMutationObserver();\n\t\n\t\t\treturn {\n\t\t\t\tdisconnect: function (){\n\t\t\t\t\tif ('disconnect' in observer){\n\t\t\t\t\t\tlog('Disconnect body MutationObserver');\n\t\t\t\t\t\tobserver.disconnect();\n\t\t\t\t\t\telements.forEach(removeImageLoadListener);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\n\t\tfunction setupMutationObserver(){\n\t\t\tvar\tforceIntervalTimer = 0 > interval;\n\t\n\t\t\t/* istanbul ignore if */ // Not testable in PhantomJS\n\t\t\tif (window.MutationObserver || window.WebKitMutationObserver){\n\t\t\t\tif (forceIntervalTimer) {\n\t\t\t\t\tinitInterval();\n\t\t\t\t} else {\n\t\t\t\t\tbodyObserver = setupBodyMutationObserver();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlog('MutationObserver not supported in this browser!');\n\t\t\t\tinitInterval();\n\t\t\t}\n\t\t}\n\t\n\t\n\t\t// document.documentElement.offsetHeight is not reliable, so\n\t\t// we have to jump through hoops to get a better value.\n\t\tfunction getComputedStyle(prop,el) {\n\t\t\t/* istanbul ignore next */  //Not testable in PhantomJS\n\t\t\tfunction convertUnitsToPxForIE8(value) {\n\t\t\t\tvar PIXEL = /^\\d+(px)?$/i;\n\t\n\t\t\t\tif (PIXEL.test(value)) {\n\t\t\t\t\treturn parseInt(value,base);\n\t\t\t\t}\n\t\n\t\t\t\tvar\n\t\t\t\t\tstyle = el.style.left,\n\t\t\t\t\truntimeStyle = el.runtimeStyle.left;\n\t\n\t\t\t\tel.runtimeStyle.left = el.currentStyle.left;\n\t\t\t\tel.style.left = value || 0;\n\t\t\t\tvalue = el.style.pixelLeft;\n\t\t\t\tel.style.left = style;\n\t\t\t\tel.runtimeStyle.left = runtimeStyle;\n\t\n\t\t\t\treturn value;\n\t\t\t}\n\t\n\t\t\tvar retVal = 0;\n\t\t\tel =  el || document.body;\n\t\n\t\t\t/* istanbul ignore else */ // Not testable in phantonJS\n\t\t\tif (('defaultView' in document) && ('getComputedStyle' in document.defaultView)) {\n\t\t\t\tretVal = document.defaultView.getComputedStyle(el, null);\n\t\t\t\tretVal = (null !== retVal) ? retVal[prop] : 0;\n\t\t\t} else {//IE8\n\t\t\t\tretVal =  convertUnitsToPxForIE8(el.currentStyle[prop]);\n\t\t\t}\n\t\n\t\t\treturn parseInt(retVal,base);\n\t\t}\n\t\n\t\tfunction chkEventThottle(timer){\n\t\t\tif(timer > throttledTimer/2){\n\t\t\t\tthrottledTimer = 2*timer;\n\t\t\t\tlog('Event throttle increased to ' + throttledTimer + 'ms');\n\t\t\t}\n\t\t}\n\t\n\t\t//Idea from https://github.com/guardian/iframe-messenger\n\t\tfunction getMaxElement(side,elements) {\n\t\t\tvar\n\t\t\t\telementsLength = elements.length,\n\t\t\t\telVal          = 0,\n\t\t\t\tmaxVal         = 0,\n\t\t\t\tSide           = capitalizeFirstLetter(side),\n\t\t\t\ttimer          = getNow();\n\t\n\t\t\tfor (var i = 0; i < elementsLength; i++) {\n\t\t\t\telVal = elements[i].getBoundingClientRect()[side] + getComputedStyle('margin'+Side,elements[i]);\n\t\t\t\tif (elVal > maxVal) {\n\t\t\t\t\tmaxVal = elVal;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\ttimer = getNow() - timer;\n\t\n\t\t\tlog('Parsed '+elementsLength+' HTML elements');\n\t\t\tlog('Element position calculated in ' + timer + 'ms');\n\t\n\t\t\tchkEventThottle(timer);\n\t\n\t\t\treturn maxVal;\n\t\t}\n\t\n\t\tfunction getAllMeasurements(dimention){\n\t\t\treturn [\n\t\t\t\tdimention.bodyOffset(),\n\t\t\t\tdimention.bodyScroll(),\n\t\t\t\tdimention.documentElementOffset(),\n\t\t\t\tdimention.documentElementScroll()\n\t\t\t];\n\t\t}\n\t\n\t\tfunction getTaggedElements(side,tag){\n\t\t\tfunction noTaggedElementsFound(){\n\t\t\t\twarn('No tagged elements ('+tag+') found on page');\n\t\t\t\treturn height; //current height\n\t\t\t}\n\t\n\t\t\tvar elements = document.querySelectorAll('['+tag+']');\n\t\n\t\t\treturn 0 === elements.length ?  noTaggedElementsFound() : getMaxElement(side,elements);\n\t\t}\n\t\n\t\tfunction getAllElements(){\n\t\t\treturn document.querySelectorAll('body *');\n\t\t}\n\t\n\t\tvar\n\t\t\tgetHeight = {\n\t\t\t\tbodyOffset: function getBodyOffsetHeight(){\n\t\t\t\t\treturn  document.body.offsetHeight + getComputedStyle('marginTop') + getComputedStyle('marginBottom');\n\t\t\t\t},\n\t\n\t\t\t\toffset: function(){\n\t\t\t\t\treturn getHeight.bodyOffset(); //Backwards compatability\n\t\t\t\t},\n\t\n\t\t\t\tbodyScroll: function getBodyScrollHeight(){\n\t\t\t\t\treturn document.body.scrollHeight;\n\t\t\t\t},\n\t\n\t\t\t\tcustom: function getCustomWidth(){\n\t\t\t\t\treturn customCalcMethods.height();\n\t\t\t\t},\n\t\n\t\t\t\tdocumentElementOffset: function getDEOffsetHeight(){\n\t\t\t\t\treturn document.documentElement.offsetHeight;\n\t\t\t\t},\n\t\n\t\t\t\tdocumentElementScroll: function getDEScrollHeight(){\n\t\t\t\t\treturn document.documentElement.scrollHeight;\n\t\t\t\t},\n\t\n\t\t\t\tmax: function getMaxHeight(){\n\t\t\t\t\treturn Math.max.apply(null,getAllMeasurements(getHeight));\n\t\t\t\t},\n\t\n\t\t\t\tmin: function getMinHeight(){\n\t\t\t\t\treturn Math.min.apply(null,getAllMeasurements(getHeight));\n\t\t\t\t},\n\t\n\t\t\t\tgrow: function growHeight(){\n\t\t\t\t\treturn getHeight.max(); //Run max without the forced downsizing\n\t\t\t\t},\n\t\n\t\t\t\tlowestElement: function getBestHeight(){\n\t\t\t\t\treturn Math.max(getHeight.bodyOffset(), getMaxElement('bottom',getAllElements()));\n\t\t\t\t},\n\t\n\t\t\t\ttaggedElement: function getTaggedElementsHeight(){\n\t\t\t\t\treturn getTaggedElements('bottom','data-iframe-height');\n\t\t\t\t}\n\t\t\t},\n\t\n\t\t\tgetWidth = {\n\t\t\t\tbodyScroll: function getBodyScrollWidth(){\n\t\t\t\t\treturn document.body.scrollWidth;\n\t\t\t\t},\n\t\n\t\t\t\tbodyOffset: function getBodyOffsetWidth(){\n\t\t\t\t\treturn document.body.offsetWidth;\n\t\t\t\t},\n\t\n\t\t\t\tcustom: function getCustomWidth(){\n\t\t\t\t\treturn customCalcMethods.width();\n\t\t\t\t},\n\t\n\t\t\t\tdocumentElementScroll: function getDEScrollWidth(){\n\t\t\t\t\treturn document.documentElement.scrollWidth;\n\t\t\t\t},\n\t\n\t\t\t\tdocumentElementOffset: function getDEOffsetWidth(){\n\t\t\t\t\treturn document.documentElement.offsetWidth;\n\t\t\t\t},\n\t\n\t\t\t\tscroll: function getMaxWidth(){\n\t\t\t\t\treturn Math.max(getWidth.bodyScroll(), getWidth.documentElementScroll());\n\t\t\t\t},\n\t\n\t\t\t\tmax: function getMaxWidth(){\n\t\t\t\t\treturn Math.max.apply(null,getAllMeasurements(getWidth));\n\t\t\t\t},\n\t\n\t\t\t\tmin: function getMinWidth(){\n\t\t\t\t\treturn Math.min.apply(null,getAllMeasurements(getWidth));\n\t\t\t\t},\n\t\n\t\t\t\trightMostElement: function rightMostElement(){\n\t\t\t\t\treturn getMaxElement('right', getAllElements());\n\t\t\t\t},\n\t\n\t\t\t\ttaggedElement: function getTaggedElementsWidth(){\n\t\t\t\t\treturn getTaggedElements('right', 'data-iframe-width');\n\t\t\t\t}\n\t\t\t};\n\t\n\t\n\t\tfunction sizeIFrame(triggerEvent, triggerEventDesc, customHeight, customWidth){\n\t\n\t\t\tfunction resizeIFrame(){\n\t\t\t\theight = currentHeight;\n\t\t\t\twidth  = currentWidth;\n\t\n\t\t\t\tsendMsg(height,width,triggerEvent);\n\t\t\t}\n\t\n\t\t\tfunction isSizeChangeDetected(){\n\t\t\t\tfunction checkTolarance(a,b){\n\t\t\t\t\tvar retVal = Math.abs(a-b) <= tolerance;\n\t\t\t\t\treturn !retVal;\n\t\t\t\t}\n\t\n\t\t\t\tcurrentHeight = (undefined !== customHeight)  ? customHeight : getHeight[heightCalcMode]();\n\t\t\t\tcurrentWidth  = (undefined !== customWidth )  ? customWidth  : getWidth[widthCalcMode]();\n\t\n\t\t\t\treturn\tcheckTolarance(height,currentHeight) || (calculateWidth && checkTolarance(width,currentWidth));\n\t\t\t}\n\t\n\t\t\tfunction isForceResizableEvent(){\n\t\t\t\treturn !(triggerEvent in {'init':1,'interval':1,'size':1});\n\t\t\t}\n\t\n\t\t\tfunction isForceResizableCalcMode(){\n\t\t\t\treturn (heightCalcMode in resetRequiredMethods) || (calculateWidth && widthCalcMode in resetRequiredMethods);\n\t\t\t}\n\t\n\t\t\tfunction logIgnored(){\n\t\t\t\tlog('No change in size detected');\n\t\t\t}\n\t\n\t\t\tfunction checkDownSizing(){\n\t\t\t\tif (isForceResizableEvent() && isForceResizableCalcMode()){\n\t\t\t\t\tresetIFrame(triggerEventDesc);\n\t\t\t\t} else if (!(triggerEvent in {'interval':1})){\n\t\t\t\t\tlogIgnored();\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tvar\tcurrentHeight,currentWidth;\n\t\n\t\t\tif (isSizeChangeDetected() || 'init' === triggerEvent){\n\t\t\t\tlockTrigger();\n\t\t\t\tresizeIFrame();\n\t\t\t} else {\n\t\t\t\tcheckDownSizing();\n\t\t\t}\n\t\t}\n\t\n\t\tvar sizeIFrameThrottled = throttle(sizeIFrame);\n\t\n\t\tfunction sendSize(triggerEvent, triggerEventDesc, customHeight, customWidth){\n\t\t\tfunction recordTrigger(){\n\t\t\t\tif (!(triggerEvent in {'reset':1,'resetPage':1,'init':1})){\n\t\t\t\t\tlog( 'Trigger event: ' + triggerEventDesc );\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction isDoubleFiredEvent(){\n\t\t\t\treturn  triggerLocked && (triggerEvent in doubleEventList);\n\t\t\t}\n\t\n\t\t\tif (!isDoubleFiredEvent()){\n\t\t\t\trecordTrigger();\n\t\t\t\tsizeIFrameThrottled(triggerEvent, triggerEventDesc, customHeight, customWidth);\n\t\t\t} else {\n\t\t\t\tlog('Trigger event cancelled: '+triggerEvent);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction lockTrigger(){\n\t\t\tif (!triggerLocked){\n\t\t\t\ttriggerLocked = true;\n\t\t\t\tlog('Trigger event lock on');\n\t\t\t}\n\t\t\tclearTimeout(triggerLockedTimer);\n\t\t\ttriggerLockedTimer = setTimeout(function(){\n\t\t\t\ttriggerLocked = false;\n\t\t\t\tlog('Trigger event lock off');\n\t\t\t\tlog('--');\n\t\t\t},eventCancelTimer);\n\t\t}\n\t\n\t\tfunction triggerReset(triggerEvent){\n\t\t\theight = getHeight[heightCalcMode]();\n\t\t\twidth  = getWidth[widthCalcMode]();\n\t\n\t\t\tsendMsg(height,width,triggerEvent);\n\t\t}\n\t\n\t\tfunction resetIFrame(triggerEventDesc){\n\t\t\tvar hcm = heightCalcMode;\n\t\t\theightCalcMode = heightCalcModeDefault;\n\t\n\t\t\tlog('Reset trigger event: ' + triggerEventDesc);\n\t\t\tlockTrigger();\n\t\t\ttriggerReset('reset');\n\t\n\t\t\theightCalcMode = hcm;\n\t\t}\n\t\n\t\tfunction sendMsg(height,width,triggerEvent,msg,targetOrigin){\n\t\t\tfunction setTargetOrigin(){\n\t\t\t\tif (undefined === targetOrigin){\n\t\t\t\t\ttargetOrigin = targetOriginDefault;\n\t\t\t\t} else {\n\t\t\t\t\tlog('Message targetOrigin: '+targetOrigin);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction sendToParent(){\n\t\t\t\tvar\n\t\t\t\t\tsize  = height + ':' + width,\n\t\t\t\t\tmessage = myID + ':' +  size + ':' + triggerEvent + (undefined !== msg ? ':' + msg : '');\n\t\n\t\t\t\tlog('Sending message to host page (' + message + ')');\n\t\t\t\ttarget.postMessage( msgID + message, targetOrigin);\n\t\t\t}\n\t\n\t\t\tif(true === sendPermit){\n\t\t\t\tsetTargetOrigin();\n\t\t\t\tsendToParent();\n\t\t\t}\n\t\t}\n\t\n\t\tfunction receiver(event) {\n\t\t\tfunction isMessageForUs(){\n\t\t\t\treturn msgID === (''+event.data).substr(0,msgIdLen); //''+ Protects against non-string messages\n\t\t\t}\n\t\n\t\t\tfunction initFromParent(){\n\t\t\t\tfunction fireInit(){\n\t\t\t\t\tinitMsg = event.data;\n\t\t\t\t\ttarget  = event.source;\n\t\n\t\t\t\t\tinit();\n\t\t\t\t\tfirstRun = false;\n\t\t\t\t\tsetTimeout(function(){ initLock = false;},eventCancelTimer);\n\t\t\t\t}\n\t\n\t\t\t\tif (document.body){\n\t\t\t\t\tfireInit();\n\t\t\t\t} else {\n\t\t\t\t\tlog('Waiting for page ready');\n\t\t\t\t\taddEventListener(window,'readystatechange',initFromParent);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction resetFromParent(){\n\t\t\t\tif (!initLock){\n\t\t\t\t\tlog('Page size reset by host page');\n\t\t\t\t\ttriggerReset('resetPage');\n\t\t\t\t} else {\n\t\t\t\t\tlog('Page reset ignored by init');\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction resizeFromParent(){\n\t\t\t\tsendSize('resizeParent','Parent window requested size check');\n\t\t\t}\n\t\n\t\t\tfunction moveToAnchor(){\n\t\t\t\tvar anchor = getData();\n\t\t\t\tinPageLinks.findTarget(anchor);\n\t\t\t}\n\t\n\t\t\tfunction getMessageType(){\n\t\t\t\treturn event.data.split(']')[1].split(':')[0];\n\t\t\t}\n\t\n\t\t\tfunction getData(){\n\t\t\t\treturn event.data.substr(event.data.indexOf(':')+1);\n\t\t\t}\n\t\n\t\t\tfunction isMiddleTier(){\n\t\t\t\treturn ('iFrameResize' in window);\n\t\t\t}\n\t\n\t\t\tfunction messageFromParent(){\n\t\t\t\tvar msgBody = getData();\n\t\n\t\t\t\tlog('MessageCallback called from parent: ' + msgBody );\n\t\t\t\tmessageCallback(JSON.parse(msgBody));\n\t\t\t\tlog(' --');\n\t\t\t}\n\t\n\t\t\tfunction pageInfoFromParent(){\n\t\t\t\tvar msgBody = getData();\n\t\t\t\tlog('PageInfoFromParent called from parent: ' + msgBody );\n\t\t\t\tpageInfoCallback(JSON.parse(msgBody));\n\t\t\t\tlog(' --');\n\t\t\t}\n\t\n\t\t\tfunction isInitMsg(){\n\t\t\t\t//Test if this message is from a child below us. This is an ugly test, however, updating\n\t\t\t\t//the message format would break backwards compatibity.\n\t\t\t\treturn event.data.split(':')[2] in {'true':1,'false':1};\n\t\t\t}\n\t\n\t\t\tfunction callFromParent(){\n\t\t\t\tswitch (getMessageType()){\n\t\t\t\tcase 'reset':\n\t\t\t\t\tresetFromParent();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'resize':\n\t\t\t\t\tresizeFromParent();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'inPageLink':\n\t\t\t\tcase 'moveToAnchor':\n\t\t\t\t\tmoveToAnchor();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'message':\n\t\t\t\t\tmessageFromParent();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'pageInfo':\n\t\t\t\t\tpageInfoFromParent();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tif (!isMiddleTier() && !isInitMsg()){\n\t\t\t\t\t\twarn('Unexpected message ('+event.data+')');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction processMessage(){\n\t\t\t\tif (false === firstRun) {\n\t\t\t\t\tcallFromParent();\n\t\t\t\t} else if (isInitMsg()) {\n\t\t\t\t\tinitFromParent();\n\t\t\t\t} else {\n\t\t\t\t\tlog('Ignored message of type \"' + getMessageType() + '\". Received before initialization.');\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif (isMessageForUs()){\n\t\t\t\tprocessMessage();\n\t\t\t}\n\t\t}\n\t\n\t\t//Normally the parent kicks things off when it detects the iFrame has loaded.\n\t\t//If this script is async-loaded, then tell parent page to retry init.\n\t\tfunction chkLateLoaded(){\n\t\t\tif('loading' !== document.readyState){\n\t\t\t\twindow.parent.postMessage('[iFrameResizerChild]Ready','*');\n\t\t\t}\n\t\t}\n\t\n\t\taddEventListener(window, 'message', receiver);\n\t\tchkLateLoaded();\n\t\n\t\t\n\t\n\t})(window || {});\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*\n\t * File: iframeResizer.js\n\t * Desc: Force iframes to size to content.\n\t * Requires: iframeResizer.contentWindow.js to be loaded into the target frame.\n\t * Doc: https://github.com/davidjbradshaw/iframe-resizer\n\t * Author: David J. Bradshaw - dave@bradshaw.net\n\t * Contributor: Jure Mav - jure.mav@gmail.com\n\t * Contributor: Reed Dadoune - reed@dadoune.com\n\t */\n\t\n\t\n\t;(function(window) {\n\t\t'use strict';\n\t\n\t\tvar\n\t\t\tcount                 = 0,\n\t\t\tlogEnabled            = false,\n\t\t\thiddenCheckEnabled    = false,\n\t\t\tmsgHeader             = 'message',\n\t\t\tmsgHeaderLen          = msgHeader.length,\n\t\t\tmsgId                 = '[iFrameSizer]', //Must match iframe msg ID\n\t\t\tmsgIdLen              = msgId.length,\n\t\t\tpagePosition          = null,\n\t\t\trequestAnimationFrame = window.requestAnimationFrame,\n\t\t\tresetRequiredMethods  = {max:1,scroll:1,bodyScroll:1,documentElementScroll:1},\n\t\t\tsettings              = {},\n\t\t\ttimer                 = null,\n\t\t\tlogId                 = 'Host Page',\n\t\n\t\t\tdefaults              = {\n\t\t\t\tautoResize                : true,\n\t\t\t\tbodyBackground            : null,\n\t\t\t\tbodyMargin                : null,\n\t\t\t\tbodyMarginV1              : 8,\n\t\t\t\tbodyPadding               : null,\n\t\t\t\tcheckOrigin               : true,\n\t\t\t\tinPageLinks               : false,\n\t\t\t\tenablePublicMethods       : true,\n\t\t\t\theightCalculationMethod   : 'bodyOffset',\n\t\t\t\tid                        : 'iFrameResizer',\n\t\t\t\tinterval                  : 32,\n\t\t\t\tlog                       : false,\n\t\t\t\tmaxHeight                 : Infinity,\n\t\t\t\tmaxWidth                  : Infinity,\n\t\t\t\tminHeight                 : 0,\n\t\t\t\tminWidth                  : 0,\n\t\t\t\tresizeFrom                : 'parent',\n\t\t\t\tscrolling                 : false,\n\t\t\t\tsizeHeight                : true,\n\t\t\t\tsizeWidth                 : false,\n\t\t\t\ttolerance                 : 0,\n\t\t\t\twidthCalculationMethod    : 'scroll',\n\t\t\t\tclosedCallback            : function(){},\n\t\t\t\tinitCallback              : function(){},\n\t\t\t\tmessageCallback           : function(){warn('MessageCallback function not defined');},\n\t\t\t\tresizedCallback           : function(){},\n\t\t\t\tscrollCallback            : function(){return true;}\n\t\t\t};\n\t\n\t\tfunction addEventListener(obj,evt,func){\n\t\t\t/* istanbul ignore else */ // Not testable in PhantonJS\n\t\t\tif ('addEventListener' in window){\n\t\t\t\tobj.addEventListener(evt,func, false);\n\t\t\t} else if ('attachEvent' in window){//IE\n\t\t\t\tobj.attachEvent('on'+evt,func);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction removeEventListener(el,evt,func){\n\t\t\t/* istanbul ignore else */ // Not testable in phantonJS\n\t\t\tif ('removeEventListener' in window){\n\t\t\t\tel.removeEventListener(evt,func, false);\n\t\t\t} else if ('detachEvent' in window){ //IE\n\t\t\t\tel.detachEvent('on'+evt,func);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction setupRequestAnimationFrame(){\n\t\t\tvar\n\t\t\t\tvendors = ['moz', 'webkit', 'o', 'ms'],\n\t\t\t\tx;\n\t\n\t\t\t// Remove vendor prefixing if prefixed and break early if not\n\t\t\tfor (x = 0; x < vendors.length && !requestAnimationFrame; x += 1) {\n\t\t\t\trequestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n\t\t\t}\n\t\n\t\t\tif (!(requestAnimationFrame)){\n\t\t\t\tlog('setup','RequestAnimationFrame not supported');\n\t\t\t}\n\t\t}\n\t\n\t\tfunction getMyID(iframeId){\n\t\t\tvar retStr = 'Host page: '+iframeId;\n\t\n\t\t\tif (window.top!==window.self){\n\t\t\t\tif (window.parentIFrame && window.parentIFrame.getId){\n\t\t\t\t\tretStr = window.parentIFrame.getId()+': '+iframeId;\n\t\t\t\t} else {\n\t\t\t\t\tretStr = 'Nested host page: '+iframeId;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn retStr;\n\t\t}\n\t\n\t\tfunction formatLogHeader(iframeId){\n\t\t\treturn msgId + '[' + getMyID(iframeId) + ']';\n\t\t}\n\t\n\t\tfunction isLogEnabled(iframeId){\n\t\t\treturn settings[iframeId] ? settings[iframeId].log : logEnabled;\n\t\t}\n\t\n\t\tfunction log(iframeId,msg){\n\t\t\toutput('log',iframeId,msg,isLogEnabled(iframeId));\n\t\t}\n\t\n\t\tfunction info(iframeId,msg){\n\t\t\toutput('info',iframeId,msg,isLogEnabled(iframeId));\n\t\t}\n\t\n\t\tfunction warn(iframeId,msg){\n\t\t\toutput('warn',iframeId,msg,true);\n\t\t}\n\t\n\t\tfunction output(type,iframeId,msg,enabled){\n\t\t\tif (true === enabled && 'object' === typeof window.console){\n\t\t\t\tconsole[type](formatLogHeader(iframeId),msg);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction iFrameListener(event){\n\t\t\tfunction resizeIFrame(){\n\t\t\t\tfunction resize(){\n\t\t\t\t\tsetSize(messageData);\n\t\t\t\t\tsetPagePosition(iframeId);\n\t\t\t\t}\n\t\n\t\t\t\tensureInRange('Height');\n\t\t\t\tensureInRange('Width');\n\t\n\t\t\t\tsyncResize(resize,messageData,'init');\n\t\t\t}\n\t\n\t\t\tfunction processMsg(){\n\t\t\t\tvar data = msg.substr(msgIdLen).split(':');\n\t\n\t\t\t\treturn {\n\t\t\t\t\tiframe: settings[data[0]].iframe,\n\t\t\t\t\tid:     data[0],\n\t\t\t\t\theight: data[1],\n\t\t\t\t\twidth:  data[2],\n\t\t\t\t\ttype:   data[3]\n\t\t\t\t};\n\t\t\t}\n\t\n\t\t\tfunction ensureInRange(Dimension){\n\t\t\t\tvar\n\t\t\t\t\tmax  = Number(settings[iframeId]['max' + Dimension]),\n\t\t\t\t\tmin  = Number(settings[iframeId]['min' + Dimension]),\n\t\t\t\t\tdimension = Dimension.toLowerCase(),\n\t\t\t\t\tsize = Number(messageData[dimension]);\n\t\n\t\t\t\tlog(iframeId,'Checking ' + dimension + ' is in range ' + min + '-' + max);\n\t\n\t\t\t\tif (size<min) {\n\t\t\t\t\tsize=min;\n\t\t\t\t\tlog(iframeId,'Set ' + dimension + ' to min value');\n\t\t\t\t}\n\t\n\t\t\t\tif (size>max) {\n\t\t\t\t\tsize=max;\n\t\t\t\t\tlog(iframeId,'Set ' + dimension + ' to max value');\n\t\t\t\t}\n\t\n\t\t\t\tmessageData[dimension] = '' + size;\n\t\t\t}\n\t\n\t\n\t\t\tfunction isMessageFromIFrame(){\n\t\t\t\tfunction checkAllowedOrigin(){\n\t\t\t\t\tfunction checkList(){\n\t\t\t\t\t\tvar\n\t\t\t\t\t\t\ti = 0,\n\t\t\t\t\t\t\tretCode = false;\n\t\n\t\t\t\t\t\tlog(iframeId,'Checking connection is from allowed list of origins: ' + checkOrigin);\n\t\n\t\t\t\t\t\tfor (; i < checkOrigin.length; i++) {\n\t\t\t\t\t\t\tif (checkOrigin[i] === origin) {\n\t\t\t\t\t\t\t\tretCode = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn retCode;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tfunction checkSingle(){\n\t\t\t\t\t\tvar remoteHost  = settings[iframeId].remoteHost;\n\t\t\t\t\t\tlog(iframeId,'Checking connection is from: '+remoteHost);\n\t\t\t\t\t\treturn origin === remoteHost;\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn checkOrigin.constructor === Array ? checkList() : checkSingle();\n\t\t\t\t}\n\t\n\t\t\t\tvar\n\t\t\t\t\torigin      = event.origin,\n\t\t\t\t\tcheckOrigin = settings[iframeId].checkOrigin;\n\t\n\t\t\t\tif (checkOrigin && (''+origin !== 'null') && !checkAllowedOrigin()) {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t'Unexpected message received from: ' + origin +\n\t\t\t\t\t\t' for ' + messageData.iframe.id +\n\t\t\t\t\t\t'. Message was: ' + event.data +\n\t\t\t\t\t\t'. This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\n\t\t\t\treturn true;\n\t\t\t}\n\t\n\t\t\tfunction isMessageForUs(){\n\t\t\t\treturn msgId === (('' + msg).substr(0,msgIdLen)) && (msg.substr(msgIdLen).split(':')[0] in settings); //''+Protects against non-string msg\n\t\t\t}\n\t\n\t\t\tfunction isMessageFromMetaParent(){\n\t\t\t\t//Test if this message is from a parent above us. This is an ugly test, however, updating\n\t\t\t\t//the message format would break backwards compatibity.\n\t\t\t\tvar retCode = messageData.type in {'true':1,'false':1,'undefined':1};\n\t\n\t\t\t\tif (retCode){\n\t\t\t\t\tlog(iframeId,'Ignoring init message from meta parent page');\n\t\t\t\t}\n\t\n\t\t\t\treturn retCode;\n\t\t\t}\n\t\n\t\t\tfunction getMsgBody(offset){\n\t\t\t\treturn msg.substr(msg.indexOf(':')+msgHeaderLen+offset);\n\t\t\t}\n\t\n\t\t\tfunction forwardMsgFromIFrame(msgBody){\n\t\t\t\tlog(iframeId,'MessageCallback passed: {iframe: '+ messageData.iframe.id + ', message: ' + msgBody + '}');\n\t\t\t\tcallback('messageCallback',{\n\t\t\t\t\tiframe: messageData.iframe,\n\t\t\t\t\tmessage: JSON.parse(msgBody)\n\t\t\t\t});\n\t\t\t\tlog(iframeId,'--');\n\t\t\t}\n\t\n\t\t\tfunction getPageInfo(){\n\t\t\t\tvar\n\t\t\t\t\tbodyPosition   = document.body.getBoundingClientRect(),\n\t\t\t\t\tiFramePosition = messageData.iframe.getBoundingClientRect();\n\t\n\t\t\t\treturn JSON.stringify({\n\t\t\t\t\tiframeHeight: iFramePosition.height,\n\t\t\t\t\tiframeWidth:  iFramePosition.width,\n\t\t\t\t\tclientHeight: Math.max(document.documentElement.clientHeight, window.innerHeight || 0),\n\t\t\t\t\tclientWidth:  Math.max(document.documentElement.clientWidth,  window.innerWidth  || 0),\n\t\t\t\t\toffsetTop:    parseInt(iFramePosition.top  - bodyPosition.top,  10),\n\t\t\t\t\toffsetLeft:   parseInt(iFramePosition.left - bodyPosition.left, 10),\n\t\t\t\t\tscrollTop:    window.pageYOffset,\n\t\t\t\t\tscrollLeft:   window.pageXOffset\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\tfunction sendPageInfoToIframe(iframe,iframeId){\n\t\t\t\tfunction debouncedTrigger(){\n\t\t\t\t\ttrigger(\n\t\t\t\t\t\t'Send Page Info',\n\t\t\t\t\t\t'pageInfo:' + getPageInfo(), \n\t\t\t\t\t\tiframe, \n\t\t\t\t\t\tiframeId\n\t\t\t\t\t);\n\t\t\t\t}\n\t\n\t\t\t\tdebouce(debouncedTrigger,32);\n\t\t\t}\n\t\n\t\n\t\t\tfunction startPageInfoMonitor(){\n\t\t\t\tfunction setListener(type,func){\n\t\t\t\t\tfunction sendPageInfo(){\n\t\t\t\t\t\tif (settings[id]){\n\t\t\t\t\t\t\tsendPageInfoToIframe(settings[id].iframe,id);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstop();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\n\t\t\t\t\t['scroll','resize'].forEach(function(evt){\n\t\t\t\t\t\tlog(id, type +  evt + ' listener for sendPageInfo');\n\t\t\t\t\t\tfunc(window,evt,sendPageInfo);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\n\t\t\t\tfunction stop(){\n\t\t\t\t\tsetListener('Remove ', removeEventListener);\n\t\t\t\t}\n\t\n\t\t\t\tfunction start(){\n\t\t\t\t\tsetListener('Add ', addEventListener);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar id = iframeId; //Create locally scoped copy of iFrame ID\n\t\n\t\t\t\tstart();\n\t\n\t\t\t\tsettings[id].stopPageInfo = stop;\n\t\t\t}\n\t\n\t\t\tfunction stopPageInfoMonitor(){\n\t\t\t\tif (settings[iframeId] && settings[iframeId].stopPageInfo){\n\t\t\t\t\tsettings[iframeId].stopPageInfo();\n\t\t\t\t\tdelete settings[iframeId].stopPageInfo;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction checkIFrameExists(){\n\t\t\t\tvar retBool = true;\n\t\n\t\t\t\tif (null === messageData.iframe) {\n\t\t\t\t\twarn(iframeId,'IFrame ('+messageData.id+') not found');\n\t\t\t\t\tretBool = false;\n\t\t\t\t}\n\t\t\t\treturn retBool;\n\t\t\t}\n\t\n\t\t\tfunction getElementPosition(target){\n\t\t\t\tvar iFramePosition = target.getBoundingClientRect();\n\t\n\t\t\t\tgetPagePosition(iframeId);\n\t\n\t\t\t\treturn {\n\t\t\t\t\tx: Math.floor( Number(iFramePosition.left) + Number(pagePosition.x) ),\n\t\t\t\t\ty: Math.floor( Number(iFramePosition.top)  + Number(pagePosition.y) )\n\t\t\t\t};\n\t\t\t}\n\t\n\t\t\tfunction scrollRequestFromChild(addOffset){\n\t\t\t\t/* istanbul ignore next */  //Not testable in Karma\n\t\t\t\tfunction reposition(){\n\t\t\t\t\tpagePosition = newPosition;\n\t\t\t\t\tscrollTo();\n\t\t\t\t\tlog(iframeId,'--');\n\t\t\t\t}\n\t\n\t\t\t\tfunction calcOffset(){\n\t\t\t\t\treturn {\n\t\t\t\t\t\tx: Number(messageData.width) + offset.x,\n\t\t\t\t\t\ty: Number(messageData.height) + offset.y\n\t\t\t\t\t};\n\t\t\t\t}\n\t\n\t\t\t\tfunction scrollParent(){\n\t\t\t\t\tif (window.parentIFrame){\n\t\t\t\t\t\twindow.parentIFrame['scrollTo'+(addOffset?'Offset':'')](newPosition.x,newPosition.y);\n\t\t\t\t\t} else {\n\t\t\t\t\t\twarn(iframeId,'Unable to scroll to requested position, window.parentIFrame not found');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tvar\n\t\t\t\t\toffset = addOffset ? getElementPosition(messageData.iframe) : {x:0,y:0},\n\t\t\t\t\tnewPosition = calcOffset();\n\t\n\t\t\t\tlog(iframeId,'Reposition requested from iFrame (offset x:'+offset.x+' y:'+offset.y+')');\n\t\n\t\t\t\tif(window.top!==window.self){\n\t\t\t\t\tscrollParent();\n\t\t\t\t} else {\n\t\t\t\t\treposition();\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction scrollTo(){\n\t\t\t\tif (false !== callback('scrollCallback',pagePosition)){\n\t\t\t\t\tsetPagePosition(iframeId);\n\t\t\t\t} else {\n\t\t\t\t\tunsetPagePosition();\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction findTarget(location){\n\t\t\t\tfunction jumpToTarget(){\n\t\t\t\t\tvar jumpPosition = getElementPosition(target);\n\t\n\t\t\t\t\tlog(iframeId,'Moving to in page link (#'+hash+') at x: '+jumpPosition.x+' y: '+jumpPosition.y);\n\t\t\t\t\tpagePosition = {\n\t\t\t\t\t\tx: jumpPosition.x,\n\t\t\t\t\t\ty: jumpPosition.y\n\t\t\t\t\t};\n\t\n\t\t\t\t\tscrollTo();\n\t\t\t\t\tlog(iframeId,'--');\n\t\t\t\t}\n\t\n\t\t\t\tfunction jumpToParent(){\n\t\t\t\t\tif (window.parentIFrame){\n\t\t\t\t\t\twindow.parentIFrame.moveToAnchor(hash);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlog(iframeId,'In page link #'+hash+' not found and window.parentIFrame not found');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tvar\n\t\t\t\t\thash     = location.split('#')[1] || '',\n\t\t\t\t\thashData = decodeURIComponent(hash),\n\t\t\t\t\ttarget   = document.getElementById(hashData) || document.getElementsByName(hashData)[0];\n\t\n\t\t\t\tif (target){\n\t\t\t\t\tjumpToTarget();\n\t\t\t\t} else if(window.top!==window.self){\n\t\t\t\t\tjumpToParent();\n\t\t\t\t} else {\n\t\t\t\t\tlog(iframeId,'In page link #'+hash+' not found');\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction callback(funcName,val){\n\t\t\t\treturn chkCallback(iframeId,funcName,val);\n\t\t\t}\n\t\n\t\t\tfunction actionMsg(){\n\t\n\t\t\t\tif(settings[iframeId].firstRun) firstRun();\n\t\n\t\t\t\tswitch(messageData.type){\n\t\t\t\tcase 'close':\n\t\t\t\t\tcloseIFrame(messageData.iframe);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'message':\n\t\t\t\t\tforwardMsgFromIFrame(getMsgBody(6));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'scrollTo':\n\t\t\t\t\tscrollRequestFromChild(false);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'scrollToOffset':\n\t\t\t\t\tscrollRequestFromChild(true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'pageInfo':\n\t\t\t\t\tsendPageInfoToIframe(settings[iframeId].iframe,iframeId);\n\t\t\t\t\tstartPageInfoMonitor();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'pageInfoStop':\n\t\t\t\t\tstopPageInfoMonitor();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'inPageLink':\n\t\t\t\t\tfindTarget(getMsgBody(9));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'reset':\n\t\t\t\t\tresetIFrame(messageData);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'init':\n\t\t\t\t\tresizeIFrame();\n\t\t\t\t\tcallback('initCallback',messageData.iframe);\n\t\t\t\t\tcallback('resizedCallback',messageData);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tresizeIFrame();\n\t\t\t\t\tcallback('resizedCallback',messageData);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction hasSettings(iframeId){\n\t\t\t\tvar retBool = true;\n\t\n\t\t\t\tif (!settings[iframeId]){\n\t\t\t\t\tretBool = false;\n\t\t\t\t\twarn(messageData.type + ' No settings for ' + iframeId + '. Message was: ' + msg);\n\t\t\t\t}\n\t\n\t\t\t\treturn retBool;\n\t\t\t}\n\t\n\t\t\tfunction iFrameReadyMsgReceived(){\n\t\t\t\tfor (var iframeId in settings){\n\t\t\t\t\ttrigger('iFrame requested init',createOutgoingMsg(iframeId),document.getElementById(iframeId),iframeId);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction firstRun() {\n\t\t\t\tsettings[iframeId].firstRun = false;\n\t\t\t}\n\t\n\t\t\tvar\n\t\t\t\tmsg = event.data,\n\t\t\t\tmessageData = {},\n\t\t\t\tiframeId = null;\n\t\n\t\t\tif('[iFrameResizerChild]Ready' === msg){\n\t\t\t\tiFrameReadyMsgReceived();\n\t\t\t} else if (isMessageForUs()){\n\t\t\t\tmessageData = processMsg();\n\t\t\t\tiframeId    = logId = messageData.id;\n\t\n\t\t\t\tif (!isMessageFromMetaParent() && hasSettings(iframeId)){\n\t\t\t\t\tlog(iframeId,'Received: '+msg);\n\t\n\t\t\t\t\tif ( checkIFrameExists() && isMessageFromIFrame() ){\n\t\t\t\t\t\tactionMsg();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tinfo(iframeId,'Ignored: '+msg);\n\t\t\t}\n\t\n\t\t}\n\t\n\t\n\t\tfunction chkCallback(iframeId,funcName,val){\n\t\t\tvar\n\t\t\t\tfunc = null,\n\t\t\t\tretVal = null;\n\t\n\t\t\tif(settings[iframeId]){\n\t\t\t\tfunc = settings[iframeId][funcName];\n\t\n\t\t\t\tif( 'function' === typeof func){\n\t\t\t\t\tretVal = func(val);\n\t\t\t\t} else {\n\t\t\t\t\tthrow new TypeError(funcName+' on iFrame['+iframeId+'] is not a function');\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn retVal;\n\t\t}\n\t\n\t\tfunction closeIFrame(iframe){\n\t\t\tvar iframeId = iframe.id;\n\t\n\t\t\tlog(iframeId,'Removing iFrame: '+iframeId);\n\t\t\tiframe.parentNode.removeChild(iframe);\n\t\t\tchkCallback(iframeId,'closedCallback',iframeId);\n\t\t\tlog(iframeId,'--');\n\t\t\tdelete settings[iframeId];\n\t\t}\n\t\n\t\tfunction getPagePosition(iframeId){\n\t\t\tif(null === pagePosition){\n\t\t\t\tpagePosition = {\n\t\t\t\t\tx: (window.pageXOffset !== undefined) ? window.pageXOffset : document.documentElement.scrollLeft,\n\t\t\t\t\ty: (window.pageYOffset !== undefined) ? window.pageYOffset : document.documentElement.scrollTop\n\t\t\t\t};\n\t\t\t\tlog(iframeId,'Get page position: '+pagePosition.x+','+pagePosition.y);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction setPagePosition(iframeId){\n\t\t\tif(null !== pagePosition){\n\t\t\t\twindow.scrollTo(pagePosition.x,pagePosition.y);\n\t\t\t\tlog(iframeId,'Set page position: '+pagePosition.x+','+pagePosition.y);\n\t\t\t\tunsetPagePosition();\n\t\t\t}\n\t\t}\n\t\n\t\tfunction unsetPagePosition(){\n\t\t\tpagePosition = null;\n\t\t}\n\t\n\t\tfunction resetIFrame(messageData){\n\t\t\tfunction reset(){\n\t\t\t\tsetSize(messageData);\n\t\t\t\ttrigger('reset','reset',messageData.iframe,messageData.id);\n\t\t\t}\n\t\n\t\t\tlog(messageData.id,'Size reset requested by '+('init'===messageData.type?'host page':'iFrame'));\n\t\t\tgetPagePosition(messageData.id);\n\t\t\tsyncResize(reset,messageData,'reset');\n\t\t}\n\t\n\t\tfunction setSize(messageData){\n\t\t\tfunction setDimension(dimension){\n\t\t\t\tmessageData.iframe.style[dimension] = messageData[dimension] + 'px';\n\t\t\t\tlog(\n\t\t\t\t\tmessageData.id,\n\t\t\t\t\t'IFrame (' + iframeId +\n\t\t\t\t\t') ' + dimension +\n\t\t\t\t\t' set to ' + messageData[dimension] + 'px'\n\t\t\t\t);\n\t\t\t}\n\t\n\t\t\tfunction chkZero(dimension){\n\t\t\t\t//FireFox sets dimension of hidden iFrames to zero.\n\t\t\t\t//So if we detect that set up an event to check for\n\t\t\t\t//when iFrame becomes visible.\n\t\n\t\t\t\t/* istanbul ignore next */  //Not testable in PhantomJS\n\t\t\t\tif (!hiddenCheckEnabled && '0' === messageData[dimension]){\n\t\t\t\t\thiddenCheckEnabled = true;\n\t\t\t\t\tlog(iframeId,'Hidden iFrame detected, creating visibility listener');\n\t\t\t\t\tfixHiddenIFrames();\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction processDimension(dimension){\n\t\t\t\tsetDimension(dimension);\n\t\t\t\tchkZero(dimension);\n\t\t\t}\n\t\n\t\t\tvar iframeId = messageData.iframe.id;\n\t\n\t\t\tif(settings[iframeId]){\n\t\t\t\tif( settings[iframeId].sizeHeight) { processDimension('height'); }\n\t\t\t\tif( settings[iframeId].sizeWidth ) { processDimension('width'); }\n\t\t\t}\n\t\t}\n\t\n\t\tfunction syncResize(func,messageData,doNotSync){\n\t\t\t/* istanbul ignore if */  //Not testable in PhantomJS\n\t\t\tif(doNotSync!==messageData.type && requestAnimationFrame){\n\t\t\t\tlog(messageData.id,'Requesting animation frame');\n\t\t\t\trequestAnimationFrame(func);\n\t\t\t} else {\n\t\t\t\tfunc();\n\t\t\t}\n\t\t}\n\t\n\t\tfunction trigger(calleeMsg,msg,iframe,id){\n\t\t\tfunction postMessageToIFrame(){\n\t\t\t\tvar target = settings[id].targetOrigin;\n\t\t\t\tlog(id,'[' + calleeMsg + '] Sending msg to iframe['+id+'] ('+msg+') targetOrigin: '+target);\n\t\t\t\tiframe.contentWindow.postMessage( msgId + msg, target );\n\t\t\t}\n\t\n\t\t\tfunction iFrameNotFound(){\n\t\t\t\tinfo(id,'[' + calleeMsg + '] IFrame('+id+') not found');\n\t\t\t\tif(settings[id]) {\n\t\t\t\t\tdelete settings[id];\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction chkAndSend(){\n\t\t\t\tif(iframe && 'contentWindow' in iframe && (null !== iframe.contentWindow)){ //Null test for PhantomJS\n\t\t\t\t\tpostMessageToIFrame();\n\t\t\t\t} else {\n\t\t\t\t\tiFrameNotFound();\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tid = id || iframe.id;\n\t\n\t\t\tif(settings[id]) {\n\t\t\t\tchkAndSend();\n\t\t\t}\n\t\n\t\t}\n\t\n\t\tfunction createOutgoingMsg(iframeId){\n\t\t\treturn iframeId +\n\t\t\t\t':' + settings[iframeId].bodyMarginV1 +\n\t\t\t\t':' + settings[iframeId].sizeWidth +\n\t\t\t\t':' + settings[iframeId].log +\n\t\t\t\t':' + settings[iframeId].interval +\n\t\t\t\t':' + settings[iframeId].enablePublicMethods +\n\t\t\t\t':' + settings[iframeId].autoResize +\n\t\t\t\t':' + settings[iframeId].bodyMargin +\n\t\t\t\t':' + settings[iframeId].heightCalculationMethod +\n\t\t\t\t':' + settings[iframeId].bodyBackground +\n\t\t\t\t':' + settings[iframeId].bodyPadding +\n\t\t\t\t':' + settings[iframeId].tolerance +\n\t\t\t\t':' + settings[iframeId].inPageLinks +\n\t\t\t\t':' + settings[iframeId].resizeFrom +\n\t\t\t\t':' + settings[iframeId].widthCalculationMethod;\n\t\t}\n\t\n\t\tfunction setupIFrame(iframe,options){\n\t\t\tfunction setLimits(){\n\t\t\t\tfunction addStyle(style){\n\t\t\t\t\tif ((Infinity !== settings[iframeId][style]) && (0 !== settings[iframeId][style])){\n\t\t\t\t\t\tiframe.style[style] = settings[iframeId][style] + 'px';\n\t\t\t\t\t\tlog(iframeId,'Set '+style+' = '+settings[iframeId][style]+'px');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tfunction chkMinMax(dimension){\n\t\t\t\t\tif (settings[iframeId]['min'+dimension]>settings[iframeId]['max'+dimension]){\n\t\t\t\t\t\tthrow new Error('Value for min'+dimension+' can not be greater than max'+dimension);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tchkMinMax('Height');\n\t\t\t\tchkMinMax('Width');\n\t\n\t\t\t\taddStyle('maxHeight');\n\t\t\t\taddStyle('minHeight');\n\t\t\t\taddStyle('maxWidth');\n\t\t\t\taddStyle('minWidth');\n\t\t\t}\n\t\n\t\t\tfunction newId(){\n\t\t\t\tvar id = ((options && options.id) || defaults.id + count++);\n\t\t\t\tif  (null!==document.getElementById(id)){\n\t\t\t\t\tid = id + count++;\n\t\t\t\t}\n\t\t\t\treturn id;\n\t\t\t}\n\t\n\t\t\tfunction ensureHasId(iframeId){\n\t\t\t\tlogId=iframeId;\n\t\t\t\tif (''===iframeId){\n\t\t\t\t\tiframe.id = iframeId =  newId();\n\t\t\t\t\tlogEnabled = (options || {}).log;\n\t\t\t\t\tlogId=iframeId;\n\t\t\t\t\tlog(iframeId,'Added missing iframe ID: '+ iframeId +' (' + iframe.src + ')');\n\t\t\t\t}\n\t\n\t\n\t\t\t\treturn iframeId;\n\t\t\t}\n\t\n\t\t\tfunction setScrolling(){\n\t\t\t\tlog(iframeId,'IFrame scrolling ' + (settings[iframeId].scrolling ? 'enabled' : 'disabled') + ' for ' + iframeId);\n\t\t\t\tiframe.style.overflow = false === settings[iframeId].scrolling ? 'hidden' : 'auto';\n\t\t\t\tiframe.scrolling      = false === settings[iframeId].scrolling ? 'no' : 'yes';\n\t\t\t}\n\t\n\t\t\t//The V1 iFrame script expects an int, where as in V2 expects a CSS\n\t\t\t//string value such as '1px 3em', so if we have an int for V2, set V1=V2\n\t\t\t//and then convert V2 to a string PX value.\n\t\t\tfunction setupBodyMarginValues(){\n\t\t\t\tif (('number'===typeof(settings[iframeId].bodyMargin)) || ('0'===settings[iframeId].bodyMargin)){\n\t\t\t\t\tsettings[iframeId].bodyMarginV1 = settings[iframeId].bodyMargin;\n\t\t\t\t\tsettings[iframeId].bodyMargin   = '' + settings[iframeId].bodyMargin + 'px';\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction checkReset(){\n\t\t\t\t// Reduce scope of firstRun to function, because IE8's JS execution\n\t\t\t\t// context stack is borked and this value gets externally\n\t\t\t\t// changed midway through running this function!!!\n\t\t\t\tvar\n\t\t\t\t\tfirstRun           = settings[iframeId].firstRun,\n\t\t\t\t\tresetRequertMethod = settings[iframeId].heightCalculationMethod in resetRequiredMethods;\n\t\n\t\t\t\tif (!firstRun && resetRequertMethod){\n\t\t\t\t\tresetIFrame({iframe:iframe, height:0, width:0, type:'init'});\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction setupIFrameObject(){\n\t\t\t\tif(Function.prototype.bind){ //Ignore unpolyfilled IE8.\n\t\t\t\t\tsettings[iframeId].iframe.iFrameResizer = {\n\t\n\t\t\t\t\t\tclose        : closeIFrame.bind(null,settings[iframeId].iframe),\n\t\n\t\t\t\t\t\tresize       : trigger.bind(null,'Window resize', 'resize', settings[iframeId].iframe),\n\t\n\t\t\t\t\t\tmoveToAnchor : function(anchor){\n\t\t\t\t\t\t\ttrigger('Move to anchor','moveToAnchor:'+anchor, settings[iframeId].iframe,iframeId);\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\tsendMessage  : function(message){\n\t\t\t\t\t\t\tmessage = JSON.stringify(message);\n\t\t\t\t\t\t\ttrigger('Send Message','message:'+message, settings[iframeId].iframe,iframeId);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t//We have to call trigger twice, as we can not be sure if all\n\t\t\t//iframes have completed loading when this code runs. The\n\t\t\t//event listener also catches the page changing in the iFrame.\n\t\t\tfunction init(msg){\n\t\t\t\tfunction iFrameLoaded(){\n\t\t\t\t\ttrigger('iFrame.onload',msg,iframe);\n\t\t\t\t\tcheckReset();\n\t\t\t\t}\n\t\n\t\t\t\taddEventListener(iframe,'load',iFrameLoaded);\n\t\t\t\ttrigger('init',msg,iframe);\n\t\t\t}\n\t\n\t\t\tfunction checkOptions(options){\n\t\t\t\tif ('object' !== typeof options){\n\t\t\t\t\tthrow new TypeError('Options is not an object');\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction copyOptions(options){\n\t\t\t\tfor (var option in defaults) {\n\t\t\t\t\tif (defaults.hasOwnProperty(option)){\n\t\t\t\t\t\tsettings[iframeId][option] = options.hasOwnProperty(option) ? options[option] : defaults[option];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction getTargetOrigin (remoteHost){\n\t\t\t\treturn ('' === remoteHost || 'file://' === remoteHost) ? '*' : remoteHost;\n\t\t\t}\n\t\n\t\t\tfunction processOptions(options){\n\t\t\t\toptions = options || {};\n\t\t\t\tsettings[iframeId] = {\n\t\t\t\t\tfirstRun\t: true,\n\t\t\t\t\tiframe\t\t: iframe,\n\t\t\t\t\tremoteHost\t: iframe.src.split('/').slice(0,3).join('/')\n\t\t\t\t};\n\t\n\t\t\t\tcheckOptions(options);\n\t\t\t\tcopyOptions(options);\n\t\n\t\t\t\tsettings[iframeId].targetOrigin = true === settings[iframeId].checkOrigin ? getTargetOrigin(settings[iframeId].remoteHost) : '*';\n\t\t\t}\n\t\n\t\t\tfunction beenHere(){\n\t\t\t\treturn (iframeId in settings && 'iFrameResizer' in iframe);\n\t\t\t}\n\t\n\t\t\tvar iframeId = ensureHasId(iframe.id);\n\t\n\t\t\tif (!beenHere()){\n\t\t\t\tprocessOptions(options);\n\t\t\t\tsetScrolling();\n\t\t\t\tsetLimits();\n\t\t\t\tsetupBodyMarginValues();\n\t\t\t\tinit(createOutgoingMsg(iframeId));\n\t\t\t\tsetupIFrameObject();\n\t\t\t} else {\n\t\t\t\twarn(iframeId,'Ignored iFrame, already setup.');\n\t\t\t}\n\t\t}\n\t\n\t\tfunction debouce(fn,time){\n\t\t\tif (null === timer){\n\t\t\t\ttimer = setTimeout(function(){\n\t\t\t\t\ttimer = null;\n\t\t\t\t\tfn();\n\t\t\t\t}, time);\n\t\t\t}\n\t\t}\n\t\n\t\t/* istanbul ignore next */  //Not testable in PhantomJS\n\t\tfunction fixHiddenIFrames(){\n\t\t\tfunction checkIFrames(){\n\t\t\t\tfunction checkIFrame(settingId){\n\t\t\t\t\tfunction chkDimension(dimension){\n\t\t\t\t\t\treturn '0px' === settings[settingId].iframe.style[dimension];\n\t\t\t\t\t}\n\t\n\t\t\t\t\tfunction isVisible(el) {\n\t\t\t\t\t\treturn (null !== el.offsetParent);\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (isVisible(settings[settingId].iframe) && (chkDimension('height') || chkDimension('width'))){\n\t\t\t\t\t\ttrigger('Visibility change', 'resize', settings[settingId].iframe,settingId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tfor (var settingId in settings){\n\t\t\t\t\tcheckIFrame(settingId);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction mutationObserved(mutations){\n\t\t\t\tlog('window','Mutation observed: ' + mutations[0].target + ' ' + mutations[0].type);\n\t\t\t\tdebouce(checkIFrames,16);\n\t\t\t}\n\t\n\t\t\tfunction createMutationObserver(){\n\t\t\t\tvar\n\t\t\t\t\ttarget = document.querySelector('body'),\n\t\n\t\t\t\t\tconfig = {\n\t\t\t\t\t\tattributes            : true,\n\t\t\t\t\t\tattributeOldValue     : false,\n\t\t\t\t\t\tcharacterData         : true,\n\t\t\t\t\t\tcharacterDataOldValue : false,\n\t\t\t\t\t\tchildList             : true,\n\t\t\t\t\t\tsubtree               : true\n\t\t\t\t\t},\n\t\n\t\t\t\t\tobserver = new MutationObserver(mutationObserved);\n\t\n\t\t\t\tobserver.observe(target, config);\n\t\t\t}\n\t\n\t\t\tvar MutationObserver = window.MutationObserver || window.WebKitMutationObserver;\n\t\n\t\t\tif (MutationObserver) createMutationObserver();\n\t\t}\n\t\n\t\n\t\tfunction resizeIFrames(event){\n\t\t\tfunction resize(){\n\t\t\t\tsendTriggerMsg('Window '+event,'resize');\n\t\t\t}\n\t\n\t\t\tlog('window','Trigger event: '+event);\n\t\t\tdebouce(resize,16);\n\t\t}\n\t\n\t\t/* istanbul ignore next */  //Not testable in PhantomJS\n\t\tfunction tabVisible() {\n\t\t\tfunction resize(){\n\t\t\t\tsendTriggerMsg('Tab Visable','resize');\n\t\t\t}\n\t\n\t\t\tif('hidden' !== document.visibilityState) {\n\t\t\t\tlog('document','Trigger event: Visiblity change');\n\t\t\t\tdebouce(resize,16);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction sendTriggerMsg(eventName,event){\n\t\t\tfunction isIFrameResizeEnabled(iframeId) {\n\t\t\t\treturn\t'parent' === settings[iframeId].resizeFrom &&\n\t\t\t\t\t\tsettings[iframeId].autoResize &&\n\t\t\t\t\t\t!settings[iframeId].firstRun;\n\t\t\t}\n\t\n\t\t\tfor (var iframeId in settings){\n\t\t\t\tif(isIFrameResizeEnabled(iframeId)){\n\t\t\t\t\ttrigger(eventName,event,document.getElementById(iframeId),iframeId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tfunction setupEventListeners(){\n\t\t\taddEventListener(window,'message',iFrameListener);\n\t\n\t\t\taddEventListener(window,'resize', function(){resizeIFrames('resize');});\n\t\n\t\t\taddEventListener(document,'visibilitychange',tabVisible);\n\t\t\taddEventListener(document,'-webkit-visibilitychange',tabVisible); //Andriod 4.4\n\t\t\taddEventListener(window,'focusin',function(){resizeIFrames('focus');}); //IE8-9\n\t\t\taddEventListener(window,'focus',function(){resizeIFrames('focus');});\n\t\t}\n\t\n\t\n\t\tfunction factory(){\n\t\t\tfunction init(options,element){\n\t\t\t\tfunction chkType(){\n\t\t\t\t\tif(!element.tagName) {\n\t\t\t\t\t\tthrow new TypeError('Object is not a valid DOM element');\n\t\t\t\t\t} else if ('IFRAME' !== element.tagName.toUpperCase()) {\n\t\t\t\t\t\tthrow new TypeError('Expected <IFRAME> tag, found <'+element.tagName+'>');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tif(element) {\n\t\t\t\t\tchkType();\n\t\t\t\t\tsetupIFrame(element, options);\n\t\t\t\t\tiFrames.push(element);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tvar iFrames;\n\t\n\t\t\tsetupRequestAnimationFrame();\n\t\t\tsetupEventListeners();\n\t\n\t\t\treturn function iFrameResizeF(options,target){\n\t\t\t\tiFrames = []; //Only return iFrames past in on this call\n\t\n\t\t\t\tswitch (typeof(target)){\n\t\t\t\tcase 'undefined':\n\t\t\t\tcase 'string':\n\t\t\t\t\tArray.prototype.forEach.call(\n\t\t\t\t\t\tdocument.querySelectorAll( target || 'iframe' ),\n\t\t\t\t\t\tinit.bind(undefined, options)\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'object':\n\t\t\t\t\tinit(options,target);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new TypeError('Unexpected data type ('+typeof(target)+')');\n\t\t\t\t}\n\t\n\t\t\t\treturn iFrames;\n\t\t\t};\n\t\t}\n\t\n\t\tfunction createJQueryPublicMethod($){\n\t\t\tif (!$.fn) {\n\t\t\t\tinfo('','Unable to bind to jQuery, it is not fully loaded.');\n\t\t\t} else {\n\t\t\t\t$.fn.iFrameResize = function $iFrameResizeF(options) {\n\t\t\t\t\tfunction init(index, element) {\n\t\t\t\t\t\tsetupIFrame(element, options);\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn this.filter('iframe').each(init).end();\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\n\t\tif (window.jQuery) { createJQueryPublicMethod(jQuery); }\n\t\n\t\tif (true) {\n\t\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t\t} else if (typeof module === 'object' && typeof module.exports === 'object') { //Node for browserfy\n\t\t\tmodule.exports = factory();\n\t\t} else {\n\t\t\twindow.iFrameResize = window.iFrameResize || factory();\n\t\t}\n\t\n\t})(window || {});\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\texports.iframeResizer = __webpack_require__(3);\n\texports.iframeResizerContentWindow = __webpack_require__(2);\n\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** qando.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 9c2e1127fbd64f34e8c9\n **/","const { iframeResizer } = require('iframe-resizer');\nconst QANDO_FRONT_URL  = process.env.NODE_ENV === 'production'\n  ? 'http://booking.qando.it'\n  : 'http://localhost:3000';\n\n/**\n * Make an DOM element integrate with Qando booking!\n *\n * el: DOM element where render iframe\n * options: {\n *  shop: Qando shop id\n *  servi: Qando service id\n * }\n */\nfunction booking(selector, options = {}) {\n  const el = document.querySelector(selector);\n  const { shop, service } = options;\n  const url = makeIframeUrl(shop, service, options);\n\n  const iframe = document.createElement('iframe');\n  iframe.src = url;\n  iframe.style.border = '0px';\n  iframe.style.width = '100%';\n  iframe.frameborder = '0';\n  iframe.scrolling = 'no';\n\n  // Set iframe content\n  el.appendChild(iframe);\n  iframeResizer({\n    checkOrigin: false,\n    log: process.env.NODE_ENV !== 'production',\n  });\n};\n\nfunction makeIframeUrl(shop, service, options) {\n  let url = `${QANDO_FRONT_URL}/${shop}`;\n  if (service) {\n    url += `/booking/${service}`;\n  }\n  url += `?iframe=${shop}` +\n    '&iframeWithHeader=' + ~~options.header +\n    '&iframeWithFooter=' + ~~options.footer +\n    '&iframeCustomCss='  + ~~options.css;\n  return url;\n}\n\n// exports qando\nconst qando = {\n  booking,\n};\n\nmodule.exports = qando;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","\n'use strict';\n\nmodule.exports = require('./js');\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/iframe-resizer/index.js\n ** module id = 1\n ** module chunks = 0\n **/","/*\n * File: iframeResizer.contentWindow.js\n * Desc: Include this file in any page being loaded into an iframe\n *       to force the iframe to resize to the content size.\n * Requires: iframeResizer.js on host page.\n * Doc: https://github.com/davidjbradshaw/iframe-resizer\n * Author: David J. Bradshaw - dave@bradshaw.net\n * Contributor: Jure Mav - jure.mav@gmail.com\n * Contributor: Ian Caunce - ian@hallnet.co.uk\n */\n\n\n;(function(window, undefined) {\n\t'use strict';\n\n\tvar\n\t\tautoResize            = true,\n\t\tbase                  = 10,\n\t\tbodyBackground        = '',\n\t\tbodyMargin            = 0,\n\t\tbodyMarginStr         = '',\n\t\tbodyObserver          = null,\n\t\tbodyPadding           = '',\n\t\tcalculateWidth        = false,\n\t\tdoubleEventList       = {'resize':1,'click':1},\n\t\teventCancelTimer      = 128,\n\t\tfirstRun              = true,\n\t\theight                = 1,\n\t\theightCalcModeDefault = 'bodyOffset',\n\t\theightCalcMode        = heightCalcModeDefault,\n\t\tinitLock              = true,\n\t\tinitMsg               = '',\n\t\tinPageLinks           = {},\n\t\tinterval              = 32,\n\t\tintervalTimer         = null,\n\t\tlogging               = false,\n\t\tmsgID                 = '[iFrameSizer]',  //Must match host page msg ID\n\t\tmsgIdLen              = msgID.length,\n\t\tmyID                  = '',\n\t\tobserver              = null,\n\t\tresetRequiredMethods  = {max:1,min:1,bodyScroll:1,documentElementScroll:1},\n\t\tresizeFrom            = 'child',\n\t\tsendPermit            = true,\n\t\ttarget                = window.parent,\n\t\ttargetOriginDefault   = '*',\n\t\ttolerance             = 0,\n\t\ttriggerLocked         = false,\n\t\ttriggerLockedTimer    = null,\n\t\tthrottledTimer        = 16,\n\t\twidth                 = 1,\n\t\twidthCalcModeDefault  = 'scroll',\n\t\twidthCalcMode         = widthCalcModeDefault,\n\t\twin                   = window,\n\t\tmessageCallback       = function(){ warn('MessageCallback function not defined'); },\n\t\treadyCallback         = function(){},\n\t\tpageInfoCallback      = function(){},\n\t\tcustomCalcMethods     = {\n\t\t\theight: function(){\n\t\t\t\twarn('Custom height calculation function not defined');\n\t\t\t\treturn document.documentElement.offsetHeight;\n\t\t\t}, \n\t\t\twidth: function(){\n\t\t\t\twarn('Custom width calculation function not defined');\n\t\t\t\treturn document.body.scrollWidth;\n\t\t\t}\n\t\t};\n\n\n\tfunction addEventListener(el,evt,func){\n\t\t/* istanbul ignore else */ // Not testable in phantonJS\n\t\tif ('addEventListener' in window){\n\t\t\tel.addEventListener(evt,func, false);\n\t\t} else if ('attachEvent' in window){ //IE\n\t\t\tel.attachEvent('on'+evt,func);\n\t\t}\n\t}\n\n\tfunction removeEventListener(el,evt,func){\n\t\t/* istanbul ignore else */ // Not testable in phantonJS\n\t\tif ('removeEventListener' in window){\n\t\t\tel.removeEventListener(evt,func, false);\n\t\t} else if ('detachEvent' in window){ //IE\n\t\t\tel.detachEvent('on'+evt,func);\n\t\t}\n\t}\n\n\tfunction capitalizeFirstLetter(string) {\n\t\treturn string.charAt(0).toUpperCase() + string.slice(1);\n\t}\n\n\t//Based on underscore.js\n\tfunction throttle(func) {\n\t\tvar\n\t\t\tcontext, args, result,\n\t\t\ttimeout = null,\n\t\t\tprevious = 0,\n\t\t\tlater = function() {\n\t\t\t\tprevious = getNow();\n\t\t\t\ttimeout = null;\n\t\t\t\tresult = func.apply(context, args);\n\t\t\t\tif (!timeout) {\n\t\t\t\t\tcontext = args = null;\n\t\t\t\t}\n\t\t\t};\n\n\t\treturn function() {\n\t\t\tvar now = getNow();\n\n\t\t\tif (!previous) {\n\t\t\t\tprevious = now;\n\t\t\t}\n\n\t\t\tvar remaining = throttledTimer - (now - previous);\n\n\t\t\tcontext = this;\n\t\t\targs = arguments;\n\n\t\t\tif (remaining <= 0 || remaining > throttledTimer) {\n\t\t\t\tif (timeout) {\n\t\t\t\t\tclearTimeout(timeout);\n\t\t\t\t\ttimeout = null;\n\t\t\t\t}\n\n\t\t\t\tprevious = now;\n\t\t\t\tresult = func.apply(context, args);\n\n\t\t\t\tif (!timeout) {\n\t\t\t\t\tcontext = args = null;\n\t\t\t\t}\n\n\t\t\t} else if (!timeout) {\n\t\t\t\ttimeout = setTimeout(later, remaining);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\t}\n\n\tvar getNow = Date.now || function() {\n\t\t/* istanbul ignore next */ // Not testable in PhantonJS\n\t\treturn new Date().getTime();\n\t};\n\n\tfunction formatLogMsg(msg){\n\t\treturn msgID + '[' + myID + ']' + ' ' + msg;\n\t}\n\n\tfunction log(msg){\n\t\tif (logging && ('object' === typeof window.console)){\n\t\t\tconsole.log(formatLogMsg(msg));\n\t\t}\n\t}\n\n\tfunction warn(msg){\n\t\tif ('object' === typeof window.console){\n\t\t\tconsole.warn(formatLogMsg(msg));\n\t\t}\n\t}\n\n\n\tfunction init(){\n\t\treadDataFromParent();\n\t\tlog('Initialising iFrame ('+location.href+')');\n\t\treadDataFromPage();\n\t\tsetMargin();\n\t\tsetBodyStyle('background',bodyBackground);\n\t\tsetBodyStyle('padding',bodyPadding);\n\t\tinjectClearFixIntoBodyElement();\n\t\tcheckHeightMode();\n\t\tcheckWidthMode();\n\t\tstopInfiniteResizingOfIFrame();\n\t\tsetupPublicMethods();\n\t\tstartEventListeners();\n\t\tinPageLinks = setupInPageLinks();\n\t\tsendSize('init','Init message from host page');\n\t\treadyCallback();\n\t}\n\n\tfunction readDataFromParent(){\n\n\t\tfunction strBool(str){\n\t\t\treturn 'true' === str ? true : false;\n\t\t}\n\n\t\tvar data = initMsg.substr(msgIdLen).split(':');\n\n\t\tmyID               = data[0];\n\t\tbodyMargin         = (undefined !== data[1]) ? Number(data[1])   : bodyMargin; //For V1 compatibility\n\t\tcalculateWidth     = (undefined !== data[2]) ? strBool(data[2])  : calculateWidth;\n\t\tlogging            = (undefined !== data[3]) ? strBool(data[3])  : logging;\n\t\tinterval           = (undefined !== data[4]) ? Number(data[4])   : interval;\n\t\tautoResize         = (undefined !== data[6]) ? strBool(data[6])  : autoResize;\n\t\tbodyMarginStr      = data[7];\n\t\theightCalcMode     = (undefined !== data[8]) ? data[8]           : heightCalcMode;\n\t\tbodyBackground     = data[9];\n\t\tbodyPadding        = data[10];\n\t\ttolerance          = (undefined !== data[11]) ? Number(data[11]) : tolerance;\n\t\tinPageLinks.enable = (undefined !== data[12]) ? strBool(data[12]): false;\n\t\tresizeFrom         = (undefined !== data[13]) ? data[13]         : resizeFrom;\n\t\twidthCalcMode      = (undefined !== data[14]) ? data[14]         : widthCalcMode;\n\t}\n\n\tfunction readDataFromPage(){\n\t\tfunction readData(){\n\t\t\tvar data = window.iFrameResizer;\n\n\t\t\tlog('Reading data from page: ' + JSON.stringify(data));\n\n\t\t\tmessageCallback     = ('messageCallback'         in data) ? data.messageCallback         : messageCallback;\n\t\t\treadyCallback       = ('readyCallback'           in data) ? data.readyCallback           : readyCallback;\n\t\t\ttargetOriginDefault = ('targetOrigin'            in data) ? data.targetOrigin            : targetOriginDefault;\n\t\t\theightCalcMode      = ('heightCalculationMethod' in data) ? data.heightCalculationMethod : heightCalcMode;\n\t\t\twidthCalcMode       = ('widthCalculationMethod'  in data) ? data.widthCalculationMethod  : widthCalcMode;\n\t\t}\n\n\t\tfunction setupCustomCalcMethods(calcMode, calcFunc){\n\t\t\tif ('function' === typeof calcMode) {\n\t\t\t\tlog('Setup custom ' + calcFunc + 'CalcMethod');\n\t\t\t\tcustomCalcMethods[calcFunc] = calcMode;\n\t\t\t\tcalcMode = 'custom';\n\t\t\t}\n\n\t\t\treturn calcMode;\n\t\t}\n\n\t\tif(('iFrameResizer' in window) && (Object === window.iFrameResizer.constructor)) {\n\t\t\treadData();\n\t\t\theightCalcMode = setupCustomCalcMethods(heightCalcMode, 'height');\n\t\t\twidthCalcMode  = setupCustomCalcMethods(widthCalcMode,  'width');\n\t\t}\n\n\t\tlog('TargetOrigin for parent set to: ' + targetOriginDefault);\n\t}\n\n\n\tfunction chkCSS(attr,value){\n\t\tif (-1 !== value.indexOf('-')){\n\t\t\twarn('Negative CSS value ignored for '+attr);\n\t\t\tvalue='';\n\t\t}\n\t\treturn value;\n\t}\n\n\tfunction setBodyStyle(attr,value){\n\t\tif ((undefined !== value) && ('' !== value) && ('null' !== value)){\n\t\t\tdocument.body.style[attr] = value;\n\t\t\tlog('Body '+attr+' set to \"'+value+'\"');\n\t\t}\n\t}\n\n\tfunction setMargin(){\n\t\t//If called via V1 script, convert bodyMargin from int to str\n\t\tif (undefined === bodyMarginStr){\n\t\t\tbodyMarginStr = bodyMargin+'px';\n\t\t}\n\n\t\tsetBodyStyle('margin',chkCSS('margin',bodyMarginStr));\n\t}\n\n\tfunction stopInfiniteResizingOfIFrame(){\n\t\tdocument.documentElement.style.height = '';\n\t\tdocument.body.style.height = '';\n\t\tlog('HTML & body height set to \"auto\"');\n\t}\n\n\n\tfunction manageTriggerEvent(options){\n\t\tfunction handleEvent(){\n\t\t\tsendSize(options.eventName,options.eventType);\n\t\t}\n\n\t\tvar listener = {\n\t\t\tadd:    function(eventName){\n\t\t\t\taddEventListener(window,eventName,handleEvent);\n\t\t\t},\n\t\t\tremove: function(eventName){\n\t\t\t\tremoveEventListener(window,eventName,handleEvent);\n\t\t\t}\n\t\t};\n\n\t\tif(options.eventNames && Array.prototype.map){\n\t\t\toptions.eventName = options.eventNames[0];\n\t\t\toptions.eventNames.map(listener[options.method]);\n\t\t} else {\n\t\t\tlistener[options.method](options.eventName);\n\t\t}\n\n\t\tlog(capitalizeFirstLetter(options.method) + ' event listener: ' + options.eventType);\n\t}\n\n\tfunction manageEventListeners(method){\n\t\tmanageTriggerEvent({method:method, eventType: 'Animation Start',           eventNames: ['animationstart','webkitAnimationStart'] });\n\t\tmanageTriggerEvent({method:method, eventType: 'Animation Iteration',       eventNames: ['animationiteration','webkitAnimationIteration'] });\n\t\tmanageTriggerEvent({method:method, eventType: 'Animation End',             eventNames: ['animationend','webkitAnimationEnd'] });\n\t\tmanageTriggerEvent({method:method, eventType: 'Input',                     eventName:  'input' });\n\t\tmanageTriggerEvent({method:method, eventType: 'Mouse Up',                  eventName:  'mouseup' });\n\t\tmanageTriggerEvent({method:method, eventType: 'Mouse Down',                eventName:  'mousedown' });\n\t\tmanageTriggerEvent({method:method, eventType: 'Orientation Change',        eventName:  'orientationchange' });\n\t\tmanageTriggerEvent({method:method, eventType: 'Print',                     eventName:  ['afterprint', 'beforeprint'] });\n\t\tmanageTriggerEvent({method:method, eventType: 'Ready State Change',        eventName:  'readystatechange' });\n\t\tmanageTriggerEvent({method:method, eventType: 'Touch Start',               eventName:  'touchstart' });\n\t\tmanageTriggerEvent({method:method, eventType: 'Touch End',                 eventName:  'touchend' });\n\t\tmanageTriggerEvent({method:method, eventType: 'Touch Cancel',              eventName:  'touchcancel' });\n\t\tmanageTriggerEvent({method:method, eventType: 'Transition Start',          eventNames: ['transitionstart','webkitTransitionStart','MSTransitionStart','oTransitionStart','otransitionstart'] });\n\t\tmanageTriggerEvent({method:method, eventType: 'Transition Iteration',      eventNames: ['transitioniteration','webkitTransitionIteration','MSTransitionIteration','oTransitionIteration','otransitioniteration'] });\n\t\tmanageTriggerEvent({method:method, eventType: 'Transition End',            eventNames: ['transitionend','webkitTransitionEnd','MSTransitionEnd','oTransitionEnd','otransitionend'] });\n\t\tif('child' === resizeFrom){\n\t\t\tmanageTriggerEvent({method:method, eventType: 'IFrame Resized',        eventName:  'resize' });\n\t\t}\n\t}\n\n\tfunction checkCalcMode(calcMode,calcModeDefault,modes,type){\n\t\tif (calcModeDefault !== calcMode){\n\t\t\tif (!(calcMode in modes)){\n\t\t\t\twarn(calcMode + ' is not a valid option for '+type+'CalculationMethod.');\n\t\t\t\tcalcMode=calcModeDefault;\n\t\t\t}\n\t\t\tlog(type+' calculation method set to \"'+calcMode+'\"');\n\t\t}\n\n\t\treturn calcMode;\n\t}\n\n\tfunction checkHeightMode(){\n\t\theightCalcMode = checkCalcMode(heightCalcMode,heightCalcModeDefault,getHeight,'height');\n\t}\n\n\tfunction checkWidthMode(){\n\t\twidthCalcMode = checkCalcMode(widthCalcMode,widthCalcModeDefault,getWidth,'width');\n\t}\n\n\tfunction startEventListeners(){\n\t\tif ( true === autoResize ) {\n\t\t\tmanageEventListeners('add');\n\t\t\tsetupMutationObserver();\n\t\t}\n\t\telse {\n\t\t\tlog('Auto Resize disabled');\n\t\t}\n\t}\n\n\tfunction stopMsgsToParent(){\n\t\tlog('Disable outgoing messages');\n\t\tsendPermit = false;\n\t}\n\n\tfunction removeMsgListener(){\n\t\tlog('Remove event listener: Message');\n\t\tremoveEventListener(window, 'message', receiver);\n\t}\n\n\tfunction disconnectMutationObserver(){\n\t\tif (null !== bodyObserver){\n\t\t\t/* istanbul ignore next */ // Not testable in PhantonJS\n\t\t\tbodyObserver.disconnect();\n\t\t}\n\t}\n\n\tfunction stopEventListeners(){\n\t\tmanageEventListeners('remove');\n\t\tdisconnectMutationObserver();\n\t\tclearInterval(intervalTimer);\n\t}\n\n\tfunction teardown(){\n\t\tstopMsgsToParent();\n\t\tremoveMsgListener();\n\t\tif (true === autoResize) stopEventListeners();\n\t}\n\n\tfunction injectClearFixIntoBodyElement(){\n\t\tvar clearFix = document.createElement('div');\n\t\tclearFix.style.clear   = 'both';\n\t\tclearFix.style.display = 'block'; //Guard against this having been globally redefined in CSS.\n\t\tdocument.body.appendChild(clearFix);\n\t}\n\n\tfunction setupInPageLinks(){\n\n\t\tfunction getPagePosition (){\n\t\t\treturn {\n\t\t\t\tx: (window.pageXOffset !== undefined) ? window.pageXOffset : document.documentElement.scrollLeft,\n\t\t\t\ty: (window.pageYOffset !== undefined) ? window.pageYOffset : document.documentElement.scrollTop\n\t\t\t};\n\t\t}\n\n\t\tfunction getElementPosition(el){\n\t\t\tvar\n\t\t\t\telPosition   = el.getBoundingClientRect(),\n\t\t\t\tpagePosition = getPagePosition();\n\n\t\t\treturn {\n\t\t\t\tx: parseInt(elPosition.left,10) + parseInt(pagePosition.x,10),\n\t\t\t\ty: parseInt(elPosition.top,10)  + parseInt(pagePosition.y,10)\n\t\t\t};\n\t\t}\n\n\t\tfunction findTarget(location){\n\t\t\tfunction jumpToTarget(target){\n\t\t\t\tvar jumpPosition = getElementPosition(target);\n\n\t\t\t\tlog('Moving to in page link (#'+hash+') at x: '+jumpPosition.x+' y: '+jumpPosition.y);\n\t\t\t\tsendMsg(jumpPosition.y, jumpPosition.x, 'scrollToOffset'); // X&Y reversed at sendMsg uses height/width\n\t\t\t}\n\n\t\t\tvar\n\t\t\t\thash     = location.split('#')[1] || location, //Remove # if present\n\t\t\t\thashData = decodeURIComponent(hash),\n\t\t\t\ttarget   = document.getElementById(hashData) || document.getElementsByName(hashData)[0];\n\n\t\t\tif (undefined !== target){\n\t\t\t\tjumpToTarget(target);\n\t\t\t} else {\n\t\t\t\tlog('In page link (#' + hash + ') not found in iFrame, so sending to parent');\n\t\t\t\tsendMsg(0,0,'inPageLink','#'+hash);\n\t\t\t}\n\t\t}\n\n\t\tfunction checkLocationHash(){\n\t\t\tif ('' !== location.hash && '#' !== location.hash){\n\t\t\t\tfindTarget(location.href);\n\t\t\t}\n\t\t}\n\n\t\tfunction bindAnchors(){\n\t\t\tfunction setupLink(el){\n\t\t\t\tfunction linkClicked(e){\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t/*jshint validthis:true */\n\t\t\t\t\tfindTarget(this.getAttribute('href'));\n\t\t\t\t}\n\n\t\t\t\tif ('#' !== el.getAttribute('href')){\n\t\t\t\t\taddEventListener(el,'click',linkClicked);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tArray.prototype.forEach.call( document.querySelectorAll( 'a[href^=\"#\"]' ), setupLink );\n\t\t}\n\n\t\tfunction bindLocationHash(){\n\t\t\taddEventListener(window,'hashchange',checkLocationHash);\n\t\t}\n\n\t\tfunction initCheck(){ //check if page loaded with location hash after init resize\n\t\t\tsetTimeout(checkLocationHash,eventCancelTimer);\n\t\t}\n\n\t\tfunction enableInPageLinks(){\n\t\t\t/* istanbul ignore else */ // Not testable in phantonJS\n\t\t\tif(Array.prototype.forEach && document.querySelectorAll){\n\t\t\t\tlog('Setting up location.hash handlers');\n\t\t\t\tbindAnchors();\n\t\t\t\tbindLocationHash();\n\t\t\t\tinitCheck();\n\t\t\t} else {\n\t\t\t\twarn('In page linking not fully supported in this browser! (See README.md for IE8 workaround)');\n\t\t\t}\n\t\t}\n\n\t\tif(inPageLinks.enable){\n\t\t\tenableInPageLinks();\n\t\t} else {\n\t\t\tlog('In page linking not enabled');\n\t\t}\n\n\t\treturn {\n\t\t\tfindTarget:findTarget\n\t\t};\n\t}\n\n\tfunction setupPublicMethods(){\n\t\tlog('Enable public methods');\n\n\t\twin.parentIFrame = {\n\n\t\t\tautoResize: function autoResizeF(resize){\n\t\t\t\tif (true === resize && false === autoResize) {\n\t\t\t\t\tautoResize=true;\n\t\t\t\t\tstartEventListeners();\n\t\t\t\t\t//sendSize('autoResize','Auto Resize enabled');\n\t\t\t\t} else if (false === resize && true === autoResize) {\n\t\t\t\t\tautoResize=false;\n\t\t\t\t\tstopEventListeners();\n\t\t\t\t}\n\n\t\t\t\treturn autoResize;\n\t\t\t},\n\n\t\t\tclose: function closeF(){\n\t\t\t\tsendMsg(0,0,'close');\n\t\t\t\tteardown();\n\t\t\t},\n\n\t\t\tgetId: function getIdF(){\n\t\t\t\treturn myID;\n\t\t\t},\n\n\t\t\tgetPageInfo: function getPageInfoF(callback){\n\t\t\t\tif ('function' === typeof callback){\n\t\t\t\t\tpageInfoCallback = callback;\n\t\t\t\t\tsendMsg(0,0,'pageInfo');\n\t\t\t\t} else {\n\t\t\t\t\tpageInfoCallback = function(){};\n\t\t\t\t\tsendMsg(0,0,'pageInfoStop');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tmoveToAnchor: function moveToAnchorF(hash){\n\t\t\t\tinPageLinks.findTarget(hash);\n\t\t\t},\n\n\t\t\treset: function resetF(){\n\t\t\t\tresetIFrame('parentIFrame.reset');\n\t\t\t},\n\n\t\t\tscrollTo: function scrollToF(x,y){\n\t\t\t\tsendMsg(y,x,'scrollTo'); // X&Y reversed at sendMsg uses height/width\n\t\t\t},\n\n\t\t\tscrollToOffset: function scrollToF(x,y){\n\t\t\t\tsendMsg(y,x,'scrollToOffset'); // X&Y reversed at sendMsg uses height/width\n\t\t\t},\n\n\t\t\tsendMessage: function sendMessageF(msg,targetOrigin){\n\t\t\t\tsendMsg(0,0,'message',JSON.stringify(msg),targetOrigin);\n\t\t\t},\n\n\t\t\tsetHeightCalculationMethod: function setHeightCalculationMethodF(heightCalculationMethod){\n\t\t\t\theightCalcMode = heightCalculationMethod;\n\t\t\t\tcheckHeightMode();\n\t\t\t},\n\n\t\t\tsetWidthCalculationMethod: function setWidthCalculationMethodF(widthCalculationMethod){\n\t\t\t\twidthCalcMode = widthCalculationMethod;\n\t\t\t\tcheckWidthMode();\n\t\t\t},\n\n\t\t\tsetTargetOrigin: function setTargetOriginF(targetOrigin){\n\t\t\t\tlog('Set targetOrigin: '+targetOrigin);\n\t\t\t\ttargetOriginDefault = targetOrigin;\n\t\t\t},\n\n\t\t\tsize: function sizeF(customHeight, customWidth){\n\t\t\t\tvar valString = ''+(customHeight?customHeight:'')+(customWidth?','+customWidth:'');\n\t\t\t\t//lockTrigger();\n\t\t\t\tsendSize('size','parentIFrame.size('+valString+')', customHeight, customWidth);\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction initInterval(){\n\t\tif ( 0 !== interval ){\n\t\t\tlog('setInterval: '+interval+'ms');\n\t\t\tintervalTimer = setInterval(function(){\n\t\t\t\tsendSize('interval','setInterval: '+interval);\n\t\t\t},Math.abs(interval));\n\t\t}\n\t}\n\n\t/* istanbul ignore next */  //Not testable in PhantomJS\n\tfunction setupBodyMutationObserver(){\n\t\tfunction addImageLoadListners(mutation) {\n\t\t\tfunction addImageLoadListener(element){\n\t\t\t\tif (false === element.complete) {\n\t\t\t\t\tlog('Attach listeners to ' + element.src);\n\t\t\t\t\telement.addEventListener('load', imageLoaded, false);\n\t\t\t\t\telement.addEventListener('error', imageError, false);\n\t\t\t\t\telements.push(element);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (mutation.type === 'attributes' && mutation.attributeName === 'src'){\n\t\t\t\taddImageLoadListener(mutation.target);\n\t\t\t} else if (mutation.type === 'childList'){\n\t\t\t\tArray.prototype.forEach.call(\n\t\t\t\t\tmutation.target.querySelectorAll('img'),\n\t\t\t\t\taddImageLoadListener\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tfunction removeFromArray(element){\n\t\t\telements.splice(elements.indexOf(element),1);\n\t\t}\n\n\t\tfunction removeImageLoadListener(element){\n\t\t\tlog('Remove listeners from ' + element.src);\n\t\t\telement.removeEventListener('load', imageLoaded, false);\n\t\t\telement.removeEventListener('error', imageError, false);\n\t\t\tremoveFromArray(element);\n\t\t}\n\n\t\tfunction imageEventTriggered(event,type,typeDesc){\n\t\t\tremoveImageLoadListener(event.target);\n\t\t\tsendSize(type, typeDesc + ': ' + event.target.src, undefined, undefined);\n\t\t}\n\n\t\tfunction imageLoaded(event) {\n\t\t\timageEventTriggered(event,'imageLoad','Image loaded');\n\t\t}\n\n\t\tfunction imageError(event) {\n\t\t\timageEventTriggered(event,'imageLoadFailed','Image load failed');\n\t\t}\n\n\t\tfunction mutationObserved(mutations) {\n\t\t\tsendSize('mutationObserver','mutationObserver: ' + mutations[0].target + ' ' + mutations[0].type);\n\n\t\t\t//Deal with WebKit asyncing image loading when tags are injected into the page\n\t\t\tmutations.forEach(addImageLoadListners);\n\t\t}\n\n\t\tfunction createMutationObserver(){\n\t\t\tvar\n\t\t\t\ttarget = document.querySelector('body'),\n\n\t\t\t\tconfig = {\n\t\t\t\t\tattributes            : true,\n\t\t\t\t\tattributeOldValue     : false,\n\t\t\t\t\tcharacterData         : true,\n\t\t\t\t\tcharacterDataOldValue : false,\n\t\t\t\t\tchildList             : true,\n\t\t\t\t\tsubtree               : true\n\t\t\t\t};\n\n\t\t\tobserver = new MutationObserver(mutationObserved);\n\n\t\t\tlog('Create body MutationObserver');\n\t\t\tobserver.observe(target, config);\n\n\t\t\treturn observer;\n\t\t}\n\n\t\tvar\n\t\t\telements         = [],\n\t\t\tMutationObserver = window.MutationObserver || window.WebKitMutationObserver,\n\t\t\tobserver         = createMutationObserver();\n\n\t\treturn {\n\t\t\tdisconnect: function (){\n\t\t\t\tif ('disconnect' in observer){\n\t\t\t\t\tlog('Disconnect body MutationObserver');\n\t\t\t\t\tobserver.disconnect();\n\t\t\t\t\telements.forEach(removeImageLoadListener);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction setupMutationObserver(){\n\t\tvar\tforceIntervalTimer = 0 > interval;\n\n\t\t/* istanbul ignore if */ // Not testable in PhantomJS\n\t\tif (window.MutationObserver || window.WebKitMutationObserver){\n\t\t\tif (forceIntervalTimer) {\n\t\t\t\tinitInterval();\n\t\t\t} else {\n\t\t\t\tbodyObserver = setupBodyMutationObserver();\n\t\t\t}\n\t\t} else {\n\t\t\tlog('MutationObserver not supported in this browser!');\n\t\t\tinitInterval();\n\t\t}\n\t}\n\n\n\t// document.documentElement.offsetHeight is not reliable, so\n\t// we have to jump through hoops to get a better value.\n\tfunction getComputedStyle(prop,el) {\n\t\t/* istanbul ignore next */  //Not testable in PhantomJS\n\t\tfunction convertUnitsToPxForIE8(value) {\n\t\t\tvar PIXEL = /^\\d+(px)?$/i;\n\n\t\t\tif (PIXEL.test(value)) {\n\t\t\t\treturn parseInt(value,base);\n\t\t\t}\n\n\t\t\tvar\n\t\t\t\tstyle = el.style.left,\n\t\t\t\truntimeStyle = el.runtimeStyle.left;\n\n\t\t\tel.runtimeStyle.left = el.currentStyle.left;\n\t\t\tel.style.left = value || 0;\n\t\t\tvalue = el.style.pixelLeft;\n\t\t\tel.style.left = style;\n\t\t\tel.runtimeStyle.left = runtimeStyle;\n\n\t\t\treturn value;\n\t\t}\n\n\t\tvar retVal = 0;\n\t\tel =  el || document.body;\n\n\t\t/* istanbul ignore else */ // Not testable in phantonJS\n\t\tif (('defaultView' in document) && ('getComputedStyle' in document.defaultView)) {\n\t\t\tretVal = document.defaultView.getComputedStyle(el, null);\n\t\t\tretVal = (null !== retVal) ? retVal[prop] : 0;\n\t\t} else {//IE8\n\t\t\tretVal =  convertUnitsToPxForIE8(el.currentStyle[prop]);\n\t\t}\n\n\t\treturn parseInt(retVal,base);\n\t}\n\n\tfunction chkEventThottle(timer){\n\t\tif(timer > throttledTimer/2){\n\t\t\tthrottledTimer = 2*timer;\n\t\t\tlog('Event throttle increased to ' + throttledTimer + 'ms');\n\t\t}\n\t}\n\n\t//Idea from https://github.com/guardian/iframe-messenger\n\tfunction getMaxElement(side,elements) {\n\t\tvar\n\t\t\telementsLength = elements.length,\n\t\t\telVal          = 0,\n\t\t\tmaxVal         = 0,\n\t\t\tSide           = capitalizeFirstLetter(side),\n\t\t\ttimer          = getNow();\n\n\t\tfor (var i = 0; i < elementsLength; i++) {\n\t\t\telVal = elements[i].getBoundingClientRect()[side] + getComputedStyle('margin'+Side,elements[i]);\n\t\t\tif (elVal > maxVal) {\n\t\t\t\tmaxVal = elVal;\n\t\t\t}\n\t\t}\n\n\t\ttimer = getNow() - timer;\n\n\t\tlog('Parsed '+elementsLength+' HTML elements');\n\t\tlog('Element position calculated in ' + timer + 'ms');\n\n\t\tchkEventThottle(timer);\n\n\t\treturn maxVal;\n\t}\n\n\tfunction getAllMeasurements(dimention){\n\t\treturn [\n\t\t\tdimention.bodyOffset(),\n\t\t\tdimention.bodyScroll(),\n\t\t\tdimention.documentElementOffset(),\n\t\t\tdimention.documentElementScroll()\n\t\t];\n\t}\n\n\tfunction getTaggedElements(side,tag){\n\t\tfunction noTaggedElementsFound(){\n\t\t\twarn('No tagged elements ('+tag+') found on page');\n\t\t\treturn height; //current height\n\t\t}\n\n\t\tvar elements = document.querySelectorAll('['+tag+']');\n\n\t\treturn 0 === elements.length ?  noTaggedElementsFound() : getMaxElement(side,elements);\n\t}\n\n\tfunction getAllElements(){\n\t\treturn document.querySelectorAll('body *');\n\t}\n\n\tvar\n\t\tgetHeight = {\n\t\t\tbodyOffset: function getBodyOffsetHeight(){\n\t\t\t\treturn  document.body.offsetHeight + getComputedStyle('marginTop') + getComputedStyle('marginBottom');\n\t\t\t},\n\n\t\t\toffset: function(){\n\t\t\t\treturn getHeight.bodyOffset(); //Backwards compatability\n\t\t\t},\n\n\t\t\tbodyScroll: function getBodyScrollHeight(){\n\t\t\t\treturn document.body.scrollHeight;\n\t\t\t},\n\n\t\t\tcustom: function getCustomWidth(){\n\t\t\t\treturn customCalcMethods.height();\n\t\t\t},\n\n\t\t\tdocumentElementOffset: function getDEOffsetHeight(){\n\t\t\t\treturn document.documentElement.offsetHeight;\n\t\t\t},\n\n\t\t\tdocumentElementScroll: function getDEScrollHeight(){\n\t\t\t\treturn document.documentElement.scrollHeight;\n\t\t\t},\n\n\t\t\tmax: function getMaxHeight(){\n\t\t\t\treturn Math.max.apply(null,getAllMeasurements(getHeight));\n\t\t\t},\n\n\t\t\tmin: function getMinHeight(){\n\t\t\t\treturn Math.min.apply(null,getAllMeasurements(getHeight));\n\t\t\t},\n\n\t\t\tgrow: function growHeight(){\n\t\t\t\treturn getHeight.max(); //Run max without the forced downsizing\n\t\t\t},\n\n\t\t\tlowestElement: function getBestHeight(){\n\t\t\t\treturn Math.max(getHeight.bodyOffset(), getMaxElement('bottom',getAllElements()));\n\t\t\t},\n\n\t\t\ttaggedElement: function getTaggedElementsHeight(){\n\t\t\t\treturn getTaggedElements('bottom','data-iframe-height');\n\t\t\t}\n\t\t},\n\n\t\tgetWidth = {\n\t\t\tbodyScroll: function getBodyScrollWidth(){\n\t\t\t\treturn document.body.scrollWidth;\n\t\t\t},\n\n\t\t\tbodyOffset: function getBodyOffsetWidth(){\n\t\t\t\treturn document.body.offsetWidth;\n\t\t\t},\n\n\t\t\tcustom: function getCustomWidth(){\n\t\t\t\treturn customCalcMethods.width();\n\t\t\t},\n\n\t\t\tdocumentElementScroll: function getDEScrollWidth(){\n\t\t\t\treturn document.documentElement.scrollWidth;\n\t\t\t},\n\n\t\t\tdocumentElementOffset: function getDEOffsetWidth(){\n\t\t\t\treturn document.documentElement.offsetWidth;\n\t\t\t},\n\n\t\t\tscroll: function getMaxWidth(){\n\t\t\t\treturn Math.max(getWidth.bodyScroll(), getWidth.documentElementScroll());\n\t\t\t},\n\n\t\t\tmax: function getMaxWidth(){\n\t\t\t\treturn Math.max.apply(null,getAllMeasurements(getWidth));\n\t\t\t},\n\n\t\t\tmin: function getMinWidth(){\n\t\t\t\treturn Math.min.apply(null,getAllMeasurements(getWidth));\n\t\t\t},\n\n\t\t\trightMostElement: function rightMostElement(){\n\t\t\t\treturn getMaxElement('right', getAllElements());\n\t\t\t},\n\n\t\t\ttaggedElement: function getTaggedElementsWidth(){\n\t\t\t\treturn getTaggedElements('right', 'data-iframe-width');\n\t\t\t}\n\t\t};\n\n\n\tfunction sizeIFrame(triggerEvent, triggerEventDesc, customHeight, customWidth){\n\n\t\tfunction resizeIFrame(){\n\t\t\theight = currentHeight;\n\t\t\twidth  = currentWidth;\n\n\t\t\tsendMsg(height,width,triggerEvent);\n\t\t}\n\n\t\tfunction isSizeChangeDetected(){\n\t\t\tfunction checkTolarance(a,b){\n\t\t\t\tvar retVal = Math.abs(a-b) <= tolerance;\n\t\t\t\treturn !retVal;\n\t\t\t}\n\n\t\t\tcurrentHeight = (undefined !== customHeight)  ? customHeight : getHeight[heightCalcMode]();\n\t\t\tcurrentWidth  = (undefined !== customWidth )  ? customWidth  : getWidth[widthCalcMode]();\n\n\t\t\treturn\tcheckTolarance(height,currentHeight) || (calculateWidth && checkTolarance(width,currentWidth));\n\t\t}\n\n\t\tfunction isForceResizableEvent(){\n\t\t\treturn !(triggerEvent in {'init':1,'interval':1,'size':1});\n\t\t}\n\n\t\tfunction isForceResizableCalcMode(){\n\t\t\treturn (heightCalcMode in resetRequiredMethods) || (calculateWidth && widthCalcMode in resetRequiredMethods);\n\t\t}\n\n\t\tfunction logIgnored(){\n\t\t\tlog('No change in size detected');\n\t\t}\n\n\t\tfunction checkDownSizing(){\n\t\t\tif (isForceResizableEvent() && isForceResizableCalcMode()){\n\t\t\t\tresetIFrame(triggerEventDesc);\n\t\t\t} else if (!(triggerEvent in {'interval':1})){\n\t\t\t\tlogIgnored();\n\t\t\t}\n\t\t}\n\n\t\tvar\tcurrentHeight,currentWidth;\n\n\t\tif (isSizeChangeDetected() || 'init' === triggerEvent){\n\t\t\tlockTrigger();\n\t\t\tresizeIFrame();\n\t\t} else {\n\t\t\tcheckDownSizing();\n\t\t}\n\t}\n\n\tvar sizeIFrameThrottled = throttle(sizeIFrame);\n\n\tfunction sendSize(triggerEvent, triggerEventDesc, customHeight, customWidth){\n\t\tfunction recordTrigger(){\n\t\t\tif (!(triggerEvent in {'reset':1,'resetPage':1,'init':1})){\n\t\t\t\tlog( 'Trigger event: ' + triggerEventDesc );\n\t\t\t}\n\t\t}\n\n\t\tfunction isDoubleFiredEvent(){\n\t\t\treturn  triggerLocked && (triggerEvent in doubleEventList);\n\t\t}\n\n\t\tif (!isDoubleFiredEvent()){\n\t\t\trecordTrigger();\n\t\t\tsizeIFrameThrottled(triggerEvent, triggerEventDesc, customHeight, customWidth);\n\t\t} else {\n\t\t\tlog('Trigger event cancelled: '+triggerEvent);\n\t\t}\n\t}\n\n\tfunction lockTrigger(){\n\t\tif (!triggerLocked){\n\t\t\ttriggerLocked = true;\n\t\t\tlog('Trigger event lock on');\n\t\t}\n\t\tclearTimeout(triggerLockedTimer);\n\t\ttriggerLockedTimer = setTimeout(function(){\n\t\t\ttriggerLocked = false;\n\t\t\tlog('Trigger event lock off');\n\t\t\tlog('--');\n\t\t},eventCancelTimer);\n\t}\n\n\tfunction triggerReset(triggerEvent){\n\t\theight = getHeight[heightCalcMode]();\n\t\twidth  = getWidth[widthCalcMode]();\n\n\t\tsendMsg(height,width,triggerEvent);\n\t}\n\n\tfunction resetIFrame(triggerEventDesc){\n\t\tvar hcm = heightCalcMode;\n\t\theightCalcMode = heightCalcModeDefault;\n\n\t\tlog('Reset trigger event: ' + triggerEventDesc);\n\t\tlockTrigger();\n\t\ttriggerReset('reset');\n\n\t\theightCalcMode = hcm;\n\t}\n\n\tfunction sendMsg(height,width,triggerEvent,msg,targetOrigin){\n\t\tfunction setTargetOrigin(){\n\t\t\tif (undefined === targetOrigin){\n\t\t\t\ttargetOrigin = targetOriginDefault;\n\t\t\t} else {\n\t\t\t\tlog('Message targetOrigin: '+targetOrigin);\n\t\t\t}\n\t\t}\n\n\t\tfunction sendToParent(){\n\t\t\tvar\n\t\t\t\tsize  = height + ':' + width,\n\t\t\t\tmessage = myID + ':' +  size + ':' + triggerEvent + (undefined !== msg ? ':' + msg : '');\n\n\t\t\tlog('Sending message to host page (' + message + ')');\n\t\t\ttarget.postMessage( msgID + message, targetOrigin);\n\t\t}\n\n\t\tif(true === sendPermit){\n\t\t\tsetTargetOrigin();\n\t\t\tsendToParent();\n\t\t}\n\t}\n\n\tfunction receiver(event) {\n\t\tfunction isMessageForUs(){\n\t\t\treturn msgID === (''+event.data).substr(0,msgIdLen); //''+ Protects against non-string messages\n\t\t}\n\n\t\tfunction initFromParent(){\n\t\t\tfunction fireInit(){\n\t\t\t\tinitMsg = event.data;\n\t\t\t\ttarget  = event.source;\n\n\t\t\t\tinit();\n\t\t\t\tfirstRun = false;\n\t\t\t\tsetTimeout(function(){ initLock = false;},eventCancelTimer);\n\t\t\t}\n\n\t\t\tif (document.body){\n\t\t\t\tfireInit();\n\t\t\t} else {\n\t\t\t\tlog('Waiting for page ready');\n\t\t\t\taddEventListener(window,'readystatechange',initFromParent);\n\t\t\t}\n\t\t}\n\n\t\tfunction resetFromParent(){\n\t\t\tif (!initLock){\n\t\t\t\tlog('Page size reset by host page');\n\t\t\t\ttriggerReset('resetPage');\n\t\t\t} else {\n\t\t\t\tlog('Page reset ignored by init');\n\t\t\t}\n\t\t}\n\n\t\tfunction resizeFromParent(){\n\t\t\tsendSize('resizeParent','Parent window requested size check');\n\t\t}\n\n\t\tfunction moveToAnchor(){\n\t\t\tvar anchor = getData();\n\t\t\tinPageLinks.findTarget(anchor);\n\t\t}\n\n\t\tfunction getMessageType(){\n\t\t\treturn event.data.split(']')[1].split(':')[0];\n\t\t}\n\n\t\tfunction getData(){\n\t\t\treturn event.data.substr(event.data.indexOf(':')+1);\n\t\t}\n\n\t\tfunction isMiddleTier(){\n\t\t\treturn ('iFrameResize' in window);\n\t\t}\n\n\t\tfunction messageFromParent(){\n\t\t\tvar msgBody = getData();\n\n\t\t\tlog('MessageCallback called from parent: ' + msgBody );\n\t\t\tmessageCallback(JSON.parse(msgBody));\n\t\t\tlog(' --');\n\t\t}\n\n\t\tfunction pageInfoFromParent(){\n\t\t\tvar msgBody = getData();\n\t\t\tlog('PageInfoFromParent called from parent: ' + msgBody );\n\t\t\tpageInfoCallback(JSON.parse(msgBody));\n\t\t\tlog(' --');\n\t\t}\n\n\t\tfunction isInitMsg(){\n\t\t\t//Test if this message is from a child below us. This is an ugly test, however, updating\n\t\t\t//the message format would break backwards compatibity.\n\t\t\treturn event.data.split(':')[2] in {'true':1,'false':1};\n\t\t}\n\n\t\tfunction callFromParent(){\n\t\t\tswitch (getMessageType()){\n\t\t\tcase 'reset':\n\t\t\t\tresetFromParent();\n\t\t\t\tbreak;\n\t\t\tcase 'resize':\n\t\t\t\tresizeFromParent();\n\t\t\t\tbreak;\n\t\t\tcase 'inPageLink':\n\t\t\tcase 'moveToAnchor':\n\t\t\t\tmoveToAnchor();\n\t\t\t\tbreak;\n\t\t\tcase 'message':\n\t\t\t\tmessageFromParent();\n\t\t\t\tbreak;\n\t\t\tcase 'pageInfo':\n\t\t\t\tpageInfoFromParent();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif (!isMiddleTier() && !isInitMsg()){\n\t\t\t\t\twarn('Unexpected message ('+event.data+')');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction processMessage(){\n\t\t\tif (false === firstRun) {\n\t\t\t\tcallFromParent();\n\t\t\t} else if (isInitMsg()) {\n\t\t\t\tinitFromParent();\n\t\t\t} else {\n\t\t\t\tlog('Ignored message of type \"' + getMessageType() + '\". Received before initialization.');\n\t\t\t}\n\t\t}\n\n\t\tif (isMessageForUs()){\n\t\t\tprocessMessage();\n\t\t}\n\t}\n\n\t//Normally the parent kicks things off when it detects the iFrame has loaded.\n\t//If this script is async-loaded, then tell parent page to retry init.\n\tfunction chkLateLoaded(){\n\t\tif('loading' !== document.readyState){\n\t\t\twindow.parent.postMessage('[iFrameResizerChild]Ready','*');\n\t\t}\n\t}\n\n\taddEventListener(window, 'message', receiver);\n\tchkLateLoaded();\n\n\t\n\n})(window || {});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/iframe-resizer/js/iframeResizer.contentWindow.js\n ** module id = 2\n ** module chunks = 0\n **/","/*\n * File: iframeResizer.js\n * Desc: Force iframes to size to content.\n * Requires: iframeResizer.contentWindow.js to be loaded into the target frame.\n * Doc: https://github.com/davidjbradshaw/iframe-resizer\n * Author: David J. Bradshaw - dave@bradshaw.net\n * Contributor: Jure Mav - jure.mav@gmail.com\n * Contributor: Reed Dadoune - reed@dadoune.com\n */\n\n\n;(function(window) {\n\t'use strict';\n\n\tvar\n\t\tcount                 = 0,\n\t\tlogEnabled            = false,\n\t\thiddenCheckEnabled    = false,\n\t\tmsgHeader             = 'message',\n\t\tmsgHeaderLen          = msgHeader.length,\n\t\tmsgId                 = '[iFrameSizer]', //Must match iframe msg ID\n\t\tmsgIdLen              = msgId.length,\n\t\tpagePosition          = null,\n\t\trequestAnimationFrame = window.requestAnimationFrame,\n\t\tresetRequiredMethods  = {max:1,scroll:1,bodyScroll:1,documentElementScroll:1},\n\t\tsettings              = {},\n\t\ttimer                 = null,\n\t\tlogId                 = 'Host Page',\n\n\t\tdefaults              = {\n\t\t\tautoResize                : true,\n\t\t\tbodyBackground            : null,\n\t\t\tbodyMargin                : null,\n\t\t\tbodyMarginV1              : 8,\n\t\t\tbodyPadding               : null,\n\t\t\tcheckOrigin               : true,\n\t\t\tinPageLinks               : false,\n\t\t\tenablePublicMethods       : true,\n\t\t\theightCalculationMethod   : 'bodyOffset',\n\t\t\tid                        : 'iFrameResizer',\n\t\t\tinterval                  : 32,\n\t\t\tlog                       : false,\n\t\t\tmaxHeight                 : Infinity,\n\t\t\tmaxWidth                  : Infinity,\n\t\t\tminHeight                 : 0,\n\t\t\tminWidth                  : 0,\n\t\t\tresizeFrom                : 'parent',\n\t\t\tscrolling                 : false,\n\t\t\tsizeHeight                : true,\n\t\t\tsizeWidth                 : false,\n\t\t\ttolerance                 : 0,\n\t\t\twidthCalculationMethod    : 'scroll',\n\t\t\tclosedCallback            : function(){},\n\t\t\tinitCallback              : function(){},\n\t\t\tmessageCallback           : function(){warn('MessageCallback function not defined');},\n\t\t\tresizedCallback           : function(){},\n\t\t\tscrollCallback            : function(){return true;}\n\t\t};\n\n\tfunction addEventListener(obj,evt,func){\n\t\t/* istanbul ignore else */ // Not testable in PhantonJS\n\t\tif ('addEventListener' in window){\n\t\t\tobj.addEventListener(evt,func, false);\n\t\t} else if ('attachEvent' in window){//IE\n\t\t\tobj.attachEvent('on'+evt,func);\n\t\t}\n\t}\n\n\tfunction removeEventListener(el,evt,func){\n\t\t/* istanbul ignore else */ // Not testable in phantonJS\n\t\tif ('removeEventListener' in window){\n\t\t\tel.removeEventListener(evt,func, false);\n\t\t} else if ('detachEvent' in window){ //IE\n\t\t\tel.detachEvent('on'+evt,func);\n\t\t}\n\t}\n\n\tfunction setupRequestAnimationFrame(){\n\t\tvar\n\t\t\tvendors = ['moz', 'webkit', 'o', 'ms'],\n\t\t\tx;\n\n\t\t// Remove vendor prefixing if prefixed and break early if not\n\t\tfor (x = 0; x < vendors.length && !requestAnimationFrame; x += 1) {\n\t\t\trequestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n\t\t}\n\n\t\tif (!(requestAnimationFrame)){\n\t\t\tlog('setup','RequestAnimationFrame not supported');\n\t\t}\n\t}\n\n\tfunction getMyID(iframeId){\n\t\tvar retStr = 'Host page: '+iframeId;\n\n\t\tif (window.top!==window.self){\n\t\t\tif (window.parentIFrame && window.parentIFrame.getId){\n\t\t\t\tretStr = window.parentIFrame.getId()+': '+iframeId;\n\t\t\t} else {\n\t\t\t\tretStr = 'Nested host page: '+iframeId;\n\t\t\t}\n\t\t}\n\n\t\treturn retStr;\n\t}\n\n\tfunction formatLogHeader(iframeId){\n\t\treturn msgId + '[' + getMyID(iframeId) + ']';\n\t}\n\n\tfunction isLogEnabled(iframeId){\n\t\treturn settings[iframeId] ? settings[iframeId].log : logEnabled;\n\t}\n\n\tfunction log(iframeId,msg){\n\t\toutput('log',iframeId,msg,isLogEnabled(iframeId));\n\t}\n\n\tfunction info(iframeId,msg){\n\t\toutput('info',iframeId,msg,isLogEnabled(iframeId));\n\t}\n\n\tfunction warn(iframeId,msg){\n\t\toutput('warn',iframeId,msg,true);\n\t}\n\n\tfunction output(type,iframeId,msg,enabled){\n\t\tif (true === enabled && 'object' === typeof window.console){\n\t\t\tconsole[type](formatLogHeader(iframeId),msg);\n\t\t}\n\t}\n\n\tfunction iFrameListener(event){\n\t\tfunction resizeIFrame(){\n\t\t\tfunction resize(){\n\t\t\t\tsetSize(messageData);\n\t\t\t\tsetPagePosition(iframeId);\n\t\t\t}\n\n\t\t\tensureInRange('Height');\n\t\t\tensureInRange('Width');\n\n\t\t\tsyncResize(resize,messageData,'init');\n\t\t}\n\n\t\tfunction processMsg(){\n\t\t\tvar data = msg.substr(msgIdLen).split(':');\n\n\t\t\treturn {\n\t\t\t\tiframe: settings[data[0]].iframe,\n\t\t\t\tid:     data[0],\n\t\t\t\theight: data[1],\n\t\t\t\twidth:  data[2],\n\t\t\t\ttype:   data[3]\n\t\t\t};\n\t\t}\n\n\t\tfunction ensureInRange(Dimension){\n\t\t\tvar\n\t\t\t\tmax  = Number(settings[iframeId]['max' + Dimension]),\n\t\t\t\tmin  = Number(settings[iframeId]['min' + Dimension]),\n\t\t\t\tdimension = Dimension.toLowerCase(),\n\t\t\t\tsize = Number(messageData[dimension]);\n\n\t\t\tlog(iframeId,'Checking ' + dimension + ' is in range ' + min + '-' + max);\n\n\t\t\tif (size<min) {\n\t\t\t\tsize=min;\n\t\t\t\tlog(iframeId,'Set ' + dimension + ' to min value');\n\t\t\t}\n\n\t\t\tif (size>max) {\n\t\t\t\tsize=max;\n\t\t\t\tlog(iframeId,'Set ' + dimension + ' to max value');\n\t\t\t}\n\n\t\t\tmessageData[dimension] = '' + size;\n\t\t}\n\n\n\t\tfunction isMessageFromIFrame(){\n\t\t\tfunction checkAllowedOrigin(){\n\t\t\t\tfunction checkList(){\n\t\t\t\t\tvar\n\t\t\t\t\t\ti = 0,\n\t\t\t\t\t\tretCode = false;\n\n\t\t\t\t\tlog(iframeId,'Checking connection is from allowed list of origins: ' + checkOrigin);\n\n\t\t\t\t\tfor (; i < checkOrigin.length; i++) {\n\t\t\t\t\t\tif (checkOrigin[i] === origin) {\n\t\t\t\t\t\t\tretCode = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn retCode;\n\t\t\t\t}\n\n\t\t\t\tfunction checkSingle(){\n\t\t\t\t\tvar remoteHost  = settings[iframeId].remoteHost;\n\t\t\t\t\tlog(iframeId,'Checking connection is from: '+remoteHost);\n\t\t\t\t\treturn origin === remoteHost;\n\t\t\t\t}\n\n\t\t\t\treturn checkOrigin.constructor === Array ? checkList() : checkSingle();\n\t\t\t}\n\n\t\t\tvar\n\t\t\t\torigin      = event.origin,\n\t\t\t\tcheckOrigin = settings[iframeId].checkOrigin;\n\n\t\t\tif (checkOrigin && (''+origin !== 'null') && !checkAllowedOrigin()) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t'Unexpected message received from: ' + origin +\n\t\t\t\t\t' for ' + messageData.iframe.id +\n\t\t\t\t\t'. Message was: ' + event.data +\n\t\t\t\t\t'. This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.'\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\tfunction isMessageForUs(){\n\t\t\treturn msgId === (('' + msg).substr(0,msgIdLen)) && (msg.substr(msgIdLen).split(':')[0] in settings); //''+Protects against non-string msg\n\t\t}\n\n\t\tfunction isMessageFromMetaParent(){\n\t\t\t//Test if this message is from a parent above us. This is an ugly test, however, updating\n\t\t\t//the message format would break backwards compatibity.\n\t\t\tvar retCode = messageData.type in {'true':1,'false':1,'undefined':1};\n\n\t\t\tif (retCode){\n\t\t\t\tlog(iframeId,'Ignoring init message from meta parent page');\n\t\t\t}\n\n\t\t\treturn retCode;\n\t\t}\n\n\t\tfunction getMsgBody(offset){\n\t\t\treturn msg.substr(msg.indexOf(':')+msgHeaderLen+offset);\n\t\t}\n\n\t\tfunction forwardMsgFromIFrame(msgBody){\n\t\t\tlog(iframeId,'MessageCallback passed: {iframe: '+ messageData.iframe.id + ', message: ' + msgBody + '}');\n\t\t\tcallback('messageCallback',{\n\t\t\t\tiframe: messageData.iframe,\n\t\t\t\tmessage: JSON.parse(msgBody)\n\t\t\t});\n\t\t\tlog(iframeId,'--');\n\t\t}\n\n\t\tfunction getPageInfo(){\n\t\t\tvar\n\t\t\t\tbodyPosition   = document.body.getBoundingClientRect(),\n\t\t\t\tiFramePosition = messageData.iframe.getBoundingClientRect();\n\n\t\t\treturn JSON.stringify({\n\t\t\t\tiframeHeight: iFramePosition.height,\n\t\t\t\tiframeWidth:  iFramePosition.width,\n\t\t\t\tclientHeight: Math.max(document.documentElement.clientHeight, window.innerHeight || 0),\n\t\t\t\tclientWidth:  Math.max(document.documentElement.clientWidth,  window.innerWidth  || 0),\n\t\t\t\toffsetTop:    parseInt(iFramePosition.top  - bodyPosition.top,  10),\n\t\t\t\toffsetLeft:   parseInt(iFramePosition.left - bodyPosition.left, 10),\n\t\t\t\tscrollTop:    window.pageYOffset,\n\t\t\t\tscrollLeft:   window.pageXOffset\n\t\t\t});\n\t\t}\n\n\t\tfunction sendPageInfoToIframe(iframe,iframeId){\n\t\t\tfunction debouncedTrigger(){\n\t\t\t\ttrigger(\n\t\t\t\t\t'Send Page Info',\n\t\t\t\t\t'pageInfo:' + getPageInfo(), \n\t\t\t\t\tiframe, \n\t\t\t\t\tiframeId\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tdebouce(debouncedTrigger,32);\n\t\t}\n\n\n\t\tfunction startPageInfoMonitor(){\n\t\t\tfunction setListener(type,func){\n\t\t\t\tfunction sendPageInfo(){\n\t\t\t\t\tif (settings[id]){\n\t\t\t\t\t\tsendPageInfoToIframe(settings[id].iframe,id);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstop();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t['scroll','resize'].forEach(function(evt){\n\t\t\t\t\tlog(id, type +  evt + ' listener for sendPageInfo');\n\t\t\t\t\tfunc(window,evt,sendPageInfo);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction stop(){\n\t\t\t\tsetListener('Remove ', removeEventListener);\n\t\t\t}\n\n\t\t\tfunction start(){\n\t\t\t\tsetListener('Add ', addEventListener);\n\t\t\t}\n\t\t\t\n\t\t\tvar id = iframeId; //Create locally scoped copy of iFrame ID\n\n\t\t\tstart();\n\n\t\t\tsettings[id].stopPageInfo = stop;\n\t\t}\n\n\t\tfunction stopPageInfoMonitor(){\n\t\t\tif (settings[iframeId] && settings[iframeId].stopPageInfo){\n\t\t\t\tsettings[iframeId].stopPageInfo();\n\t\t\t\tdelete settings[iframeId].stopPageInfo;\n\t\t\t}\n\t\t}\n\n\t\tfunction checkIFrameExists(){\n\t\t\tvar retBool = true;\n\n\t\t\tif (null === messageData.iframe) {\n\t\t\t\twarn(iframeId,'IFrame ('+messageData.id+') not found');\n\t\t\t\tretBool = false;\n\t\t\t}\n\t\t\treturn retBool;\n\t\t}\n\n\t\tfunction getElementPosition(target){\n\t\t\tvar iFramePosition = target.getBoundingClientRect();\n\n\t\t\tgetPagePosition(iframeId);\n\n\t\t\treturn {\n\t\t\t\tx: Math.floor( Number(iFramePosition.left) + Number(pagePosition.x) ),\n\t\t\t\ty: Math.floor( Number(iFramePosition.top)  + Number(pagePosition.y) )\n\t\t\t};\n\t\t}\n\n\t\tfunction scrollRequestFromChild(addOffset){\n\t\t\t/* istanbul ignore next */  //Not testable in Karma\n\t\t\tfunction reposition(){\n\t\t\t\tpagePosition = newPosition;\n\t\t\t\tscrollTo();\n\t\t\t\tlog(iframeId,'--');\n\t\t\t}\n\n\t\t\tfunction calcOffset(){\n\t\t\t\treturn {\n\t\t\t\t\tx: Number(messageData.width) + offset.x,\n\t\t\t\t\ty: Number(messageData.height) + offset.y\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfunction scrollParent(){\n\t\t\t\tif (window.parentIFrame){\n\t\t\t\t\twindow.parentIFrame['scrollTo'+(addOffset?'Offset':'')](newPosition.x,newPosition.y);\n\t\t\t\t} else {\n\t\t\t\t\twarn(iframeId,'Unable to scroll to requested position, window.parentIFrame not found');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar\n\t\t\t\toffset = addOffset ? getElementPosition(messageData.iframe) : {x:0,y:0},\n\t\t\t\tnewPosition = calcOffset();\n\n\t\t\tlog(iframeId,'Reposition requested from iFrame (offset x:'+offset.x+' y:'+offset.y+')');\n\n\t\t\tif(window.top!==window.self){\n\t\t\t\tscrollParent();\n\t\t\t} else {\n\t\t\t\treposition();\n\t\t\t}\n\t\t}\n\n\t\tfunction scrollTo(){\n\t\t\tif (false !== callback('scrollCallback',pagePosition)){\n\t\t\t\tsetPagePosition(iframeId);\n\t\t\t} else {\n\t\t\t\tunsetPagePosition();\n\t\t\t}\n\t\t}\n\n\t\tfunction findTarget(location){\n\t\t\tfunction jumpToTarget(){\n\t\t\t\tvar jumpPosition = getElementPosition(target);\n\n\t\t\t\tlog(iframeId,'Moving to in page link (#'+hash+') at x: '+jumpPosition.x+' y: '+jumpPosition.y);\n\t\t\t\tpagePosition = {\n\t\t\t\t\tx: jumpPosition.x,\n\t\t\t\t\ty: jumpPosition.y\n\t\t\t\t};\n\n\t\t\t\tscrollTo();\n\t\t\t\tlog(iframeId,'--');\n\t\t\t}\n\n\t\t\tfunction jumpToParent(){\n\t\t\t\tif (window.parentIFrame){\n\t\t\t\t\twindow.parentIFrame.moveToAnchor(hash);\n\t\t\t\t} else {\n\t\t\t\t\tlog(iframeId,'In page link #'+hash+' not found and window.parentIFrame not found');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar\n\t\t\t\thash     = location.split('#')[1] || '',\n\t\t\t\thashData = decodeURIComponent(hash),\n\t\t\t\ttarget   = document.getElementById(hashData) || document.getElementsByName(hashData)[0];\n\n\t\t\tif (target){\n\t\t\t\tjumpToTarget();\n\t\t\t} else if(window.top!==window.self){\n\t\t\t\tjumpToParent();\n\t\t\t} else {\n\t\t\t\tlog(iframeId,'In page link #'+hash+' not found');\n\t\t\t}\n\t\t}\n\n\t\tfunction callback(funcName,val){\n\t\t\treturn chkCallback(iframeId,funcName,val);\n\t\t}\n\n\t\tfunction actionMsg(){\n\n\t\t\tif(settings[iframeId].firstRun) firstRun();\n\n\t\t\tswitch(messageData.type){\n\t\t\tcase 'close':\n\t\t\t\tcloseIFrame(messageData.iframe);\n\t\t\t\tbreak;\n\t\t\tcase 'message':\n\t\t\t\tforwardMsgFromIFrame(getMsgBody(6));\n\t\t\t\tbreak;\n\t\t\tcase 'scrollTo':\n\t\t\t\tscrollRequestFromChild(false);\n\t\t\t\tbreak;\n\t\t\tcase 'scrollToOffset':\n\t\t\t\tscrollRequestFromChild(true);\n\t\t\t\tbreak;\n\t\t\tcase 'pageInfo':\n\t\t\t\tsendPageInfoToIframe(settings[iframeId].iframe,iframeId);\n\t\t\t\tstartPageInfoMonitor();\n\t\t\t\tbreak;\n\t\t\tcase 'pageInfoStop':\n\t\t\t\tstopPageInfoMonitor();\n\t\t\t\tbreak;\n\t\t\tcase 'inPageLink':\n\t\t\t\tfindTarget(getMsgBody(9));\n\t\t\t\tbreak;\n\t\t\tcase 'reset':\n\t\t\t\tresetIFrame(messageData);\n\t\t\t\tbreak;\n\t\t\tcase 'init':\n\t\t\t\tresizeIFrame();\n\t\t\t\tcallback('initCallback',messageData.iframe);\n\t\t\t\tcallback('resizedCallback',messageData);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tresizeIFrame();\n\t\t\t\tcallback('resizedCallback',messageData);\n\t\t\t}\n\t\t}\n\n\t\tfunction hasSettings(iframeId){\n\t\t\tvar retBool = true;\n\n\t\t\tif (!settings[iframeId]){\n\t\t\t\tretBool = false;\n\t\t\t\twarn(messageData.type + ' No settings for ' + iframeId + '. Message was: ' + msg);\n\t\t\t}\n\n\t\t\treturn retBool;\n\t\t}\n\n\t\tfunction iFrameReadyMsgReceived(){\n\t\t\tfor (var iframeId in settings){\n\t\t\t\ttrigger('iFrame requested init',createOutgoingMsg(iframeId),document.getElementById(iframeId),iframeId);\n\t\t\t}\n\t\t}\n\n\t\tfunction firstRun() {\n\t\t\tsettings[iframeId].firstRun = false;\n\t\t}\n\n\t\tvar\n\t\t\tmsg = event.data,\n\t\t\tmessageData = {},\n\t\t\tiframeId = null;\n\n\t\tif('[iFrameResizerChild]Ready' === msg){\n\t\t\tiFrameReadyMsgReceived();\n\t\t} else if (isMessageForUs()){\n\t\t\tmessageData = processMsg();\n\t\t\tiframeId    = logId = messageData.id;\n\n\t\t\tif (!isMessageFromMetaParent() && hasSettings(iframeId)){\n\t\t\t\tlog(iframeId,'Received: '+msg);\n\n\t\t\t\tif ( checkIFrameExists() && isMessageFromIFrame() ){\n\t\t\t\t\tactionMsg();\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tinfo(iframeId,'Ignored: '+msg);\n\t\t}\n\n\t}\n\n\n\tfunction chkCallback(iframeId,funcName,val){\n\t\tvar\n\t\t\tfunc = null,\n\t\t\tretVal = null;\n\n\t\tif(settings[iframeId]){\n\t\t\tfunc = settings[iframeId][funcName];\n\n\t\t\tif( 'function' === typeof func){\n\t\t\t\tretVal = func(val);\n\t\t\t} else {\n\t\t\t\tthrow new TypeError(funcName+' on iFrame['+iframeId+'] is not a function');\n\t\t\t}\n\t\t}\n\n\t\treturn retVal;\n\t}\n\n\tfunction closeIFrame(iframe){\n\t\tvar iframeId = iframe.id;\n\n\t\tlog(iframeId,'Removing iFrame: '+iframeId);\n\t\tiframe.parentNode.removeChild(iframe);\n\t\tchkCallback(iframeId,'closedCallback',iframeId);\n\t\tlog(iframeId,'--');\n\t\tdelete settings[iframeId];\n\t}\n\n\tfunction getPagePosition(iframeId){\n\t\tif(null === pagePosition){\n\t\t\tpagePosition = {\n\t\t\t\tx: (window.pageXOffset !== undefined) ? window.pageXOffset : document.documentElement.scrollLeft,\n\t\t\t\ty: (window.pageYOffset !== undefined) ? window.pageYOffset : document.documentElement.scrollTop\n\t\t\t};\n\t\t\tlog(iframeId,'Get page position: '+pagePosition.x+','+pagePosition.y);\n\t\t}\n\t}\n\n\tfunction setPagePosition(iframeId){\n\t\tif(null !== pagePosition){\n\t\t\twindow.scrollTo(pagePosition.x,pagePosition.y);\n\t\t\tlog(iframeId,'Set page position: '+pagePosition.x+','+pagePosition.y);\n\t\t\tunsetPagePosition();\n\t\t}\n\t}\n\n\tfunction unsetPagePosition(){\n\t\tpagePosition = null;\n\t}\n\n\tfunction resetIFrame(messageData){\n\t\tfunction reset(){\n\t\t\tsetSize(messageData);\n\t\t\ttrigger('reset','reset',messageData.iframe,messageData.id);\n\t\t}\n\n\t\tlog(messageData.id,'Size reset requested by '+('init'===messageData.type?'host page':'iFrame'));\n\t\tgetPagePosition(messageData.id);\n\t\tsyncResize(reset,messageData,'reset');\n\t}\n\n\tfunction setSize(messageData){\n\t\tfunction setDimension(dimension){\n\t\t\tmessageData.iframe.style[dimension] = messageData[dimension] + 'px';\n\t\t\tlog(\n\t\t\t\tmessageData.id,\n\t\t\t\t'IFrame (' + iframeId +\n\t\t\t\t') ' + dimension +\n\t\t\t\t' set to ' + messageData[dimension] + 'px'\n\t\t\t);\n\t\t}\n\n\t\tfunction chkZero(dimension){\n\t\t\t//FireFox sets dimension of hidden iFrames to zero.\n\t\t\t//So if we detect that set up an event to check for\n\t\t\t//when iFrame becomes visible.\n\n\t\t\t/* istanbul ignore next */  //Not testable in PhantomJS\n\t\t\tif (!hiddenCheckEnabled && '0' === messageData[dimension]){\n\t\t\t\thiddenCheckEnabled = true;\n\t\t\t\tlog(iframeId,'Hidden iFrame detected, creating visibility listener');\n\t\t\t\tfixHiddenIFrames();\n\t\t\t}\n\t\t}\n\n\t\tfunction processDimension(dimension){\n\t\t\tsetDimension(dimension);\n\t\t\tchkZero(dimension);\n\t\t}\n\n\t\tvar iframeId = messageData.iframe.id;\n\n\t\tif(settings[iframeId]){\n\t\t\tif( settings[iframeId].sizeHeight) { processDimension('height'); }\n\t\t\tif( settings[iframeId].sizeWidth ) { processDimension('width'); }\n\t\t}\n\t}\n\n\tfunction syncResize(func,messageData,doNotSync){\n\t\t/* istanbul ignore if */  //Not testable in PhantomJS\n\t\tif(doNotSync!==messageData.type && requestAnimationFrame){\n\t\t\tlog(messageData.id,'Requesting animation frame');\n\t\t\trequestAnimationFrame(func);\n\t\t} else {\n\t\t\tfunc();\n\t\t}\n\t}\n\n\tfunction trigger(calleeMsg,msg,iframe,id){\n\t\tfunction postMessageToIFrame(){\n\t\t\tvar target = settings[id].targetOrigin;\n\t\t\tlog(id,'[' + calleeMsg + '] Sending msg to iframe['+id+'] ('+msg+') targetOrigin: '+target);\n\t\t\tiframe.contentWindow.postMessage( msgId + msg, target );\n\t\t}\n\n\t\tfunction iFrameNotFound(){\n\t\t\tinfo(id,'[' + calleeMsg + '] IFrame('+id+') not found');\n\t\t\tif(settings[id]) {\n\t\t\t\tdelete settings[id];\n\t\t\t}\n\t\t}\n\n\t\tfunction chkAndSend(){\n\t\t\tif(iframe && 'contentWindow' in iframe && (null !== iframe.contentWindow)){ //Null test for PhantomJS\n\t\t\t\tpostMessageToIFrame();\n\t\t\t} else {\n\t\t\t\tiFrameNotFound();\n\t\t\t}\n\t\t}\n\n\t\tid = id || iframe.id;\n\n\t\tif(settings[id]) {\n\t\t\tchkAndSend();\n\t\t}\n\n\t}\n\n\tfunction createOutgoingMsg(iframeId){\n\t\treturn iframeId +\n\t\t\t':' + settings[iframeId].bodyMarginV1 +\n\t\t\t':' + settings[iframeId].sizeWidth +\n\t\t\t':' + settings[iframeId].log +\n\t\t\t':' + settings[iframeId].interval +\n\t\t\t':' + settings[iframeId].enablePublicMethods +\n\t\t\t':' + settings[iframeId].autoResize +\n\t\t\t':' + settings[iframeId].bodyMargin +\n\t\t\t':' + settings[iframeId].heightCalculationMethod +\n\t\t\t':' + settings[iframeId].bodyBackground +\n\t\t\t':' + settings[iframeId].bodyPadding +\n\t\t\t':' + settings[iframeId].tolerance +\n\t\t\t':' + settings[iframeId].inPageLinks +\n\t\t\t':' + settings[iframeId].resizeFrom +\n\t\t\t':' + settings[iframeId].widthCalculationMethod;\n\t}\n\n\tfunction setupIFrame(iframe,options){\n\t\tfunction setLimits(){\n\t\t\tfunction addStyle(style){\n\t\t\t\tif ((Infinity !== settings[iframeId][style]) && (0 !== settings[iframeId][style])){\n\t\t\t\t\tiframe.style[style] = settings[iframeId][style] + 'px';\n\t\t\t\t\tlog(iframeId,'Set '+style+' = '+settings[iframeId][style]+'px');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction chkMinMax(dimension){\n\t\t\t\tif (settings[iframeId]['min'+dimension]>settings[iframeId]['max'+dimension]){\n\t\t\t\t\tthrow new Error('Value for min'+dimension+' can not be greater than max'+dimension);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tchkMinMax('Height');\n\t\t\tchkMinMax('Width');\n\n\t\t\taddStyle('maxHeight');\n\t\t\taddStyle('minHeight');\n\t\t\taddStyle('maxWidth');\n\t\t\taddStyle('minWidth');\n\t\t}\n\n\t\tfunction newId(){\n\t\t\tvar id = ((options && options.id) || defaults.id + count++);\n\t\t\tif  (null!==document.getElementById(id)){\n\t\t\t\tid = id + count++;\n\t\t\t}\n\t\t\treturn id;\n\t\t}\n\n\t\tfunction ensureHasId(iframeId){\n\t\t\tlogId=iframeId;\n\t\t\tif (''===iframeId){\n\t\t\t\tiframe.id = iframeId =  newId();\n\t\t\t\tlogEnabled = (options || {}).log;\n\t\t\t\tlogId=iframeId;\n\t\t\t\tlog(iframeId,'Added missing iframe ID: '+ iframeId +' (' + iframe.src + ')');\n\t\t\t}\n\n\n\t\t\treturn iframeId;\n\t\t}\n\n\t\tfunction setScrolling(){\n\t\t\tlog(iframeId,'IFrame scrolling ' + (settings[iframeId].scrolling ? 'enabled' : 'disabled') + ' for ' + iframeId);\n\t\t\tiframe.style.overflow = false === settings[iframeId].scrolling ? 'hidden' : 'auto';\n\t\t\tiframe.scrolling      = false === settings[iframeId].scrolling ? 'no' : 'yes';\n\t\t}\n\n\t\t//The V1 iFrame script expects an int, where as in V2 expects a CSS\n\t\t//string value such as '1px 3em', so if we have an int for V2, set V1=V2\n\t\t//and then convert V2 to a string PX value.\n\t\tfunction setupBodyMarginValues(){\n\t\t\tif (('number'===typeof(settings[iframeId].bodyMargin)) || ('0'===settings[iframeId].bodyMargin)){\n\t\t\t\tsettings[iframeId].bodyMarginV1 = settings[iframeId].bodyMargin;\n\t\t\t\tsettings[iframeId].bodyMargin   = '' + settings[iframeId].bodyMargin + 'px';\n\t\t\t}\n\t\t}\n\n\t\tfunction checkReset(){\n\t\t\t// Reduce scope of firstRun to function, because IE8's JS execution\n\t\t\t// context stack is borked and this value gets externally\n\t\t\t// changed midway through running this function!!!\n\t\t\tvar\n\t\t\t\tfirstRun           = settings[iframeId].firstRun,\n\t\t\t\tresetRequertMethod = settings[iframeId].heightCalculationMethod in resetRequiredMethods;\n\n\t\t\tif (!firstRun && resetRequertMethod){\n\t\t\t\tresetIFrame({iframe:iframe, height:0, width:0, type:'init'});\n\t\t\t}\n\t\t}\n\n\t\tfunction setupIFrameObject(){\n\t\t\tif(Function.prototype.bind){ //Ignore unpolyfilled IE8.\n\t\t\t\tsettings[iframeId].iframe.iFrameResizer = {\n\n\t\t\t\t\tclose        : closeIFrame.bind(null,settings[iframeId].iframe),\n\n\t\t\t\t\tresize       : trigger.bind(null,'Window resize', 'resize', settings[iframeId].iframe),\n\n\t\t\t\t\tmoveToAnchor : function(anchor){\n\t\t\t\t\t\ttrigger('Move to anchor','moveToAnchor:'+anchor, settings[iframeId].iframe,iframeId);\n\t\t\t\t\t},\n\n\t\t\t\t\tsendMessage  : function(message){\n\t\t\t\t\t\tmessage = JSON.stringify(message);\n\t\t\t\t\t\ttrigger('Send Message','message:'+message, settings[iframeId].iframe,iframeId);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\t//We have to call trigger twice, as we can not be sure if all\n\t\t//iframes have completed loading when this code runs. The\n\t\t//event listener also catches the page changing in the iFrame.\n\t\tfunction init(msg){\n\t\t\tfunction iFrameLoaded(){\n\t\t\t\ttrigger('iFrame.onload',msg,iframe);\n\t\t\t\tcheckReset();\n\t\t\t}\n\n\t\t\taddEventListener(iframe,'load',iFrameLoaded);\n\t\t\ttrigger('init',msg,iframe);\n\t\t}\n\n\t\tfunction checkOptions(options){\n\t\t\tif ('object' !== typeof options){\n\t\t\t\tthrow new TypeError('Options is not an object');\n\t\t\t}\n\t\t}\n\n\t\tfunction copyOptions(options){\n\t\t\tfor (var option in defaults) {\n\t\t\t\tif (defaults.hasOwnProperty(option)){\n\t\t\t\t\tsettings[iframeId][option] = options.hasOwnProperty(option) ? options[option] : defaults[option];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction getTargetOrigin (remoteHost){\n\t\t\treturn ('' === remoteHost || 'file://' === remoteHost) ? '*' : remoteHost;\n\t\t}\n\n\t\tfunction processOptions(options){\n\t\t\toptions = options || {};\n\t\t\tsettings[iframeId] = {\n\t\t\t\tfirstRun\t: true,\n\t\t\t\tiframe\t\t: iframe,\n\t\t\t\tremoteHost\t: iframe.src.split('/').slice(0,3).join('/')\n\t\t\t};\n\n\t\t\tcheckOptions(options);\n\t\t\tcopyOptions(options);\n\n\t\t\tsettings[iframeId].targetOrigin = true === settings[iframeId].checkOrigin ? getTargetOrigin(settings[iframeId].remoteHost) : '*';\n\t\t}\n\n\t\tfunction beenHere(){\n\t\t\treturn (iframeId in settings && 'iFrameResizer' in iframe);\n\t\t}\n\n\t\tvar iframeId = ensureHasId(iframe.id);\n\n\t\tif (!beenHere()){\n\t\t\tprocessOptions(options);\n\t\t\tsetScrolling();\n\t\t\tsetLimits();\n\t\t\tsetupBodyMarginValues();\n\t\t\tinit(createOutgoingMsg(iframeId));\n\t\t\tsetupIFrameObject();\n\t\t} else {\n\t\t\twarn(iframeId,'Ignored iFrame, already setup.');\n\t\t}\n\t}\n\n\tfunction debouce(fn,time){\n\t\tif (null === timer){\n\t\t\ttimer = setTimeout(function(){\n\t\t\t\ttimer = null;\n\t\t\t\tfn();\n\t\t\t}, time);\n\t\t}\n\t}\n\n\t/* istanbul ignore next */  //Not testable in PhantomJS\n\tfunction fixHiddenIFrames(){\n\t\tfunction checkIFrames(){\n\t\t\tfunction checkIFrame(settingId){\n\t\t\t\tfunction chkDimension(dimension){\n\t\t\t\t\treturn '0px' === settings[settingId].iframe.style[dimension];\n\t\t\t\t}\n\n\t\t\t\tfunction isVisible(el) {\n\t\t\t\t\treturn (null !== el.offsetParent);\n\t\t\t\t}\n\n\t\t\t\tif (isVisible(settings[settingId].iframe) && (chkDimension('height') || chkDimension('width'))){\n\t\t\t\t\ttrigger('Visibility change', 'resize', settings[settingId].iframe,settingId);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var settingId in settings){\n\t\t\t\tcheckIFrame(settingId);\n\t\t\t}\n\t\t}\n\n\t\tfunction mutationObserved(mutations){\n\t\t\tlog('window','Mutation observed: ' + mutations[0].target + ' ' + mutations[0].type);\n\t\t\tdebouce(checkIFrames,16);\n\t\t}\n\n\t\tfunction createMutationObserver(){\n\t\t\tvar\n\t\t\t\ttarget = document.querySelector('body'),\n\n\t\t\t\tconfig = {\n\t\t\t\t\tattributes            : true,\n\t\t\t\t\tattributeOldValue     : false,\n\t\t\t\t\tcharacterData         : true,\n\t\t\t\t\tcharacterDataOldValue : false,\n\t\t\t\t\tchildList             : true,\n\t\t\t\t\tsubtree               : true\n\t\t\t\t},\n\n\t\t\t\tobserver = new MutationObserver(mutationObserved);\n\n\t\t\tobserver.observe(target, config);\n\t\t}\n\n\t\tvar MutationObserver = window.MutationObserver || window.WebKitMutationObserver;\n\n\t\tif (MutationObserver) createMutationObserver();\n\t}\n\n\n\tfunction resizeIFrames(event){\n\t\tfunction resize(){\n\t\t\tsendTriggerMsg('Window '+event,'resize');\n\t\t}\n\n\t\tlog('window','Trigger event: '+event);\n\t\tdebouce(resize,16);\n\t}\n\n\t/* istanbul ignore next */  //Not testable in PhantomJS\n\tfunction tabVisible() {\n\t\tfunction resize(){\n\t\t\tsendTriggerMsg('Tab Visable','resize');\n\t\t}\n\n\t\tif('hidden' !== document.visibilityState) {\n\t\t\tlog('document','Trigger event: Visiblity change');\n\t\t\tdebouce(resize,16);\n\t\t}\n\t}\n\n\tfunction sendTriggerMsg(eventName,event){\n\t\tfunction isIFrameResizeEnabled(iframeId) {\n\t\t\treturn\t'parent' === settings[iframeId].resizeFrom &&\n\t\t\t\t\tsettings[iframeId].autoResize &&\n\t\t\t\t\t!settings[iframeId].firstRun;\n\t\t}\n\n\t\tfor (var iframeId in settings){\n\t\t\tif(isIFrameResizeEnabled(iframeId)){\n\t\t\t\ttrigger(eventName,event,document.getElementById(iframeId),iframeId);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction setupEventListeners(){\n\t\taddEventListener(window,'message',iFrameListener);\n\n\t\taddEventListener(window,'resize', function(){resizeIFrames('resize');});\n\n\t\taddEventListener(document,'visibilitychange',tabVisible);\n\t\taddEventListener(document,'-webkit-visibilitychange',tabVisible); //Andriod 4.4\n\t\taddEventListener(window,'focusin',function(){resizeIFrames('focus');}); //IE8-9\n\t\taddEventListener(window,'focus',function(){resizeIFrames('focus');});\n\t}\n\n\n\tfunction factory(){\n\t\tfunction init(options,element){\n\t\t\tfunction chkType(){\n\t\t\t\tif(!element.tagName) {\n\t\t\t\t\tthrow new TypeError('Object is not a valid DOM element');\n\t\t\t\t} else if ('IFRAME' !== element.tagName.toUpperCase()) {\n\t\t\t\t\tthrow new TypeError('Expected <IFRAME> tag, found <'+element.tagName+'>');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(element) {\n\t\t\t\tchkType();\n\t\t\t\tsetupIFrame(element, options);\n\t\t\t\tiFrames.push(element);\n\t\t\t}\n\t\t}\n\n\t\tvar iFrames;\n\n\t\tsetupRequestAnimationFrame();\n\t\tsetupEventListeners();\n\n\t\treturn function iFrameResizeF(options,target){\n\t\t\tiFrames = []; //Only return iFrames past in on this call\n\n\t\t\tswitch (typeof(target)){\n\t\t\tcase 'undefined':\n\t\t\tcase 'string':\n\t\t\t\tArray.prototype.forEach.call(\n\t\t\t\t\tdocument.querySelectorAll( target || 'iframe' ),\n\t\t\t\t\tinit.bind(undefined, options)\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'object':\n\t\t\t\tinit(options,target);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new TypeError('Unexpected data type ('+typeof(target)+')');\n\t\t\t}\n\n\t\t\treturn iFrames;\n\t\t};\n\t}\n\n\tfunction createJQueryPublicMethod($){\n\t\tif (!$.fn) {\n\t\t\tinfo('','Unable to bind to jQuery, it is not fully loaded.');\n\t\t} else {\n\t\t\t$.fn.iFrameResize = function $iFrameResizeF(options) {\n\t\t\t\tfunction init(index, element) {\n\t\t\t\t\tsetupIFrame(element, options);\n\t\t\t\t}\n\n\t\t\t\treturn this.filter('iframe').each(init).end();\n\t\t\t};\n\t\t}\n\t}\n\n\tif (window.jQuery) { createJQueryPublicMethod(jQuery); }\n\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine([],factory);\n\t} else if (typeof module === 'object' && typeof module.exports === 'object') { //Node for browserfy\n\t\tmodule.exports = factory();\n\t} else {\n\t\twindow.iFrameResize = window.iFrameResize || factory();\n\t}\n\n})(window || {});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/iframe-resizer/js/iframeResizer.js\n ** module id = 3\n ** module chunks = 0\n **/","exports.iframeResizer = require('./iframeResizer');\nexports.iframeResizerContentWindow = require('./iframeResizer.contentWindow');\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/iframe-resizer/js/index.js\n ** module id = 4\n ** module chunks = 0\n **/"],"sourceRoot":""}