!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.qando=t():e.qando=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=document.querySelector(e),i=t.shop,r=t.service,u=o(i,r,t),c=document.createElement("iframe");c.src=u,c.style.border="0px",c.style.width="100%",c.frameborder="0",c.scrolling="no",n.appendChild(c),a({checkOrigin:!1,log:!1})}function o(e,t,n){var i=u+"/"+e;return t&&(i+="/booking/"+t),i+="?iframe="+e+"&iframeWithHeader="+~~n.header+"&iframeWithFooter="+~~n.footer+"&iframeCustomCss="+~~n.css}var r=n(1),a=r.iframeResizer,u="http://booking.qando.it",c={booking:i};e.exports=c},function(e,t,n){"use strict";e.exports=n(4)},function(e,t){!function(e,t){"use strict";function n(t,n,i){"addEventListener"in e?t.addEventListener(n,i,!1):"attachEvent"in e&&t.attachEvent("on"+n,i)}function i(t,n,i){"removeEventListener"in e?t.removeEventListener(n,i,!1):"detachEvent"in e&&t.detachEvent("on"+n,i)}function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function r(e){var t,n,i,o=null,r=0,a=function(){r=Re(),o=null,i=e.apply(t,n),o||(t=n=null)};return function(){var u=Re();r||(r=u);var c=Ie-(u-r);return t=this,n=arguments,c<=0||c>Ie?(o&&(clearTimeout(o),o=null),r=u,i=e.apply(t,n),o||(t=n=null)):o||(o=setTimeout(a,c)),i}}function a(e){return me+"["+he+"] "+e}function u(t){de&&"object"==typeof e.console&&console.log(a(t))}function c(t){"object"==typeof e.console&&console.warn(a(t))}function s(){f(),u("Initialising iFrame ("+location.href+")"),l(),g(),m("background",Q),m("padding",_),x(),b(),w(),h(),C(),E(),se=S(),B("init","Init message from host page"),ze()}function f(){function e(e){return"true"===e}var n=ce.substr(ge).split(":");he=n[0],G=t!==n[1]?Number(n[1]):G,ee=t!==n[2]?e(n[2]):ee,de=t!==n[3]?e(n[3]):de,fe=t!==n[4]?Number(n[4]):fe,Y=t!==n[6]?e(n[6]):Y,$=n[7],ae=t!==n[8]?n[8]:ae,Q=n[9],_=n[10],Ee=t!==n[11]?Number(n[11]):Ee,se.enable=t!==n[12]&&e(n[12]),ye=t!==n[13]?n[13]:ye,xe=t!==n[14]?n[14]:xe}function l(){function t(){var t=e.iFrameResizer;u("Reading data from page: "+JSON.stringify(t)),Ce="messageCallback"in t?t.messageCallback:Ce,ze="readyCallback"in t?t.readyCallback:ze,we="targetOrigin"in t?t.targetOrigin:we,ae="heightCalculationMethod"in t?t.heightCalculationMethod:ae,xe="widthCalculationMethod"in t?t.widthCalculationMethod:xe}function n(e,t){return"function"==typeof e&&(u("Setup custom "+t+"CalcMethod"),Fe[t]=e,e="custom"),e}"iFrameResizer"in e&&Object===e.iFrameResizer.constructor&&(t(),ae=n(ae,"height"),xe=n(xe,"width")),u("TargetOrigin for parent set to: "+we)}function d(e,t){return-1!==t.indexOf("-")&&(c("Negative CSS value ignored for "+e),t=""),t}function m(e,n){t!==n&&""!==n&&"null"!==n&&(document.body.style[e]=n,u("Body "+e+' set to "'+n+'"'))}function g(){t===$&&($=G+"px"),m("margin",d("margin",$))}function h(){document.documentElement.style.height="",document.body.style.height="",u('HTML & body height set to "auto"')}function p(t){function r(){B(t.eventName,t.eventType)}var a={add:function(t){n(e,t,r)},remove:function(t){i(e,t,r)}};t.eventNames&&Array.prototype.map?(t.eventName=t.eventNames[0],t.eventNames.map(a[t.method])):a[t.method](t.eventName),u(o(t.method)+" event listener: "+t.eventType)}function y(e){p({method:e,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),p({method:e,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),p({method:e,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),p({method:e,eventType:"Input",eventName:"input"}),p({method:e,eventType:"Mouse Up",eventName:"mouseup"}),p({method:e,eventType:"Mouse Down",eventName:"mousedown"}),p({method:e,eventType:"Orientation Change",eventName:"orientationchange"}),p({method:e,eventType:"Print",eventName:["afterprint","beforeprint"]}),p({method:e,eventType:"Ready State Change",eventName:"readystatechange"}),p({method:e,eventType:"Touch Start",eventName:"touchstart"}),p({method:e,eventType:"Touch End",eventName:"touchend"}),p({method:e,eventType:"Touch Cancel",eventName:"touchcancel"}),p({method:e,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),p({method:e,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),p({method:e,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),"child"===ye&&p({method:e,eventType:"IFrame Resized",eventName:"resize"})}function v(e,t,n,i){return t!==e&&(e in n||(c(e+" is not a valid option for "+i+"CalculationMethod."),e=t),u(i+' calculation method set to "'+e+'"')),e}function b(){ae=v(ae,re,Ae,"height")}function w(){xe=v(xe,Oe,We,"width")}function E(){!0===Y?(y("add"),F()):u("Auto Resize disabled")}function T(){u("Disable outgoing messages"),ve=!1}function k(){u("Remove event listener: Message"),i(e,"message",J)}function I(){null!==Z&&Z.disconnect()}function M(){y("remove"),I(),clearInterval(le)}function O(){T(),k(),!0===Y&&M()}function x(){var e=document.createElement("div");e.style.clear="both",e.style.display="block",document.body.appendChild(e)}function S(){function i(){return{x:e.pageXOffset!==t?e.pageXOffset:document.documentElement.scrollLeft,y:e.pageYOffset!==t?e.pageYOffset:document.documentElement.scrollTop}}function o(e){var t=e.getBoundingClientRect(),n=i();return{x:parseInt(t.left,10)+parseInt(n.x,10),y:parseInt(t.top,10)+parseInt(n.y,10)}}function r(e){function n(e){var t=o(e);u("Moving to in page link (#"+i+") at x: "+t.x+" y: "+t.y),U(t.y,t.x,"scrollToOffset")}var i=e.split("#")[1]||e,r=decodeURIComponent(i),a=document.getElementById(r)||document.getElementsByName(r)[0];t!==a?n(a):(u("In page link (#"+i+") not found in iFrame, so sending to parent"),U(0,0,"inPageLink","#"+i))}function a(){""!==location.hash&&"#"!==location.hash&&r(location.href)}function s(){function e(e){function t(e){e.preventDefault(),r(this.getAttribute("href"))}"#"!==e.getAttribute("href")&&n(e,"click",t)}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),e)}function f(){n(e,"hashchange",a)}function l(){setTimeout(a,ne)}function d(){Array.prototype.forEach&&document.querySelectorAll?(u("Setting up location.hash handlers"),s(),f(),l()):c("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}return se.enable?d():u("In page linking not enabled"),{findTarget:r}}function C(){u("Enable public methods"),Se.parentIFrame={autoResize:function(e){return!0===e&&!1===Y?(Y=!0,E()):!1===e&&!0===Y&&(Y=!1,M()),Y},close:function(){U(0,0,"close"),O()},getId:function(){return he},getPageInfo:function(e){"function"==typeof e?(Ne=e,U(0,0,"pageInfo")):(Ne=function(){},U(0,0,"pageInfoStop"))},moveToAnchor:function(e){se.findTarget(e)},reset:function(){D("parentIFrame.reset")},scrollTo:function(e,t){U(t,e,"scrollTo")},scrollToOffset:function(e,t){U(t,e,"scrollToOffset")},sendMessage:function(e,t){U(0,0,"message",JSON.stringify(e),t)},setHeightCalculationMethod:function(e){ae=e,b()},setWidthCalculationMethod:function(e){xe=e,w()},setTargetOrigin:function(e){u("Set targetOrigin: "+e),we=e},size:function(e,t){var n=""+(e?e:"")+(t?","+t:"");B("size","parentIFrame.size("+n+")",e,t)}}}function z(){0!==fe&&(u("setInterval: "+fe+"ms"),le=setInterval(function(){B("interval","setInterval: "+fe)},Math.abs(fe)))}function N(){function n(e){function t(e){!1===e.complete&&(u("Attach listeners to "+e.src),e.addEventListener("load",a,!1),e.addEventListener("error",c,!1),l.push(e))}"attributes"===e.type&&"src"===e.attributeName?t(e.target):"childList"===e.type&&Array.prototype.forEach.call(e.target.querySelectorAll("img"),t)}function i(e){l.splice(l.indexOf(e),1)}function o(e){u("Remove listeners from "+e.src),e.removeEventListener("load",a,!1),e.removeEventListener("error",c,!1),i(e)}function r(e,n,i){o(e.target),B(n,i+": "+e.target.src,t,t)}function a(e){r(e,"imageLoad","Image loaded")}function c(e){r(e,"imageLoadFailed","Image load failed")}function s(e){B("mutationObserver","mutationObserver: "+e[0].target+" "+e[0].type),e.forEach(n)}function f(){var e=document.querySelector("body"),t={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};return m=new d(s),u("Create body MutationObserver"),m.observe(e,t),m}var l=[],d=e.MutationObserver||e.WebKitMutationObserver,m=f();return{disconnect:function(){"disconnect"in m&&(u("Disconnect body MutationObserver"),m.disconnect(),l.forEach(o))}}}function F(){var t=0>fe;e.MutationObserver||e.WebKitMutationObserver?t?z():Z=N():(u("MutationObserver not supported in this browser!"),z())}function R(e,t){function n(e){var n=/^\d+(px)?$/i;if(n.test(e))return parseInt(e,K);var i=t.style.left,o=t.runtimeStyle.left;return t.runtimeStyle.left=t.currentStyle.left,t.style.left=e||0,e=t.style.pixelLeft,t.style.left=i,t.runtimeStyle.left=o,e}var i=0;return t=t||document.body,"defaultView"in document&&"getComputedStyle"in document.defaultView?(i=document.defaultView.getComputedStyle(t,null),i=null!==i?i[e]:0):i=n(t.currentStyle[e]),parseInt(i,K)}function A(e){e>Ie/2&&(Ie=2*e,u("Event throttle increased to "+Ie+"ms"))}function W(e,t){for(var n=t.length,i=0,r=0,a=o(e),c=Re(),s=0;s<n;s++)i=t[s].getBoundingClientRect()[e]+R("margin"+a,t[s]),i>r&&(r=i);return c=Re()-c,u("Parsed "+n+" HTML elements"),u("Element position calculated in "+c+"ms"),A(c),r}function L(e){return[e.bodyOffset(),e.bodyScroll(),e.documentElementOffset(),e.documentElementScroll()]}function P(e,t){function n(){return c("No tagged elements ("+t+") found on page"),oe}var i=document.querySelectorAll("["+t+"]");return 0===i.length?n():W(e,i)}function H(){return document.querySelectorAll("body *")}function q(e,n,i,o){function r(){oe=d,Me=m,U(oe,Me,e)}function a(){function e(e,t){var n=Math.abs(e-t)<=Ee;return!n}return d=t!==i?i:Ae[ae](),m=t!==o?o:We[xe](),e(oe,d)||ee&&e(Me,m)}function c(){return!(e in{init:1,interval:1,size:1})}function s(){return ae in pe||ee&&xe in pe}function f(){u("No change in size detected")}function l(){c()&&s()?D(n):e in{interval:1}||f()}var d,m;a()||"init"===e?(j(),r()):l()}function B(e,t,n,i){function o(){e in{reset:1,resetPage:1,init:1}||u("Trigger event: "+t)}function r(){return Te&&e in te}r()?u("Trigger event cancelled: "+e):(o(),Le(e,t,n,i))}function j(){Te||(Te=!0,u("Trigger event lock on")),clearTimeout(ke),ke=setTimeout(function(){Te=!1,u("Trigger event lock off"),u("--")},ne)}function V(e){oe=Ae[ae](),Me=We[xe](),U(oe,Me,e)}function D(e){var t=ae;ae=re,u("Reset trigger event: "+e),j(),V("reset"),ae=t}function U(e,n,i,o,r){function a(){t===r?r=we:u("Message targetOrigin: "+r)}function c(){var a=e+":"+n,c=he+":"+a+":"+i+(t!==o?":"+o:"");u("Sending message to host page ("+c+")"),be.postMessage(me+c,r)}!0===ve&&(a(),c())}function J(t){function i(){return me===(""+t.data).substr(0,ge)}function o(){function i(){ce=t.data,be=t.source,s(),ie=!1,setTimeout(function(){ue=!1},ne)}document.body?i():(u("Waiting for page ready"),n(e,"readystatechange",o))}function r(){ue?u("Page reset ignored by init"):(u("Page size reset by host page"),V("resetPage"))}function a(){B("resizeParent","Parent window requested size check")}function f(){var e=d();se.findTarget(e)}function l(){return t.data.split("]")[1].split(":")[0]}function d(){return t.data.substr(t.data.indexOf(":")+1)}function m(){return"iFrameResize"in e}function g(){var e=d();u("MessageCallback called from parent: "+e),Ce(JSON.parse(e)),u(" --")}function h(){var e=d();u("PageInfoFromParent called from parent: "+e),Ne(JSON.parse(e)),u(" --")}function p(){return t.data.split(":")[2]in{"true":1,"false":1}}function y(){switch(l()){case"reset":r();break;case"resize":a();break;case"inPageLink":case"moveToAnchor":f();break;case"message":g();break;case"pageInfo":h();break;default:m()||p()||c("Unexpected message ("+t.data+")")}}function v(){!1===ie?y():p()?o():u('Ignored message of type "'+l()+'". Received before initialization.')}i()&&v()}function X(){"loading"!==document.readyState&&e.parent.postMessage("[iFrameResizerChild]Ready","*")}var Y=!0,K=10,Q="",G=0,$="",Z=null,_="",ee=!1,te={resize:1,click:1},ne=128,ie=!0,oe=1,re="bodyOffset",ae=re,ue=!0,ce="",se={},fe=32,le=null,de=!1,me="[iFrameSizer]",ge=me.length,he="",pe={max:1,min:1,bodyScroll:1,documentElementScroll:1},ye="child",ve=!0,be=e.parent,we="*",Ee=0,Te=!1,ke=null,Ie=16,Me=1,Oe="scroll",xe=Oe,Se=e,Ce=function(){c("MessageCallback function not defined")},ze=function(){},Ne=function(){},Fe={height:function(){return c("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return c("Custom width calculation function not defined"),document.body.scrollWidth}},Re=Date.now||function(){return(new Date).getTime()},Ae={bodyOffset:function(){return document.body.offsetHeight+R("marginTop")+R("marginBottom")},offset:function(){return Ae.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return Fe.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,L(Ae))},min:function(){return Math.min.apply(null,L(Ae))},grow:function(){return Ae.max()},lowestElement:function(){return Math.max(Ae.bodyOffset(),W("bottom",H()))},taggedElement:function(){return P("bottom","data-iframe-height")}},We={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return Fe.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(We.bodyScroll(),We.documentElementScroll())},max:function(){return Math.max.apply(null,L(We))},min:function(){return Math.min.apply(null,L(We))},rightMostElement:function(){return W("right",H())},taggedElement:function(){return P("right","data-iframe-width")}},Le=r(q);n(e,"message",J),X()}(window||{})},function(e,t,n){var i,o,r;!function(n){"use strict";function a(e,t,i){"addEventListener"in n?e.addEventListener(t,i,!1):"attachEvent"in n&&e.attachEvent("on"+t,i)}function u(e,t,i){"removeEventListener"in n?e.removeEventListener(t,i,!1):"detachEvent"in n&&e.detachEvent("on"+t,i)}function c(){var e,t=["moz","webkit","o","ms"];for(e=0;e<t.length&&!U;e+=1)U=n[t[e]+"RequestAnimationFrame"];U||d("setup","RequestAnimationFrame not supported")}function s(e){var t="Host page: "+e;return n.top!==n.self&&(t=n.parentIFrame&&n.parentIFrame.getId?n.parentIFrame.getId()+": "+e:"Nested host page: "+e),t}function f(e){return j+"["+s(e)+"]"}function l(e){return X[e]?X[e].log:P}function d(e,t){h("log",e,t,l(e))}function m(e,t){h("info",e,t,l(e))}function g(e,t){h("warn",e,t,!0)}function h(e,t,i,o){!0===o&&"object"==typeof n.console&&console[e](f(t),i)}function p(e){function t(){function e(){k(J),w(Y)}o("Height"),o("Width"),I(e,J,"init")}function i(){var e=U.substr(V).split(":");return{iframe:X[e[0]].iframe,id:e[0],height:e[1],width:e[2],type:e[3]}}function o(e){var t=Number(X[Y]["max"+e]),n=Number(X[Y]["min"+e]),i=e.toLowerCase(),o=Number(J[i]);d(Y,"Checking "+i+" is in range "+n+"-"+t),o<n&&(o=n,d(Y,"Set "+i+" to min value")),o>t&&(o=t,d(Y,"Set "+i+" to max value")),J[i]=""+o}function r(){function t(){function e(){var e=0,t=!1;for(d(Y,"Checking connection is from allowed list of origins: "+i);e<i.length;e++)if(i[e]===n){t=!0;break}return t}function t(){var e=X[Y].remoteHost;return d(Y,"Checking connection is from: "+e),n===e}return i.constructor===Array?e():t()}var n=e.origin,i=X[Y].checkOrigin;if(i&&""+n!="null"&&!t())throw new Error("Unexpected message received from: "+n+" for "+J.iframe.id+". Message was: "+e.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}function c(){return j===(""+U).substr(0,V)&&U.substr(V).split(":")[0]in X}function s(){var e=J.type in{"true":1,"false":1,undefined:1};return e&&d(Y,"Ignoring init message from meta parent page"),e}function f(e){return U.substr(U.indexOf(":")+B+e)}function l(e){d(Y,"MessageCallback passed: {iframe: "+J.iframe.id+", message: "+e+"}"),W("messageCallback",{iframe:J.iframe,message:JSON.parse(e)}),d(Y,"--")}function h(){var e=document.body.getBoundingClientRect(),t=J.iframe.getBoundingClientRect();return JSON.stringify({iframeHeight:t.height,iframeWidth:t.width,clientHeight:Math.max(document.documentElement.clientHeight,n.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,n.innerWidth||0),offsetTop:parseInt(t.top-e.top,10),offsetLeft:parseInt(t.left-e.left,10),scrollTop:n.pageYOffset,scrollLeft:n.pageXOffset})}function p(e,t){function n(){M("Send Page Info","pageInfo:"+h(),e,t)}S(n,32)}function x(){function e(e,i){function r(){X[o]?p(X[o].iframe,o):t()}["scroll","resize"].forEach(function(t){d(o,e+t+" listener for sendPageInfo"),i(n,t,r)})}function t(){e("Remove ",u)}function i(){e("Add ",a)}var o=Y;i(),X[o].stopPageInfo=t}function C(){X[Y]&&X[Y].stopPageInfo&&(X[Y].stopPageInfo(),delete X[Y].stopPageInfo)}function z(){var e=!0;return null===J.iframe&&(g(Y,"IFrame ("+J.id+") not found"),e=!1),e}function N(e){var t=e.getBoundingClientRect();return b(Y),{x:Math.floor(Number(t.left)+Number(D.x)),y:Math.floor(Number(t.top)+Number(D.y))}}function F(e){function t(){D=a,R(),d(Y,"--")}function i(){return{x:Number(J.width)+r.x,y:Number(J.height)+r.y}}function o(){n.parentIFrame?n.parentIFrame["scrollTo"+(e?"Offset":"")](a.x,a.y):g(Y,"Unable to scroll to requested position, window.parentIFrame not found")}var r=e?N(J.iframe):{x:0,y:0},a=i();d(Y,"Reposition requested from iFrame (offset x:"+r.x+" y:"+r.y+")"),n.top!==n.self?o():t()}function R(){!1!==W("scrollCallback",D)?w(Y):E()}function A(e){function t(){var e=N(a);d(Y,"Moving to in page link (#"+o+") at x: "+e.x+" y: "+e.y),D={x:e.x,y:e.y},R(),d(Y,"--")}function i(){n.parentIFrame?n.parentIFrame.moveToAnchor(o):d(Y,"In page link #"+o+" not found and window.parentIFrame not found")}var o=e.split("#")[1]||"",r=decodeURIComponent(o),a=document.getElementById(r)||document.getElementsByName(r)[0];a?t():n.top!==n.self?i():d(Y,"In page link #"+o+" not found")}function W(e,t){return y(Y,e,t)}function L(){switch(X[Y].firstRun&&q(),J.type){case"close":v(J.iframe);break;case"message":l(f(6));break;case"scrollTo":F(!1);break;case"scrollToOffset":F(!0);break;case"pageInfo":p(X[Y].iframe,Y),x();break;case"pageInfoStop":C();break;case"inPageLink":A(f(9));break;case"reset":T(J);break;case"init":t(),W("initCallback",J.iframe),W("resizedCallback",J);break;default:t(),W("resizedCallback",J)}}function P(e){var t=!0;return X[e]||(t=!1,g(J.type+" No settings for "+e+". Message was: "+U)),t}function H(){for(var e in X)M("iFrame requested init",O(e),document.getElementById(e),e)}function q(){X[Y].firstRun=!1}var U=e.data,J={},Y=null;"[iFrameResizerChild]Ready"===U?H():c()?(J=i(),Y=K=J.id,!s()&&P(Y)&&(d(Y,"Received: "+U),z()&&r()&&L())):m(Y,"Ignored: "+U)}function y(e,t,n){var i=null,o=null;if(X[e]){if(i=X[e][t],"function"!=typeof i)throw new TypeError(t+" on iFrame["+e+"] is not a function");o=i(n)}return o}function v(e){var t=e.id;d(t,"Removing iFrame: "+t),e.parentNode.removeChild(e),y(t,"closedCallback",t),d(t,"--"),delete X[t]}function b(e){null===D&&(D={x:void 0!==n.pageXOffset?n.pageXOffset:document.documentElement.scrollLeft,y:void 0!==n.pageYOffset?n.pageYOffset:document.documentElement.scrollTop},d(e,"Get page position: "+D.x+","+D.y))}function w(e){null!==D&&(n.scrollTo(D.x,D.y),d(e,"Set page position: "+D.x+","+D.y),E())}function E(){D=null}function T(e){function t(){k(e),M("reset","reset",e.iframe,e.id)}d(e.id,"Size reset requested by "+("init"===e.type?"host page":"iFrame")),b(e.id),I(t,e,"reset")}function k(e){function t(t){e.iframe.style[t]=e[t]+"px",d(e.id,"IFrame ("+o+") "+t+" set to "+e[t]+"px")}function n(t){H||"0"!==e[t]||(H=!0,d(o,"Hidden iFrame detected, creating visibility listener"),C())}function i(e){t(e),n(e)}var o=e.iframe.id;X[o]&&(X[o].sizeHeight&&i("height"),X[o].sizeWidth&&i("width"))}function I(e,t,n){n!==t.type&&U?(d(t.id,"Requesting animation frame"),U(e)):e()}function M(e,t,n,i){function o(){var o=X[i].targetOrigin;d(i,"["+e+"] Sending msg to iframe["+i+"] ("+t+") targetOrigin: "+o),n.contentWindow.postMessage(j+t,o)}function r(){m(i,"["+e+"] IFrame("+i+") not found"),X[i]&&delete X[i]}function a(){n&&"contentWindow"in n&&null!==n.contentWindow?o():r()}i=i||n.id,X[i]&&a()}function O(e){return e+":"+X[e].bodyMarginV1+":"+X[e].sizeWidth+":"+X[e].log+":"+X[e].interval+":"+X[e].enablePublicMethods+":"+X[e].autoResize+":"+X[e].bodyMargin+":"+X[e].heightCalculationMethod+":"+X[e].bodyBackground+":"+X[e].bodyPadding+":"+X[e].tolerance+":"+X[e].inPageLinks+":"+X[e].resizeFrom+":"+X[e].widthCalculationMethod}function x(e,t){function n(){function t(t){1/0!==X[b][t]&&0!==X[b][t]&&(e.style[t]=X[b][t]+"px",d(b,"Set "+t+" = "+X[b][t]+"px"))}function n(e){if(X[b]["min"+e]>X[b]["max"+e])throw new Error("Value for min"+e+" can not be greater than max"+e)}n("Height"),n("Width"),t("maxHeight"),t("minHeight"),t("maxWidth"),t("minWidth")}function i(){var e=t&&t.id||Q.id+L++;return null!==document.getElementById(e)&&(e+=L++),e}function o(n){return K=n,""===n&&(e.id=n=i(),P=(t||{}).log,K=n,d(n,"Added missing iframe ID: "+n+" ("+e.src+")")),n}function r(){d(b,"IFrame scrolling "+(X[b].scrolling?"enabled":"disabled")+" for "+b),e.style.overflow=!1===X[b].scrolling?"hidden":"auto",e.scrolling=!1===X[b].scrolling?"no":"yes"}function u(){"number"!=typeof X[b].bodyMargin&&"0"!==X[b].bodyMargin||(X[b].bodyMarginV1=X[b].bodyMargin,X[b].bodyMargin=""+X[b].bodyMargin+"px")}function c(){var t=X[b].firstRun,n=X[b].heightCalculationMethod in J;!t&&n&&T({iframe:e,height:0,width:0,type:"init"})}function s(){Function.prototype.bind&&(X[b].iframe.iFrameResizer={close:v.bind(null,X[b].iframe),resize:M.bind(null,"Window resize","resize",X[b].iframe),moveToAnchor:function(e){M("Move to anchor","moveToAnchor:"+e,X[b].iframe,b)},sendMessage:function(e){e=JSON.stringify(e),M("Send Message","message:"+e,X[b].iframe,b)}})}function f(t){function n(){M("iFrame.onload",t,e),c()}a(e,"load",n),M("init",t,e)}function l(e){if("object"!=typeof e)throw new TypeError("Options is not an object")}function m(e){for(var t in Q)Q.hasOwnProperty(t)&&(X[b][t]=e.hasOwnProperty(t)?e[t]:Q[t])}function h(e){return""===e||"file://"===e?"*":e}function p(t){t=t||{},X[b]={firstRun:!0,iframe:e,remoteHost:e.src.split("/").slice(0,3).join("/")},l(t),m(t),X[b].targetOrigin=!0===X[b].checkOrigin?h(X[b].remoteHost):"*"}function y(){return b in X&&"iFrameResizer"in e}var b=o(e.id);y()?g(b,"Ignored iFrame, already setup."):(p(t),r(),n(),u(),f(O(b)),s())}function S(e,t){null===Y&&(Y=setTimeout(function(){Y=null,e()},t))}function C(){function e(){function e(e){function t(t){return"0px"===X[e].iframe.style[t]}function n(e){return null!==e.offsetParent}n(X[e].iframe)&&(t("height")||t("width"))&&M("Visibility change","resize",X[e].iframe,e)}for(var t in X)e(t)}function t(t){d("window","Mutation observed: "+t[0].target+" "+t[0].type),S(e,16)}function i(){var e=document.querySelector("body"),n={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},i=new o(t);i.observe(e,n)}var o=n.MutationObserver||n.WebKitMutationObserver;o&&i()}function z(e){function t(){F("Window "+e,"resize")}d("window","Trigger event: "+e),S(t,16)}function N(){function e(){F("Tab Visable","resize")}"hidden"!==document.visibilityState&&(d("document","Trigger event: Visiblity change"),S(e,16))}function F(e,t){function n(e){return"parent"===X[e].resizeFrom&&X[e].autoResize&&!X[e].firstRun}for(var i in X)n(i)&&M(e,t,document.getElementById(i),i)}function R(){a(n,"message",p),a(n,"resize",function(){z("resize")}),a(document,"visibilitychange",N),a(document,"-webkit-visibilitychange",N),a(n,"focusin",function(){z("focus")}),a(n,"focus",function(){z("focus")})}function A(){function e(e,n){function i(){if(!n.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==n.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+n.tagName+">")}n&&(i(),x(n,e),t.push(n))}var t;return c(),R(),function(n,i){switch(t=[],typeof i){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(i||"iframe"),e.bind(void 0,n));break;case"object":e(n,i);break;default:throw new TypeError("Unexpected data type ("+typeof i+")")}return t}}function W(e){e.fn?e.fn.iFrameResize=function(e){function t(t,n){x(n,e)}return this.filter("iframe").each(t).end()}:m("","Unable to bind to jQuery, it is not fully loaded.")}var L=0,P=!1,H=!1,q="message",B=q.length,j="[iFrameSizer]",V=j.length,D=null,U=n.requestAnimationFrame,J={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},X={},Y=null,K="Host Page",Q={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){g("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return!0}};n.jQuery&&W(jQuery),o=[],i=A,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(window||{})},function(e,t,n){t.iframeResizer=n(3),t.iframeResizerContentWindow=n(2)}])});
//# sourceMappingURL=qando.js.map